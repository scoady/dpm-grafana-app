/*! For license information please see module.js.LICENSE.txt */
/* [create-plugin] version: 5.19.0 */
define(["react-router","rxjs","module","@grafana/ui","lodash","react","@emotion/css","@grafana/data","react-dom","@grafana/runtime"],((e,t,r,n,a,o,i,s,l,u)=>(()=>{var c,d,p={144:(e,t,r)=>{const n=r(5380);e.exports=(e,t,r)=>n(e,t,r)>0},362:(e,t,r)=>{"use strict";var n=r(6441);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,t,r,a,o,i){if(i!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return r.PropTypes=r,r}},402:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},t.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},t.createCoreData=function(e,t,r){const a=!(0,n.isNum)(e.lastX),i=o(e);return a?{node:i,deltaX:0,deltaY:0,lastX:t,lastY:r,x:t,y:r}:{node:i,deltaX:t-e.lastX,deltaY:r-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:r}},t.createDraggableData=function(e,t){const r=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/r,y:e.state.y+t.deltaY/r,deltaX:t.deltaX/r,deltaY:t.deltaY/r,lastX:e.state.x,lastY:e.state.y}},t.getBoundPosition=function(e,t,r){if(!e.props.bounds)return[t,r];let{bounds:i}=e.props;i="string"==typeof i?i:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(i);const s=o(e);if("string"==typeof i){const{ownerDocument:e}=s,t=e.defaultView;let r;if(r="parent"===i?s.parentNode:e.querySelector(i),!(r instanceof t.HTMLElement))throw new Error('Bounds selector "'+i+'" could not find an element.');const o=r,l=t.getComputedStyle(s),u=t.getComputedStyle(o);i={left:-s.offsetLeft+(0,n.int)(u.paddingLeft)+(0,n.int)(l.marginLeft),top:-s.offsetTop+(0,n.int)(u.paddingTop)+(0,n.int)(l.marginTop),right:(0,a.innerWidth)(o)-(0,a.outerWidth)(s)-s.offsetLeft+(0,n.int)(u.paddingRight)-(0,n.int)(l.marginRight),bottom:(0,a.innerHeight)(o)-(0,a.outerHeight)(s)-s.offsetTop+(0,n.int)(u.paddingBottom)-(0,n.int)(l.marginBottom)}}(0,n.isNum)(i.right)&&(t=Math.min(t,i.right));(0,n.isNum)(i.bottom)&&(r=Math.min(r,i.bottom));(0,n.isNum)(i.left)&&(t=Math.max(t,i.left));(0,n.isNum)(i.top)&&(r=Math.max(r,i.top));return[t,r]},t.getControlPosition=function(e,t,r){const n="number"==typeof t?(0,a.getTouch)(e,t):null;if("number"==typeof t&&!n)return null;const i=o(r),s=r.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,a.offsetXYFromParent)(n||e,s,r.props.scale)},t.snapToGrid=function(e,t,r){const n=Math.round(t/e[0])*e[0],a=Math.round(r/e[1])*e[1];return[n,a]};var n=r(6732),a=r(2837);function o(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}},410:e=>{const t=/^[0-9]+$/,r=(e,r)=>{const n=t.test(e),a=t.test(r);return n&&a&&(e=+e,r=+r),e===r?0:n&&!a?-1:a&&!n?1:e<r?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},414:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bottom=d,t.childrenEqual=function(e,t){return(0,n.default)(a.default.Children.map(e,(function(e){return null==e?void 0:e.key})),a.default.Children.map(t,(function(e){return null==e?void 0:e.key})))},t.cloneLayout=p,t.cloneLayoutItem=f,t.collides=g,t.compact=v,t.compactItem=w,t.compactType=function(e){var t=e||{},r=t.verticalCompact,n=t.compactType;return!1===r?null:n},t.correctBounds=S,t.fastPositionEqual=function(e,t){return e.left===t.left&&e.top===t.top&&e.width===t.width&&e.height===t.height},t.fastRGLPropsEqual=void 0,t.getAllCollisions=x,t.getFirstCollision=O,t.getLayoutItem=E,t.getStatics=R,t.modifyLayout=h,t.moveElement=_,t.moveElementAwayFromCollision=C,t.noop=void 0,t.perc=function(e){return 100*e+"%"},t.setTopLeft=function(e){var t=e.top,r=e.left,n=e.width,a=e.height;return{top:"".concat(t,"px"),left:"".concat(r,"px"),width:"".concat(n,"px"),height:"".concat(a,"px"),position:"absolute"}},t.setTransform=function(e){var t=e.top,r=e.left,n=e.width,a=e.height,o="translate(".concat(r,"px,").concat(t,"px)");return{transform:o,WebkitTransform:o,MozTransform:o,msTransform:o,OTransform:o,width:"".concat(n,"px"),height:"".concat(a,"px"),position:"absolute"}},t.sortLayoutItems=P,t.sortLayoutItemsByColRow=T,t.sortLayoutItemsByRowCol=I,t.synchronizeLayoutWithChildren=function(e,t,r,n,o){e=e||[];var i=[];a.default.Children.forEach(t,(function(t){if(null!=(null==t?void 0:t.key)){var r=E(e,String(t.key));if(r)i.push(f(r));else{!u&&t.props._grid&&console.warn("`_grid` properties on children have been deprecated as of React 15.2. Please use `data-grid` or add your properties directly to the `layout`.");var n=t.props["data-grid"]||t.props._grid;n?(u||D([n],"ReactGridLayout.children"),i.push(f(s(s({},n),{},{i:t.key})))):i.push(f({w:1,h:1,x:0,y:d(i),i:String(t.key)}))}}}));var l=S(i,{cols:r});return o?l:v(l,n,r)},t.validateLayout=D,t.withLayoutItem=function(e,t,r){var n=E(e,t);return n?(n=r(f(n)),[e=h(e,n),n]):[e,null]};var n=o(r(7842)),a=o(r(5959));function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=!0,c=!1;function d(e){for(var t,r=0,n=0,a=e.length;n<a;n++)(t=e[n].y+e[n].h)>r&&(r=t);return r}function p(e){for(var t=Array(e.length),r=0,n=e.length;r<n;r++)t[r]=f(e[r]);return t}function h(e,t){for(var r=Array(e.length),n=0,a=e.length;n<a;n++)t.i===e[n].i?r[n]=t:r[n]=e[n];return r}function f(e){return{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,minW:e.minW,maxW:e.maxW,minH:e.minH,maxH:e.maxH,moved:Boolean(e.moved),static:Boolean(e.static),isDraggable:e.isDraggable,isResizable:e.isResizable,resizeHandles:e.resizeHandles,isBounded:e.isBounded}}var m=r(7434);function g(e,t){return e.i!==t.i&&(!(e.x+e.w<=t.x)&&(!(e.x>=t.x+t.w)&&(!(e.y+e.h<=t.y)&&!(e.y>=t.y+t.h))))}function v(e,t,r){for(var n=R(e),a=P(e,t),o=Array(e.length),i=0,s=a.length;i<s;i++){var l=f(a[i]);l.static||(l=w(n,l,t,r,a),n.push(l)),o[e.indexOf(a[i])]=l,l.moved=!1}return o}t.fastRGLPropsEqual=m;var b={x:"w",y:"h"};function y(e,t,r,n){var a=b[n];t[n]+=1;for(var o=e.map((function(e){return e.i})).indexOf(t.i)+1;o<e.length;o++){var i=e[o];if(!i.static){if(i.y>t.y+t.h)break;g(t,i)&&y(e,i,r+t[a],n)}}t[n]=r}function w(e,t,r,n,a){var o,i="horizontal"===r;if("vertical"===r)for(t.y=Math.min(d(e),t.y);t.y>0&&!O(e,t);)t.y--;else if(i)for(;t.x>0&&!O(e,t);)t.x--;for(;o=O(e,t);)i?y(a,t,o.x+o.w,"x"):y(a,t,o.y+o.h,"y"),i&&t.x+t.w>n&&(t.x=n-t.w,t.y++);return t.y=Math.max(t.y,0),t.x=Math.max(t.x,0),t}function S(e,t){for(var r=R(e),n=0,a=e.length;n<a;n++){var o=e[n];if(o.x+o.w>t.cols&&(o.x=t.cols-o.w),o.x<0&&(o.x=0,o.w=t.cols),o.static)for(;O(r,o);)o.y++;else r.push(o)}return e}function E(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r].i===t)return e[r]}function O(e,t){for(var r=0,n=e.length;r<n;r++)if(g(e[r],t))return e[r]}function x(e,t){return e.filter((function(e){return g(e,t)}))}function R(e){return e.filter((function(e){return e.static}))}function _(e,t,r,n,a,o,i,s,l){if(t.static&&!0!==t.isDraggable)return e;if(t.y===n&&t.x===r)return e;A("Moving element ".concat(t.i," to [").concat(String(r),",").concat(String(n),"] from [").concat(t.x,",").concat(t.y,"]"));var u=t.x,c=t.y;"number"==typeof r&&(t.x=r),"number"==typeof n&&(t.y=n),t.moved=!0;var d=P(e,i);("vertical"===i&&"number"==typeof n?c>=n:"horizontal"===i&&"number"==typeof r&&u>=r)&&(d=d.reverse());var h=x(d,t),f=h.length>0;if(f&&l)return p(e);if(f&&o)return A("Collision prevented on ".concat(t.i,", reverting.")),t.x=u,t.y=c,t.moved=!1,e;for(var m=0,g=h.length;m<g;m++){var v=h[m];A("Resolving collision between ".concat(t.i," at [").concat(t.x,",").concat(t.y,"] and ").concat(v.i," at [").concat(v.x,",").concat(v.y,"]")),v.moved||(e=v.static?C(e,v,t,a,i,s):C(e,t,v,a,i,s))}return e}function C(e,t,r,n,a,o){var i="horizontal"===a,s="horizontal"!==a,l=t.static;if(n){n=!1;var u={x:i?Math.max(t.x-r.w,0):r.x,y:s?Math.max(t.y-r.h,0):r.y,w:r.w,h:r.h,i:"-1"};if(!O(e,u))return A("Doing reverse collision on ".concat(r.i," up to [").concat(u.x,",").concat(u.y,"].")),_(e,r,i?u.x:void 0,s?u.y:void 0,n,l,a,o)}return _(e,r,i?r.x+1:void 0,s?r.y+1:void 0,n,l,a,o)}function P(e,t){return"horizontal"===t?T(e):"vertical"===t?I(e):e}function I(e){return e.slice(0).sort((function(e,t){return e.y>t.y||e.y===t.y&&e.x>t.x?1:e.y===t.y&&e.x===t.x?0:-1}))}function T(e){return e.slice(0).sort((function(e,t){return e.x>t.x||e.x===t.x&&e.y>t.y?1:-1}))}function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Layout",r=["x","y","w","h"];if(!Array.isArray(e))throw new Error(t+" must be an array!");for(var n=0,a=e.length;n<a;n++)for(var o=e[n],i=0;i<r.length;i++)if("number"!=typeof o[r[i]])throw new Error("ReactGridLayout: "+t+"["+n+"]."+r[i]+" must be a number!")}function A(){var e;c&&(e=console).log.apply(e,arguments)}t.noop=function(){}},544:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findOrGenerateResponsiveLayout=function(e,t,r,o,i,s){if(e[r])return(0,n.cloneLayout)(e[r]);for(var l=e[o],u=a(t),c=u.slice(u.indexOf(r)),d=0,p=c.length;d<p;d++){var h=c[d];if(e[h]){l=e[h];break}}return l=(0,n.cloneLayout)(l||[]),(0,n.compact)((0,n.correctBounds)(l,{cols:i}),s,i)},t.getBreakpointFromWidth=function(e,t){for(var r=a(e),n=r[0],o=1,i=r.length;o<i;o++){var s=r[o];t>e[s]&&(n=s)}return n},t.getColsFromBreakpoint=function(e,t){if(!t[e])throw new Error("ResponsiveReactGridLayout: `cols` entry for breakpoint "+e+" is missing!");return t[e]},t.sortBreakpoints=a;var n=r(414);function a(e){return Object.keys(e).sort((function(t,r){return e[t]-e[r]}))}},599:(e,t,r)=>{const n=r(5380);e.exports=(e,t,r)=>n(e,t,r)<0},603:(e,t,r)=>{const n=r(2801);e.exports=(e,t)=>e.sort(((e,r)=>n(e,r,t)))},651:(e,t,r)=>{const n=r(8395);e.exports=(e,t)=>new n(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},660:(e,t,r)=>{const n=r(5860);e.exports=(e,t)=>{const r=n(e,null,!0),a=n(t,null,!0),o=r.compare(a);if(0===o)return null;const i=o>0,s=i?r:a,l=i?a:r,u=!!s.prerelease.length;if(!!l.prerelease.length&&!u){if(!l.patch&&!l.minor)return"major";if(0===l.compareMain(s))return l.minor&&!l.patch?"minor":"patch"}const c=u?"pre":"";return r.major!==a.major?c+"major":r.minor!==a.minor?c+"minor":r.patch!==a.patch?c+"patch":"prerelease"}},906:(e,t)=>{"use strict";function r(e){var t=e.margin,r=e.containerPadding,n=e.containerWidth,a=e.cols;return(n-t[0]*(a-1)-2*r[0])/a}function n(e,t,r){return Number.isFinite(e)?Math.round(t*e+Math.max(0,e-1)*r):e}function a(e,t,r){return Math.max(Math.min(e,r),t)}Object.defineProperty(t,"__esModule",{value:!0}),t.calcGridColWidth=r,t.calcGridItemPosition=function(e,t,a,o,i,s){var l=e.margin,u=e.containerPadding,c=e.rowHeight,d=r(e),p={};s&&s.resizing?(p.width=Math.round(s.resizing.width),p.height=Math.round(s.resizing.height)):(p.width=n(o,d,l[0]),p.height=n(i,c,l[1]));s&&s.dragging?(p.top=Math.round(s.dragging.top),p.left=Math.round(s.dragging.left)):(p.top=Math.round((c+l[1])*a+u[1]),p.left=Math.round((d+l[0])*t+u[0]));return p},t.calcGridItemWHPx=n,t.calcWH=function(e,t,n,o,i){var s=e.margin,l=e.maxRows,u=e.cols,c=e.rowHeight,d=r(e),p=Math.round((t+s[0])/(d+s[0])),h=Math.round((n+s[1])/(c+s[1]));return p=a(p,0,u-o),h=a(h,0,l-i),{w:p,h}},t.calcXY=function(e,t,n,o,i){var s=e.margin,l=e.cols,u=e.rowHeight,c=e.maxRows,d=r(e),p=Math.round((n-s[0])/(d+s[0])),h=Math.round((t-s[1])/(u+s[1]));return p=a(p,0,l-o),h=a(h,0,c-i),{x:p,y:h}},t.clamp=a},936:(e,t,r)=>{"use strict";e.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},e.exports.Resizable=r(1794).default,e.exports.ResizableBox=r(6609).default},959:(e,t,r)=>{const n=r(6879);e.exports=(e,t)=>e.sort(((e,r)=>n(r,e,t)))},1060:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(5959)),a=c(r(2688)),o=c(r(8398)),i=r(2837),s=r(402),l=r(6732),u=c(r(7988));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function p(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const h={start:"touchstart",move:"touchmove",stop:"touchend"},f={start:"mousedown",move:"mousemove",stop:"mouseup"};let m=f;class g extends n.Component{constructor(){super(...arguments),p(this,"dragging",!1),p(this,"lastX",NaN),p(this,"lastY",NaN),p(this,"touchIdentifier",null),p(this,"mounted",!1),p(this,"handleDragStart",(e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&"number"==typeof e.button&&0!==e.button)return!1;const t=this.findDOMNode();if(!t||!t.ownerDocument||!t.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=t;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,i.matchesSelectorAndParentsTo)(e.target,this.props.handle,t)||this.props.cancel&&(0,i.matchesSelectorAndParentsTo)(e.target,this.props.cancel,t))return;"touchstart"===e.type&&e.preventDefault();const n=(0,i.getTouchIdentifier)(e);this.touchIdentifier=n;const a=(0,s.getControlPosition)(e,n,this);if(null==a)return;const{x:o,y:l}=a,c=(0,s.createCoreData)(this,o,l);(0,u.default)("DraggableCore: handleDragStart: %j",c),(0,u.default)("calling",this.props.onStart);!1!==this.props.onStart(e,c)&&!1!==this.mounted&&(this.props.enableUserSelectHack&&(0,i.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=l,(0,i.addEvent)(r,m.move,this.handleDrag),(0,i.addEvent)(r,m.stop,this.handleDragStop))})),p(this,"handleDrag",(e=>{const t=(0,s.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:r,y:n}=t;if(Array.isArray(this.props.grid)){let e=r-this.lastX,t=n-this.lastY;if([e,t]=(0,s.snapToGrid)(this.props.grid,e,t),!e&&!t)return;r=this.lastX+e,n=this.lastY+t}const a=(0,s.createCoreData)(this,r,n);(0,u.default)("DraggableCore: handleDrag: %j",a);if(!1!==this.props.onDrag(e,a)&&!1!==this.mounted)this.lastX=r,this.lastY=n;else try{this.handleDragStop(new MouseEvent("mouseup"))}catch(e){const t=document.createEvent("MouseEvents");t.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(t)}})),p(this,"handleDragStop",(e=>{if(!this.dragging)return;const t=(0,s.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:r,y:n}=t;if(Array.isArray(this.props.grid)){let e=r-this.lastX||0,t=n-this.lastY||0;[e,t]=(0,s.snapToGrid)(this.props.grid,e,t),r=this.lastX+e,n=this.lastY+t}const a=(0,s.createCoreData)(this,r,n);if(!1===this.props.onStop(e,a)||!1===this.mounted)return!1;const o=this.findDOMNode();o&&this.props.enableUserSelectHack&&(0,i.removeUserSelectStyles)(o.ownerDocument),(0,u.default)("DraggableCore: handleDragStop: %j",a),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,o&&((0,u.default)("DraggableCore: Removing handlers"),(0,i.removeEvent)(o.ownerDocument,m.move,this.handleDrag),(0,i.removeEvent)(o.ownerDocument,m.stop,this.handleDragStop))})),p(this,"onMouseDown",(e=>(m=f,this.handleDragStart(e)))),p(this,"onMouseUp",(e=>(m=f,this.handleDragStop(e)))),p(this,"onTouchStart",(e=>(m=h,this.handleDragStart(e)))),p(this,"onTouchEnd",(e=>(m=h,this.handleDragStop(e))))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,i.addEvent)(e,h.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:t}=e;(0,i.removeEvent)(t,f.move,this.handleDrag),(0,i.removeEvent)(t,h.move,this.handleDrag),(0,i.removeEvent)(t,f.stop,this.handleDragStop),(0,i.removeEvent)(t,h.stop,this.handleDragStop),(0,i.removeEvent)(e,h.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,i.removeUserSelectStyles)(t)}}findDOMNode(){var e,t;return null!==(e=this.props)&&void 0!==e&&e.nodeRef?null===(t=this.props)||void 0===t||null===(t=t.nodeRef)||void 0===t?void 0:t.current:o.default.findDOMNode(this)}render(){return n.cloneElement(n.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}t.default=g,p(g,"displayName","DraggableCore"),p(g,"propTypes",{allowAnyClick:a.default.bool,children:a.default.node.isRequired,disabled:a.default.bool,enableUserSelectHack:a.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:a.default.arrayOf(a.default.number),handle:a.default.string,cancel:a.default.string,nodeRef:a.default.object,onStart:a.default.func,onDrag:a.default.func,onStop:a.default.func,onMouseDown:a.default.func,scale:a.default.number,className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),p(g,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},1106:(e,t,r)=>{const n=Symbol("SemVer ANY");class a{static get ANY(){return n}constructor(e,t){if(t=o(t),e instanceof a){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),u("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===n?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(e){const t=this.options.loose?i[s.COMPARATORLOOSE]:i[s.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new c(r[2],this.options.loose):this.semver=n}toString(){return this.value}test(e){if(u("Comparator.test",e,this.options.loose),this.semver===n||e===n)return!0;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}return l(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof a))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new d(e.value,t).test(this.value):""===e.operator?""===e.value||new d(this.value,t).test(e.semver):(!(t=o(t)).includePrerelease||"<0.0.0-0"!==this.value&&"<0.0.0-0"!==e.value)&&(!(!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&(!(!this.operator.startsWith(">")||!e.operator.startsWith(">"))||(!(!this.operator.startsWith("<")||!e.operator.startsWith("<"))||(!(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))||(!!(l(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))||!!(l(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))))))}}e.exports=a;const o=r(8029),{safeRe:i,t:s}=r(2728),l=r(7685),u=r(5906),c=r(9534),d=r(6293)},1112:(e,t,r)=>{const n=r(8395);e.exports=(e,t,r)=>(e=new n(e,r),t=new n(t,r),e.intersects(t,r))},1158:e=>{e.exports=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}},1159:t=>{"use strict";t.exports=e},1173:(e,t,r)=>{const n=r(6293);e.exports=(e,t)=>new n(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},1178:(e,t,r)=>{const n=r(5566);e.exports=(e,t,r)=>n(e,t,r)<=0},1180:(e,t,r)=>{const n=r(9534);e.exports=(e,t)=>new n(e,t).minor},1269:e=>{"use strict";e.exports=t},1308:e=>{"use strict";e.exports=r},1465:(e,t,r)=>{const n=r(1722),a=r(5380);e.exports=(e,t,r)=>{const o=[];let i=null,s=null;const l=e.sort(((e,t)=>a(e,t,r)));for(const e of l){n(e,t,r)?(s=e,i||(i=e)):(s&&o.push([i,s]),s=null,i=null)}i&&o.push([i,null]);const u=[];for(const[e,t]of o)e===t?u.push(e):t||e!==l[0]?t?e===l[0]?u.push(`<=${t}`):u.push(`${e} - ${t}`):u.push(`>=${e}`):u.push("*");const c=u.join(" || "),d="string"==typeof t.raw?t.raw:String(t);return c.length<d.length?c:t}},1559:(e,t,r)=>{const n=r(2728),a=r(6484),o=r(9534),i=r(410),s=r(9618),l=r(5991),u=r(8968),c=r(2969),d=r(7278),p=r(8992),h=r(1180),f=r(6339),m=r(3731),g=r(5566),v=r(6264),b=r(4693),y=r(6879),w=r(6657),S=r(959),E=r(7574),O=r(5161),x=r(6175),R=r(6877),_=r(3039),C=r(1178),P=r(7685),I=r(7192),T=r(1106),D=r(6293),A=r(4120),k=r(1173),j=r(4922),L=r(8752),M=r(3931),N=r(1772),$=r(4473),V=r(4129),F=r(6184),B=r(5362),z=r(7287),U=r(3910);e.exports={parse:s,valid:l,clean:u,inc:c,diff:d,major:p,minor:h,patch:f,prerelease:m,compare:g,rcompare:v,compareLoose:b,compareBuild:y,sort:w,rsort:S,gt:E,lt:O,eq:x,neq:R,gte:_,lte:C,cmp:P,coerce:I,Comparator:T,Range:D,satisfies:A,toComparators:k,maxSatisfying:j,minSatisfying:L,minVersion:M,validRange:N,outside:$,gtr:V,ltr:F,intersects:B,simplifyRange:z,subset:U,SemVer:o,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:a.SEMVER_SPEC_VERSION,RELEASE_TYPES:a.RELEASE_TYPES,compareIdentifiers:i.compareIdentifiers,rcompareIdentifiers:i.rcompareIdentifiers}},1617:(e,t,r)=>{const n=r(7944);e.exports=(e,t)=>new n(e,t).patch},1722:(e,t,r)=>{const n=r(8395);e.exports=(e,t,r)=>{try{t=new n(t,r)}catch(e){return!1}return t.test(e)}},1772:(e,t,r)=>{const n=r(6293);e.exports=(e,t)=>{try{return new n(e,t).range||"*"}catch(e){return null}}},1794:(e,t,r)=>{"use strict";t.__esModule=!0,t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(5959)),a=r(8230),o=r(9954),i=r(6333),s=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(this,arguments)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}var f=function(e){var t,r;function i(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).handleRefs={},t.lastHandleRect=null,t.slack=null,t}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,h(t,r);var l=i.prototype;return l.componentWillUnmount=function(){this.resetData()},l.resetData=function(){this.lastHandleRect=this.slack=null},l.runConstraints=function(e,t){var r=this.props,n=r.minConstraints,a=r.maxConstraints,o=r.lockAspectRatio;if(!n&&!a&&!o)return[e,t];if(o){var i=this.props.width/this.props.height,s=e-this.props.width,l=t-this.props.height;Math.abs(s)>Math.abs(l*i)?t=e/i:e=t*i}var u=e,c=t,d=this.slack||[0,0],p=d[0],h=d[1];return e+=p,t+=h,n&&(e=Math.max(n[0],e),t=Math.max(n[1],t)),a&&(e=Math.min(a[0],e),t=Math.min(a[1],t)),this.slack=[p+(u-e),h+(c-t)],[e,t]},l.resizeHandler=function(e,t){var r=this;return function(n,a){var o=a.node,i=a.deltaX,s=a.deltaY;"onResizeStart"===e&&r.resetData();var l=("both"===r.props.axis||"x"===r.props.axis)&&"n"!==t&&"s"!==t,u=("both"===r.props.axis||"y"===r.props.axis)&&"e"!==t&&"w"!==t;if(l||u){var c=t[0],d=t[t.length-1],p=o.getBoundingClientRect();if(null!=r.lastHandleRect){if("w"===d)i+=p.left-r.lastHandleRect.left;if("n"===c)s+=p.top-r.lastHandleRect.top}r.lastHandleRect=p,"w"===d&&(i=-i),"n"===c&&(s=-s);var h=r.props.width+(l?i/r.props.transformScale:0),f=r.props.height+(u?s/r.props.transformScale:0),m=r.runConstraints(h,f);h=m[0],f=m[1];var g=h!==r.props.width||f!==r.props.height,v="function"==typeof r.props[e]?r.props[e]:null;v&&!("onResize"===e&&!g)&&(null==n.persist||n.persist(),v(n,{node:o,size:{width:h,height:f},handle:t})),"onResizeStop"===e&&r.resetData()}}},l.renderResizeHandle=function(e,t){var r=this.props.handle;if(!r)return n.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+e,ref:t});if("function"==typeof r)return r(e,t);var a=d({ref:t},"string"==typeof r.type?{}:{handleAxis:e});return n.cloneElement(r,a)},l.render=function(){var e=this,t=this.props,r=t.children,i=t.className,l=t.draggableOpts,c=(t.width,t.height,t.handle,t.handleSize,t.lockAspectRatio,t.axis,t.minConstraints,t.maxConstraints,t.onResize,t.onResizeStop,t.onResizeStart,t.resizeHandles),p=(t.transformScale,function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(t,s));return(0,o.cloneElement)(r,d(d({},p),{},{className:(i?i+" ":"")+"react-resizable",children:[].concat(r.props.children,c.map((function(t){var r,o=null!=(r=e.handleRefs[t])?r:e.handleRefs[t]=n.createRef();return n.createElement(a.DraggableCore,u({},l,{nodeRef:o,key:"resizableHandle-"+t,onStop:e.resizeHandler("onResizeStop",t),onStart:e.resizeHandler("onResizeStart",t),onDrag:e.resizeHandler("onResize",t)}),e.renderResizeHandle(t,o))})))}))},i}(n.Component);t.default=f,f.propTypes=i.resizableProps,f.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1}},2007:e=>{"use strict";e.exports=n},2077:(e,t,r)=>{const n=r(5380);e.exports=(e,t,r)=>n(e,t,r)>=0},2548:(e,t,r)=>{e.exports=r(9482).default,e.exports.utils=r(414),e.exports.Responsive=r(4636).default,e.exports.Responsive.utils=r(544),e.exports.WidthProvider=r(6805).default},2688:(e,t,r)=>{e.exports=r(362)()},2728:(e,t,r)=>{const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:a,MAX_LENGTH:o}=r(6484),i=r(5906),s=(t=e.exports={}).re=[],l=t.safeRe=[],u=t.src=[],c=t.t={};let d=0;const p="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",o],[p,a]],f=(e,t,r)=>{const n=(e=>{for(const[t,r]of h)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),a=d++;i(e,a,t),c[e]=a,u[a]=t,s[a]=new RegExp(t,r?"g":void 0),l[a]=new RegExp(n,r?"g":void 0)};f("NUMERICIDENTIFIER","0|[1-9]\\d*"),f("NUMERICIDENTIFIERLOOSE","\\d+"),f("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),f("MAINVERSION",`(${u[c.NUMERICIDENTIFIER]})\\.(${u[c.NUMERICIDENTIFIER]})\\.(${u[c.NUMERICIDENTIFIER]})`),f("MAINVERSIONLOOSE",`(${u[c.NUMERICIDENTIFIERLOOSE]})\\.(${u[c.NUMERICIDENTIFIERLOOSE]})\\.(${u[c.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASEIDENTIFIER",`(?:${u[c.NUMERICIDENTIFIER]}|${u[c.NONNUMERICIDENTIFIER]})`),f("PRERELEASEIDENTIFIERLOOSE",`(?:${u[c.NUMERICIDENTIFIERLOOSE]}|${u[c.NONNUMERICIDENTIFIER]})`),f("PRERELEASE",`(?:-(${u[c.PRERELEASEIDENTIFIER]}(?:\\.${u[c.PRERELEASEIDENTIFIER]})*))`),f("PRERELEASELOOSE",`(?:-?(${u[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[c.PRERELEASEIDENTIFIERLOOSE]})*))`),f("BUILDIDENTIFIER",`${p}+`),f("BUILD",`(?:\\+(${u[c.BUILDIDENTIFIER]}(?:\\.${u[c.BUILDIDENTIFIER]})*))`),f("FULLPLAIN",`v?${u[c.MAINVERSION]}${u[c.PRERELEASE]}?${u[c.BUILD]}?`),f("FULL",`^${u[c.FULLPLAIN]}$`),f("LOOSEPLAIN",`[v=\\s]*${u[c.MAINVERSIONLOOSE]}${u[c.PRERELEASELOOSE]}?${u[c.BUILD]}?`),f("LOOSE",`^${u[c.LOOSEPLAIN]}$`),f("GTLT","((?:<|>)?=?)"),f("XRANGEIDENTIFIERLOOSE",`${u[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),f("XRANGEIDENTIFIER",`${u[c.NUMERICIDENTIFIER]}|x|X|\\*`),f("XRANGEPLAIN",`[v=\\s]*(${u[c.XRANGEIDENTIFIER]})(?:\\.(${u[c.XRANGEIDENTIFIER]})(?:\\.(${u[c.XRANGEIDENTIFIER]})(?:${u[c.PRERELEASE]})?${u[c.BUILD]}?)?)?`),f("XRANGEPLAINLOOSE",`[v=\\s]*(${u[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[c.XRANGEIDENTIFIERLOOSE]})(?:${u[c.PRERELEASELOOSE]})?${u[c.BUILD]}?)?)?`),f("XRANGE",`^${u[c.GTLT]}\\s*${u[c.XRANGEPLAIN]}$`),f("XRANGELOOSE",`^${u[c.GTLT]}\\s*${u[c.XRANGEPLAINLOOSE]}$`),f("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),f("COERCE",`${u[c.COERCEPLAIN]}(?:$|[^\\d])`),f("COERCEFULL",u[c.COERCEPLAIN]+`(?:${u[c.PRERELEASE]})?`+`(?:${u[c.BUILD]})?(?:$|[^\\d])`),f("COERCERTL",u[c.COERCE],!0),f("COERCERTLFULL",u[c.COERCEFULL],!0),f("LONETILDE","(?:~>?)"),f("TILDETRIM",`(\\s*)${u[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",f("TILDE",`^${u[c.LONETILDE]}${u[c.XRANGEPLAIN]}$`),f("TILDELOOSE",`^${u[c.LONETILDE]}${u[c.XRANGEPLAINLOOSE]}$`),f("LONECARET","(?:\\^)"),f("CARETTRIM",`(\\s*)${u[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",f("CARET",`^${u[c.LONECARET]}${u[c.XRANGEPLAIN]}$`),f("CARETLOOSE",`^${u[c.LONECARET]}${u[c.XRANGEPLAINLOOSE]}$`),f("COMPARATORLOOSE",`^${u[c.GTLT]}\\s*(${u[c.LOOSEPLAIN]})$|^$`),f("COMPARATOR",`^${u[c.GTLT]}\\s*(${u[c.FULLPLAIN]})$|^$`),f("COMPARATORTRIM",`(\\s*)${u[c.GTLT]}\\s*(${u[c.LOOSEPLAIN]}|${u[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",f("HYPHENRANGE",`^\\s*(${u[c.XRANGEPLAIN]})\\s+-\\s+(${u[c.XRANGEPLAIN]})\\s*$`),f("HYPHENRANGELOOSE",`^\\s*(${u[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[c.XRANGEPLAINLOOSE]})\\s*$`),f("STAR","(<|>)?=?\\s*\\*"),f("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),f("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},2801:(e,t,r)=>{const n=r(7944);e.exports=(e,t,r)=>{const a=new n(e,r),o=new n(t,r);return a.compare(o)||a.compareBuild(o)}},2837:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addClassName=u,t.addEvent=function(e,t,r,n){if(!e)return;const a={capture:!0,...n};e.addEventListener?e.addEventListener(t,r,a):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r},t.addUserSelectStyles=function(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t));e.body&&u(e.body,"react-draggable-transparent-selection")},t.createCSSTransform=function(e,t){const r=l(e,t,"px");return{[(0,a.browserPrefixToKey)("transform",a.default)]:r}},t.createSVGTransform=function(e,t){return l(e,t,"")},t.getTouch=function(e,t){return e.targetTouches&&(0,n.findInArray)(e.targetTouches,(e=>t===e.identifier))||e.changedTouches&&(0,n.findInArray)(e.changedTouches,(e=>t===e.identifier))},t.getTouchIdentifier=function(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier},t.getTranslation=l,t.innerHeight=function(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,n.int)(r.paddingTop),t-=(0,n.int)(r.paddingBottom),t},t.innerWidth=function(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,n.int)(r.paddingLeft),t-=(0,n.int)(r.paddingRight),t},t.matchesSelector=s,t.matchesSelectorAndParentsTo=function(e,t,r){let n=e;do{if(s(n,t))return!0;if(n===r)return!1;n=n.parentNode}while(n);return!1},t.offsetXYFromParent=function(e,t,r){const n=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),a=(e.clientX+t.scrollLeft-n.left)/r,o=(e.clientY+t.scrollTop-n.top)/r;return{x:a,y:o}},t.outerHeight=function(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,n.int)(r.borderTopWidth),t+=(0,n.int)(r.borderBottomWidth),t},t.outerWidth=function(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,n.int)(r.borderLeftWidth),t+=(0,n.int)(r.borderRightWidth),t},t.removeClassName=c,t.removeEvent=function(e,t,r,n){if(!e)return;const a={capture:!0,...n};e.removeEventListener?e.removeEventListener(t,r,a):e.detachEvent?e.detachEvent("on"+t,r):e["on"+t]=null},t.removeUserSelectStyles=function(e){if(!e)return;try{if(e.body&&c(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(e){}};var n=r(6732),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(7350));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}let i="";function s(e,t){return i||(i=(0,n.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return(0,n.isFunction)(e[t])}))),!!(0,n.isFunction)(e[i])&&e[i](t)}function l(e,t,r){let{x:n,y:a}=e,o="translate(".concat(n).concat(r,",").concat(a).concat(r,")");if(t){const e="".concat("string"==typeof t.x?t.x:t.x+r),n="".concat("string"==typeof t.y?t.y:t.y+r);o="translate(".concat(e,", ").concat(n,")")+o}return o}function u(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function c(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}},2862:(e,t,r)=>{const n=r(5380);e.exports=(e,t,r)=>n(t,e,r)},2966:(e,t,r)=>{const n=r(7944);e.exports=(e,t)=>new n(e,t).major},2969:(e,t,r)=>{const n=r(9534);e.exports=(e,t,r,a,o)=>{"string"==typeof r&&(o=a,a=r,r=void 0);try{return new n(e instanceof n?e.version:e,r).inc(t,a,o).version}catch(e){return null}}},3039:(e,t,r)=>{const n=r(5566);e.exports=(e,t,r)=>n(e,t,r)>=0},3241:e=>{"use strict";e.exports=a},3489:(e,t,r)=>{const n=r(7944),a=r(8395),o=r(144);e.exports=(e,t)=>{e=new a(e,t);let r=new n("0.0.0");if(e.test(r))return r;if(r=new n("0.0.0-0"),e.test(r))return r;r=null;for(let t=0;t<e.set.length;++t){const a=e.set[t];let i=null;a.forEach((e=>{const t=new n(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":i&&!o(t,i)||(i=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!i||r&&!o(r,i)||(r=i)}return r&&e.test(r)?r:null}},3731:(e,t,r)=>{const n=r(9618);e.exports=(e,t)=>{const r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}},3811:(e,t,r)=>{const n=r(6909),a=r(7659),o=r(144),i=r(2077),s=r(599),l=r(7092);e.exports=(e,t,r,u)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return n(e,r,u);case"!=":return a(e,r,u);case">":return o(e,r,u);case">=":return i(e,r,u);case"<":return s(e,r,u);case"<=":return l(e,r,u);default:throw new TypeError(`Invalid operator: ${t}`)}}},3910:(e,t,r)=>{const n=r(6293),a=r(1106),{ANY:o}=a,i=r(4120),s=r(5566),l=[new a(">=0.0.0-0")],u=[new a(">=0.0.0")],c=(e,t,r)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===o){if(1===t.length&&t[0].semver===o)return!0;e=r.includePrerelease?l:u}if(1===t.length&&t[0].semver===o){if(r.includePrerelease)return!0;t=u}const n=new Set;let a,c,h,f,m,g,v;for(const t of e)">"===t.operator||">="===t.operator?a=d(a,t,r):"<"===t.operator||"<="===t.operator?c=p(c,t,r):n.add(t.semver);if(n.size>1)return null;if(a&&c){if(h=s(a.semver,c.semver,r),h>0)return null;if(0===h&&(">="!==a.operator||"<="!==c.operator))return null}for(const e of n){if(a&&!i(e,String(a),r))return null;if(c&&!i(e,String(c),r))return null;for(const n of t)if(!i(e,String(n),r))return!1;return!0}let b=!(!c||r.includePrerelease||!c.semver.prerelease.length)&&c.semver,y=!(!a||r.includePrerelease||!a.semver.prerelease.length)&&a.semver;b&&1===b.prerelease.length&&"<"===c.operator&&0===b.prerelease[0]&&(b=!1);for(const e of t){if(v=v||">"===e.operator||">="===e.operator,g=g||"<"===e.operator||"<="===e.operator,a)if(y&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch&&(y=!1),">"===e.operator||">="===e.operator){if(f=d(a,e,r),f===e&&f!==a)return!1}else if(">="===a.operator&&!i(a.semver,String(e),r))return!1;if(c)if(b&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===b.major&&e.semver.minor===b.minor&&e.semver.patch===b.patch&&(b=!1),"<"===e.operator||"<="===e.operator){if(m=p(c,e,r),m===e&&m!==c)return!1}else if("<="===c.operator&&!i(c.semver,String(e),r))return!1;if(!e.operator&&(c||a)&&0!==h)return!1}return!(a&&g&&!c&&0!==h)&&(!(c&&v&&!a&&0!==h)&&(!y&&!b))},d=(e,t,r)=>{if(!e)return t;const n=s(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},p=(e,t,r)=>{if(!e)return t;const n=s(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,r={})=>{if(e===t)return!0;e=new n(e,r),t=new n(t,r);let a=!1;e:for(const n of e.set){for(const e of t.set){const t=c(n,e,r);if(a=a||null!==t,t)continue e}if(a)return!1}return!0}},3931:(e,t,r)=>{const n=r(9534),a=r(6293),o=r(7574);e.exports=(e,t)=>{e=new a(e,t);let r=new n("0.0.0");if(e.test(r))return r;if(r=new n("0.0.0-0"),e.test(r))return r;r=null;for(let t=0;t<e.set.length;++t){const a=e.set[t];let i=null;a.forEach((e=>{const t=new n(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":i&&!o(t,i)||(i=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!i||r&&!o(r,i)||(r=i)}return r&&e.test(r)?r:null}},4031:e=>{const t=/^[0-9]+$/,r=(e,r)=>{const n=t.test(e),a=t.test(r);return n&&a&&(e=+e,r=+r),e===r?0:n&&!a?-1:a&&!n?1:e<r?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},4120:(e,t,r)=>{const n=r(6293);e.exports=(e,t,r)=>{try{t=new n(t,r)}catch(e){return!1}return t.test(e)}},4129:(e,t,r)=>{const n=r(4473);e.exports=(e,t,r)=>n(e,t,">",r)},4266:(e,t,r)=>{const n=r(5463);e.exports=(e,t,r)=>n(e,t,"<",r)},4473:(e,t,r)=>{const n=r(9534),a=r(1106),{ANY:o}=a,i=r(6293),s=r(4120),l=r(7574),u=r(5161),c=r(1178),d=r(3039);e.exports=(e,t,r,p)=>{let h,f,m,g,v;switch(e=new n(e,p),t=new i(t,p),r){case">":h=l,f=c,m=u,g=">",v=">=";break;case"<":h=u,f=d,m=l,g="<",v="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(e,t,p))return!1;for(let r=0;r<t.set.length;++r){const n=t.set[r];let i=null,s=null;if(n.forEach((e=>{e.semver===o&&(e=new a(">=0.0.0")),i=i||e,s=s||e,h(e.semver,i.semver,p)?i=e:m(e.semver,s.semver,p)&&(s=e)})),i.operator===g||i.operator===v)return!1;if((!s.operator||s.operator===g)&&f(e,s.semver))return!1;if(s.operator===v&&m(e,s.semver))return!1}return!0}},4636:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}a.default=e,r&&r.set(e,a);return a}(r(5959)),o=d(r(2688)),i=d(r(7842)),s=r(414),l=r(544),u=d(r(9482)),c=["breakpoint","breakpoints","cols","layouts","margin","containerPadding","onBreakpointChange","onLayoutChange","onWidthChange"];function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function h(){return h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h.apply(this,arguments)}function f(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=S(e);if(t){var o=S(this).constructor;r=Reflect.construct(a,arguments,o)}else r=a.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}(this,r)}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O=function(e){return Object.prototype.toString.call(e)};function x(e,t){return null==e?null:Array.isArray(e)?e:e[t]}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(d,e);var t,r,n,o=y(d);function d(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return E(w(e=o.call.apply(o,[this].concat(r))),"state",e.generateInitialState()),E(w(e),"onLayoutChange",(function(t){e.props.onLayoutChange(t,g(g({},e.props.layouts),{},E({},e.state.breakpoint,t)))})),e}return t=d,n=[{key:"getDerivedStateFromProps",value:function(e,t){if(!(0,i.default)(e.layouts,t.layouts)){var r=t.breakpoint,n=t.cols;return{layout:(0,l.findOrGenerateResponsiveLayout)(e.layouts,e.breakpoints,r,r,n,e.compactType),layouts:e.layouts}}return null}}],(r=[{key:"generateInitialState",value:function(){var e=this.props,t=e.width,r=e.breakpoints,n=e.layouts,a=e.cols,o=(0,l.getBreakpointFromWidth)(r,t),i=(0,l.getColsFromBreakpoint)(o,a),s=!1===this.props.verticalCompact?null:this.props.compactType;return{layout:(0,l.findOrGenerateResponsiveLayout)(n,r,o,o,i,s),breakpoint:o,cols:i}}},{key:"componentDidUpdate",value:function(e){this.props.width==e.width&&this.props.breakpoint===e.breakpoint&&(0,i.default)(this.props.breakpoints,e.breakpoints)&&(0,i.default)(this.props.cols,e.cols)||this.onWidthChange(e)}},{key:"onWidthChange",value:function(e){var t=this.props,r=t.breakpoints,n=t.cols,a=t.layouts,o=t.compactType,i=this.props.breakpoint||(0,l.getBreakpointFromWidth)(this.props.breakpoints,this.props.width),u=this.state.breakpoint,c=(0,l.getColsFromBreakpoint)(i,n),d=g({},a);if(u!==i||e.breakpoints!==r||e.cols!==n){u in d||(d[u]=(0,s.cloneLayout)(this.state.layout));var p=(0,l.findOrGenerateResponsiveLayout)(d,r,i,u,c,o);p=(0,s.synchronizeLayoutWithChildren)(p,this.props.children,c,o,this.props.allowOverlap),d[i]=p,this.props.onLayoutChange(p,d),this.props.onBreakpointChange(i,c),this.setState({breakpoint:i,layout:p,cols:c})}var h=x(this.props.margin,i),f=x(this.props.containerPadding,i);this.props.onWidthChange(this.props.width,h,c,f)}},{key:"render",value:function(){var e=this.props,t=(e.breakpoint,e.breakpoints,e.cols,e.layouts,e.margin),r=e.containerPadding,n=(e.onBreakpointChange,e.onLayoutChange,e.onWidthChange,f(e,c));return a.createElement(u.default,h({},n,{margin:x(t,this.state.breakpoint),containerPadding:x(r,this.state.breakpoint),onLayoutChange:this.onLayoutChange,layout:this.state.layout,cols:this.state.cols}))}}])&&v(t.prototype,r),n&&v(t,n),Object.defineProperty(t,"prototype",{writable:!1}),d}(a.Component);t.default=R,E(R,"propTypes",{breakpoint:o.default.string,breakpoints:o.default.object,allowOverlap:o.default.bool,cols:o.default.object,margin:o.default.oneOfType([o.default.array,o.default.object]),containerPadding:o.default.oneOfType([o.default.array,o.default.object]),layouts:function(e,t){if("[object Object]"!==O(e[t]))throw new Error("Layout property must be an object. Received: "+O(e[t]));Object.keys(e[t]).forEach((function(t){if(!(t in e.breakpoints))throw new Error("Each key in layouts must align with a key in breakpoints.");(0,s.validateLayout)(e.layouts[t],"layouts."+t)}))},width:o.default.number.isRequired,onBreakpointChange:o.default.func,onLayoutChange:o.default.func,onWidthChange:o.default.func}),E(R,"defaultProps",{breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},containerPadding:{lg:null,md:null,sm:null,xs:null,xxs:null},layouts:{},margin:[10,10],allowOverlap:!1,onBreakpointChange:s.noop,onLayoutChange:s.noop,onWidthChange:s.noop})},4693:(e,t,r)=>{const n=r(5566);e.exports=(e,t)=>n(e,t,!0)},4922:(e,t,r)=>{const n=r(9534),a=r(6293);e.exports=(e,t,r)=>{let o=null,i=null,s=null;try{s=new a(t,r)}catch(e){return null}return e.forEach((e=>{s.test(e)&&(o&&-1!==i.compare(e)||(o=e,i=new n(o,r)))})),o}},4940:e=>{e.exports=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}},5161:(e,t,r)=>{const n=r(5566);e.exports=(e,t,r)=>n(e,t,r)<0},5334:(e,t,r)=>{const n=r(7944),a=r(5860),{safeRe:o,t:i}=r(6850);e.exports=(e,t)=>{if(e instanceof n)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){const n=t.includePrerelease?o[i.COERCERTLFULL]:o[i.COERCERTL];let a;for(;(a=n.exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&a.index+a[0].length===r.index+r[0].length||(r=a),n.lastIndex=a.index+a[1].length+a[2].length;n.lastIndex=-1}else r=e.match(t.includePrerelease?o[i.COERCEFULL]:o[i.COERCE]);if(null===r)return null;const s=r[2],l=r[3]||"0",u=r[4]||"0",c=t.includePrerelease&&r[5]?`-${r[5]}`:"",d=t.includePrerelease&&r[6]?`+${r[6]}`:"";return a(`${s}.${l}.${u}${c}${d}`,t)}},5362:(e,t,r)=>{const n=r(6293);e.exports=(e,t,r)=>(e=new n(e,r),t=new n(t,r),e.intersects(t,r))},5380:(e,t,r)=>{const n=r(7944);e.exports=(e,t,r)=>new n(e,r).compare(new n(t,r))},5463:(e,t,r)=>{const n=r(7944),a=r(9524),{ANY:o}=a,i=r(8395),s=r(1722),l=r(144),u=r(599),c=r(7092),d=r(2077);e.exports=(e,t,r,p)=>{let h,f,m,g,v;switch(e=new n(e,p),t=new i(t,p),r){case">":h=l,f=c,m=u,g=">",v=">=";break;case"<":h=u,f=d,m=l,g="<",v="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(e,t,p))return!1;for(let r=0;r<t.set.length;++r){const n=t.set[r];let i=null,s=null;if(n.forEach((e=>{e.semver===o&&(e=new a(">=0.0.0")),i=i||e,s=s||e,h(e.semver,i.semver,p)?i=e:m(e.semver,s.semver,p)&&(s=e)})),i.operator===g||i.operator===v)return!1;if((!s.operator||s.operator===g)&&f(e,s.semver))return!1;if(s.operator===v&&m(e,s.semver))return!1}return!0}},5566:(e,t,r)=>{const n=r(9534);e.exports=(e,t,r)=>new n(e,r).compare(new n(t,r))},5860:(e,t,r)=>{const n=r(7944);e.exports=(e,t,r=!1)=>{if(e instanceof n)return e;try{return new n(e,t)}catch(e){if(!r)return null;throw e}}},5906:e=>{const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},5955:(e,t,r)=>{const n=r(7944);e.exports=(e,t,r,a,o)=>{"string"==typeof r&&(o=a,a=r,r=void 0);try{return new n(e instanceof n?e.version:e,r).inc(t,a,o).version}catch(e){return null}}},5959:e=>{"use strict";e.exports=o},5986:(e,t,r)=>{const n=r(7944);e.exports=(e,t)=>new n(e,t).minor},5991:(e,t,r)=>{const n=r(9618);e.exports=(e,t)=>{const r=n(e,t);return r?r.version:null}},6033:(e,t,r)=>{const n=r(2801);e.exports=(e,t)=>e.sort(((e,r)=>n(r,e,t)))},6089:e=>{"use strict";e.exports=i},6175:(e,t,r)=>{const n=r(5566);e.exports=(e,t,r)=>0===n(e,t,r)},6184:(e,t,r)=>{const n=r(4473);e.exports=(e,t,r)=>n(e,t,"<",r)},6264:(e,t,r)=>{const n=r(5566);e.exports=(e,t,r)=>n(t,e,r)},6293:(e,t,r)=>{const n=/\s+/g;class a{constructor(e,t){if(t=i(t),e instanceof a)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new a(e.raw,t);if(e instanceof s)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(n," "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!v(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&b(e[0])){this.set=[e];break}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");const t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&m)|(this.options.loose&&g))+":"+e,r=o.get(t);if(r)return r;const n=this.options.loose,a=n?c[d.HYPHENRANGELOOSE]:c[d.HYPHENRANGE];e=e.replace(a,T(this.options.includePrerelease)),l("hyphen replace",e),e=e.replace(c[d.COMPARATORTRIM],p),l("comparator trim",e),e=e.replace(c[d.TILDETRIM],h),l("tilde trim",e),e=e.replace(c[d.CARETTRIM],f),l("caret trim",e);let i=e.split(" ").map((e=>w(e,this.options))).join(" ").split(/\s+/).map((e=>I(e,this.options)));n&&(i=i.filter((e=>(l("loose invalid filter",e,this.options),!!e.match(c[d.COMPARATORLOOSE]))))),l("range list",i);const u=new Map,b=i.map((e=>new s(e,this.options)));for(const e of b){if(v(e))return[e];u.set(e.value,e)}u.size>1&&u.has("")&&u.delete("");const y=[...u.values()];return o.set(t,y),y}intersects(e,t){if(!(e instanceof a))throw new TypeError("a Range is required");return this.set.some((r=>y(r,t)&&e.set.some((e=>y(e,t)&&r.every((r=>e.every((e=>r.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new u(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(D(this.set[t],e,this.options))return!0;return!1}}e.exports=a;const o=new(r(4940)),i=r(8029),s=r(1106),l=r(5906),u=r(9534),{safeRe:c,t:d,comparatorTrimReplace:p,tildeTrimReplace:h,caretTrimReplace:f}=r(2728),{FLAG_INCLUDE_PRERELEASE:m,FLAG_LOOSE:g}=r(6484),v=e=>"<0.0.0-0"===e.value,b=e=>""===e.value,y=(e,t)=>{let r=!0;const n=e.slice();let a=n.pop();for(;r&&n.length;)r=n.every((e=>a.intersects(e,t))),a=n.pop();return r},w=(e,t)=>(l("comp",e,t),e=x(e,t),l("caret",e),e=E(e,t),l("tildes",e),e=_(e,t),l("xrange",e),e=P(e,t),l("stars",e),e),S=e=>!e||"x"===e.toLowerCase()||"*"===e,E=(e,t)=>e.trim().split(/\s+/).map((e=>O(e,t))).join(" "),O=(e,t)=>{const r=t.loose?c[d.TILDELOOSE]:c[d.TILDE];return e.replace(r,((t,r,n,a,o)=>{let i;return l("tilde",e,t,r,n,a,o),S(r)?i="":S(n)?i=`>=${r}.0.0 <${+r+1}.0.0-0`:S(a)?i=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:o?(l("replaceTilde pr",o),i=`>=${r}.${n}.${a}-${o} <${r}.${+n+1}.0-0`):i=`>=${r}.${n}.${a} <${r}.${+n+1}.0-0`,l("tilde return",i),i}))},x=(e,t)=>e.trim().split(/\s+/).map((e=>R(e,t))).join(" "),R=(e,t)=>{l("caret",e,t);const r=t.loose?c[d.CARETLOOSE]:c[d.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,((t,r,a,o,i)=>{let s;return l("caret",e,t,r,a,o,i),S(r)?s="":S(a)?s=`>=${r}.0.0${n} <${+r+1}.0.0-0`:S(o)?s="0"===r?`>=${r}.${a}.0${n} <${r}.${+a+1}.0-0`:`>=${r}.${a}.0${n} <${+r+1}.0.0-0`:i?(l("replaceCaret pr",i),s="0"===r?"0"===a?`>=${r}.${a}.${o}-${i} <${r}.${a}.${+o+1}-0`:`>=${r}.${a}.${o}-${i} <${r}.${+a+1}.0-0`:`>=${r}.${a}.${o}-${i} <${+r+1}.0.0-0`):(l("no pr"),s="0"===r?"0"===a?`>=${r}.${a}.${o}${n} <${r}.${a}.${+o+1}-0`:`>=${r}.${a}.${o}${n} <${r}.${+a+1}.0-0`:`>=${r}.${a}.${o} <${+r+1}.0.0-0`),l("caret return",s),s}))},_=(e,t)=>(l("replaceXRanges",e,t),e.split(/\s+/).map((e=>C(e,t))).join(" ")),C=(e,t)=>{e=e.trim();const r=t.loose?c[d.XRANGELOOSE]:c[d.XRANGE];return e.replace(r,((r,n,a,o,i,s)=>{l("xRange",e,r,n,a,o,i,s);const u=S(a),c=u||S(o),d=c||S(i),p=d;return"="===n&&p&&(n=""),s=t.includePrerelease?"-0":"",u?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&p?(c&&(o=0),i=0,">"===n?(n=">=",c?(a=+a+1,o=0,i=0):(o=+o+1,i=0)):"<="===n&&(n="<",c?a=+a+1:o=+o+1),"<"===n&&(s="-0"),r=`${n+a}.${o}.${i}${s}`):c?r=`>=${a}.0.0${s} <${+a+1}.0.0-0`:d&&(r=`>=${a}.${o}.0${s} <${a}.${+o+1}.0-0`),l("xRange return",r),r}))},P=(e,t)=>(l("replaceStars",e,t),e.trim().replace(c[d.STAR],"")),I=(e,t)=>(l("replaceGTE0",e,t),e.trim().replace(c[t.includePrerelease?d.GTE0PRE:d.GTE0],"")),T=e=>(t,r,n,a,o,i,s,l,u,c,d,p)=>`${r=S(n)?"":S(a)?`>=${n}.0.0${e?"-0":""}`:S(o)?`>=${n}.${a}.0${e?"-0":""}`:i?`>=${r}`:`>=${r}${e?"-0":""}`} ${l=S(u)?"":S(c)?`<${+u+1}.0.0-0`:S(d)?`<${u}.${+c+1}.0-0`:p?`<=${u}.${c}.${d}-${p}`:e?`<${u}.${c}.${+d+1}-0`:`<=${l}`}`.trim(),D=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(l(e[r].semver),e[r].semver!==s.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}},6333:(e,t,r)=>{"use strict";t.__esModule=!0,t.resizableProps=void 0;var n,a=(n=r(2688))&&n.__esModule?n:{default:n};r(8230);var o={axis:a.default.oneOf(["both","x","y","none"]),className:a.default.string,children:a.default.element.isRequired,draggableOpts:a.default.shape({allowAnyClick:a.default.bool,cancel:a.default.string,children:a.default.node,disabled:a.default.bool,enableUserSelectHack:a.default.bool,offsetParent:a.default.node,grid:a.default.arrayOf(a.default.number),handle:a.default.string,nodeRef:a.default.object,onStart:a.default.func,onDrag:a.default.func,onStop:a.default.func,onMouseDown:a.default.func,scale:a.default.number}),height:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o=t[0];return"both"===o.axis||"y"===o.axis?(n=a.default.number).isRequired.apply(n,t):a.default.number.apply(a.default,t)},handle:a.default.oneOfType([a.default.node,a.default.func]),handleSize:a.default.arrayOf(a.default.number),lockAspectRatio:a.default.bool,maxConstraints:a.default.arrayOf(a.default.number),minConstraints:a.default.arrayOf(a.default.number),onResizeStop:a.default.func,onResizeStart:a.default.func,onResize:a.default.func,resizeHandles:a.default.arrayOf(a.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:a.default.number,width:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o=t[0];return"both"===o.axis||"x"===o.axis?(n=a.default.number).isRequired.apply(n,t):a.default.number.apply(a.default,t)}};t.resizableProps=o},6339:(e,t,r)=>{const n=r(9534);e.exports=(e,t)=>new n(e,t).patch},6441:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},6484:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},6609:(e,t,r)=>{"use strict";t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(5959)),a=l(r(2688)),o=l(r(1794)),i=r(6333),s=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}var m=function(e){var t,r;function a(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).state={width:t.props.width,height:t.props.height,propsWidth:t.props.width,propsHeight:t.props.height},t.onResize=function(e,r){var n=r.size;t.props.onResize?(null==e.persist||e.persist(),t.setState(n,(function(){return t.props.onResize&&t.props.onResize(e,r)}))):t.setState(n)},t}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,f(t,r),a.getDerivedStateFromProps=function(e,t){return t.propsWidth!==e.width||t.propsHeight!==e.height?{width:e.width,height:e.height,propsWidth:e.width,propsHeight:e.height}:null},a.prototype.render=function(){var e=this.props,t=e.handle,r=e.handleSize,a=(e.onResize,e.onResizeStart),i=e.onResizeStop,l=e.draggableOpts,u=e.minConstraints,d=e.maxConstraints,h=e.lockAspectRatio,f=e.axis,m=(e.width,e.height,e.resizeHandles),g=e.style,v=e.transformScale,b=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,s);return n.createElement(o.default,{axis:f,draggableOpts:l,handle:t,handleSize:r,height:this.state.height,lockAspectRatio:h,maxConstraints:d,minConstraints:u,onResizeStart:a,onResize:this.onResize,onResizeStop:i,resizeHandles:m,transformScale:v,width:this.state.width},n.createElement("div",c({},b,{style:p(p({},g),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},a}(n.Component);t.default=m,m.propTypes=p(p({},i.resizableProps),{},{children:a.default.element})},6657:(e,t,r)=>{const n=r(6879);e.exports=(e,t)=>e.sort(((e,r)=>n(e,r,t)))},6732:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dontSetMe=function(e,t,r){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(r," - do not set this, set it on the child."))},t.findInArray=function(e,t){for(let r=0,n=e.length;r<n;r++)if(t.apply(t,[e[r],r,e]))return e[r]},t.int=function(e){return parseInt(e,10)},t.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},t.isNum=function(e){return"number"==typeof e&&!isNaN(e)}},6805:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}t.default=function(e){var t;return t=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(u,t);var r,o,l=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(r);if(o){var a=f(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}(this,e)});function u(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return m(h(e=l.call.apply(l,[this].concat(r))),"state",{width:1280}),m(h(e),"elementRef",a.createRef()),m(h(e),"mounted",!1),m(h(e),"onWindowResize",(function(){if(e.mounted){var t=e.elementRef.current;t instanceof HTMLElement&&t.offsetWidth&&e.setState({width:t.offsetWidth})}})),e}return function(e,t,r){t&&d(e.prototype,t);r&&d(e,r);Object.defineProperty(e,"prototype",{writable:!1})}(u,[{key:"componentDidMount",value:function(){this.mounted=!0,window.addEventListener("resize",this.onWindowResize),this.onWindowResize()}},{key:"componentWillUnmount",value:function(){this.mounted=!1,window.removeEventListener("resize",this.onWindowResize)}},{key:"render",value:function(){var t=this.props,r=t.measureBeforeMount,n=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(t,s);return r&&!this.mounted?a.createElement("div",{className:(0,i.default)(this.props.className,g),style:this.props.style,ref:this.elementRef}):a.createElement(e,c({innerRef:this.elementRef},n,this.state))}}]),u}(a.Component),m(t,"defaultProps",{measureBeforeMount:!1}),m(t,"propTypes",{measureBeforeMount:o.default.bool}),t};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}a.default=e,r&&r.set(e,a);return a}(r(5959)),o=l(r(2688)),i=l(r(7256)),s=["measureBeforeMount"];function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g="react-grid-layout"},6850:(e,t,r)=>{const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:a,MAX_LENGTH:o}=r(9630),i=r(9796),s=(t=e.exports={}).re=[],l=t.safeRe=[],u=t.src=[],c=t.safeSrc=[],d=t.t={};let p=0;const h="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",o],[h,a]],m=(e,t,r)=>{const n=(e=>{for(const[t,r]of f)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),a=p++;i(e,a,t),d[e]=a,u[a]=t,c[a]=n,s[a]=new RegExp(t,r?"g":void 0),l[a]=new RegExp(n,r?"g":void 0)};m("NUMERICIDENTIFIER","0|[1-9]\\d*"),m("NUMERICIDENTIFIERLOOSE","\\d+"),m("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),m("MAINVERSION",`(${u[d.NUMERICIDENTIFIER]})\\.(${u[d.NUMERICIDENTIFIER]})\\.(${u[d.NUMERICIDENTIFIER]})`),m("MAINVERSIONLOOSE",`(${u[d.NUMERICIDENTIFIERLOOSE]})\\.(${u[d.NUMERICIDENTIFIERLOOSE]})\\.(${u[d.NUMERICIDENTIFIERLOOSE]})`),m("PRERELEASEIDENTIFIER",`(?:${u[d.NUMERICIDENTIFIER]}|${u[d.NONNUMERICIDENTIFIER]})`),m("PRERELEASEIDENTIFIERLOOSE",`(?:${u[d.NUMERICIDENTIFIERLOOSE]}|${u[d.NONNUMERICIDENTIFIER]})`),m("PRERELEASE",`(?:-(${u[d.PRERELEASEIDENTIFIER]}(?:\\.${u[d.PRERELEASEIDENTIFIER]})*))`),m("PRERELEASELOOSE",`(?:-?(${u[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[d.PRERELEASEIDENTIFIERLOOSE]})*))`),m("BUILDIDENTIFIER",`${h}+`),m("BUILD",`(?:\\+(${u[d.BUILDIDENTIFIER]}(?:\\.${u[d.BUILDIDENTIFIER]})*))`),m("FULLPLAIN",`v?${u[d.MAINVERSION]}${u[d.PRERELEASE]}?${u[d.BUILD]}?`),m("FULL",`^${u[d.FULLPLAIN]}$`),m("LOOSEPLAIN",`[v=\\s]*${u[d.MAINVERSIONLOOSE]}${u[d.PRERELEASELOOSE]}?${u[d.BUILD]}?`),m("LOOSE",`^${u[d.LOOSEPLAIN]}$`),m("GTLT","((?:<|>)?=?)"),m("XRANGEIDENTIFIERLOOSE",`${u[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),m("XRANGEIDENTIFIER",`${u[d.NUMERICIDENTIFIER]}|x|X|\\*`),m("XRANGEPLAIN",`[v=\\s]*(${u[d.XRANGEIDENTIFIER]})(?:\\.(${u[d.XRANGEIDENTIFIER]})(?:\\.(${u[d.XRANGEIDENTIFIER]})(?:${u[d.PRERELEASE]})?${u[d.BUILD]}?)?)?`),m("XRANGEPLAINLOOSE",`[v=\\s]*(${u[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[d.XRANGEIDENTIFIERLOOSE]})(?:${u[d.PRERELEASELOOSE]})?${u[d.BUILD]}?)?)?`),m("XRANGE",`^${u[d.GTLT]}\\s*${u[d.XRANGEPLAIN]}$`),m("XRANGELOOSE",`^${u[d.GTLT]}\\s*${u[d.XRANGEPLAINLOOSE]}$`),m("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),m("COERCE",`${u[d.COERCEPLAIN]}(?:$|[^\\d])`),m("COERCEFULL",u[d.COERCEPLAIN]+`(?:${u[d.PRERELEASE]})?`+`(?:${u[d.BUILD]})?(?:$|[^\\d])`),m("COERCERTL",u[d.COERCE],!0),m("COERCERTLFULL",u[d.COERCEFULL],!0),m("LONETILDE","(?:~>?)"),m("TILDETRIM",`(\\s*)${u[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",m("TILDE",`^${u[d.LONETILDE]}${u[d.XRANGEPLAIN]}$`),m("TILDELOOSE",`^${u[d.LONETILDE]}${u[d.XRANGEPLAINLOOSE]}$`),m("LONECARET","(?:\\^)"),m("CARETTRIM",`(\\s*)${u[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",m("CARET",`^${u[d.LONECARET]}${u[d.XRANGEPLAIN]}$`),m("CARETLOOSE",`^${u[d.LONECARET]}${u[d.XRANGEPLAINLOOSE]}$`),m("COMPARATORLOOSE",`^${u[d.GTLT]}\\s*(${u[d.LOOSEPLAIN]})$|^$`),m("COMPARATOR",`^${u[d.GTLT]}\\s*(${u[d.FULLPLAIN]})$|^$`),m("COMPARATORTRIM",`(\\s*)${u[d.GTLT]}\\s*(${u[d.LOOSEPLAIN]}|${u[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",m("HYPHENRANGE",`^\\s*(${u[d.XRANGEPLAIN]})\\s+-\\s+(${u[d.XRANGEPLAIN]})\\s*$`),m("HYPHENRANGELOOSE",`^\\s*(${u[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[d.XRANGEPLAINLOOSE]})\\s*$`),m("STAR","(<|>)?=?\\s*\\*"),m("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),m("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},6877:(e,t,r)=>{const n=r(5566);e.exports=(e,t,r)=>0!==n(e,t,r)},6879:(e,t,r)=>{const n=r(9534);e.exports=(e,t,r)=>{const a=new n(e,r),o=new n(t,r);return a.compare(o)||a.compareBuild(o)}},6909:(e,t,r)=>{const n=r(5380);e.exports=(e,t,r)=>0===n(e,t,r)},7023:(e,t,r)=>{const n=r(5380);e.exports=(e,t)=>n(e,t,!0)},7092:(e,t,r)=>{const n=r(5380);e.exports=(e,t,r)=>n(e,t,r)<=0},7095:e=>{const t=Object.freeze({loose:!0}),r=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:r},7192:(e,t,r)=>{const n=r(9534),a=r(9618),{safeRe:o,t:i}=r(2728);e.exports=(e,t)=>{if(e instanceof n)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){const n=t.includePrerelease?o[i.COERCERTLFULL]:o[i.COERCERTL];let a;for(;(a=n.exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&a.index+a[0].length===r.index+r[0].length||(r=a),n.lastIndex=a.index+a[1].length+a[2].length;n.lastIndex=-1}else r=e.match(t.includePrerelease?o[i.COERCEFULL]:o[i.COERCE]);if(null===r)return null;const s=r[2],l=r[3]||"0",u=r[4]||"0",c=t.includePrerelease&&r[5]?`-${r[5]}`:"",d=t.includePrerelease&&r[6]?`+${r[6]}`:"";return a(`${s}.${l}.${u}${c}${d}`,t)}},7222:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resizeHandleType=t.resizeHandleAxesType=t.default=void 0;var n=o(r(2688)),a=o(r(5959));function o(e){return e&&e.__esModule?e:{default:e}}var i=n.default.arrayOf(n.default.oneOf(["s","w","e","n","sw","nw","se","ne"]));t.resizeHandleAxesType=i;var s=n.default.oneOfType([n.default.node,n.default.func]);t.resizeHandleType=s;var l={className:n.default.string,style:n.default.object,width:n.default.number,autoSize:n.default.bool,cols:n.default.number,draggableCancel:n.default.string,draggableHandle:n.default.string,verticalCompact:function(e){e.verticalCompact,0},compactType:n.default.oneOf(["vertical","horizontal"]),layout:function(e){var t=e.layout;void 0!==t&&r(414).validateLayout(t,"layout")},margin:n.default.arrayOf(n.default.number),containerPadding:n.default.arrayOf(n.default.number),rowHeight:n.default.number,maxRows:n.default.number,isBounded:n.default.bool,isDraggable:n.default.bool,isResizable:n.default.bool,allowOverlap:n.default.bool,preventCollision:n.default.bool,useCSSTransforms:n.default.bool,transformScale:n.default.number,isDroppable:n.default.bool,resizeHandles:i,resizeHandle:s,onLayoutChange:n.default.func,onDragStart:n.default.func,onDrag:n.default.func,onDragStop:n.default.func,onResizeStart:n.default.func,onResize:n.default.func,onResizeStop:n.default.func,onDrop:n.default.func,droppingItem:n.default.shape({i:n.default.string.isRequired,w:n.default.number.isRequired,h:n.default.number.isRequired}),children:function(e,t){var r=e[t],n={};a.default.Children.forEach(r,(function(e){if(null!=(null==e?void 0:e.key)){if(n[e.key])throw new Error('Duplicate child key "'+e.key+'" found! This will cause problems in ReactGridLayout.');n[e.key]=!0}}))},innerRef:n.default.any};t.default=l},7256:(e,t,r)=>{"use strict";function n(e){var t,r,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=n(e[t]))&&(a&&(a+=" "),a+=r);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function a(){for(var e,t,r=0,a="";r<arguments.length;)(e=arguments[r++])&&(t=n(e))&&(a&&(a+=" "),a+=t);return a}r.r(t),r.d(t,{clsx:()=>a,default:()=>o});const o=a},7278:(e,t,r)=>{const n=r(9618);e.exports=(e,t)=>{const r=n(e,null,!0),a=n(t,null,!0),o=r.compare(a);if(0===o)return null;const i=o>0,s=i?r:a,l=i?a:r,u=!!s.prerelease.length;if(!!l.prerelease.length&&!u)return l.patch||l.minor?s.patch?"patch":s.minor?"minor":"major":"major";const c=u?"pre":"";return r.major!==a.major?c+"major":r.minor!==a.minor?c+"minor":r.patch!==a.patch?c+"patch":"prerelease"}},7287:(e,t,r)=>{const n=r(4120),a=r(5566);e.exports=(e,t,r)=>{const o=[];let i=null,s=null;const l=e.sort(((e,t)=>a(e,t,r)));for(const e of l){n(e,t,r)?(s=e,i||(i=e)):(s&&o.push([i,s]),s=null,i=null)}i&&o.push([i,null]);const u=[];for(const[e,t]of o)e===t?u.push(e):t||e!==l[0]?t?e===l[0]?u.push(`<=${t}`):u.push(`${e} - ${t}`):u.push(`>=${e}`):u.push("*");const c=u.join(" || "),d="string"==typeof t.raw?t.raw:String(t);return c.length<d.length?c:t}},7350:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.browserPrefixToKey=a,t.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},t.default=void 0,t.getPrefix=n;const r=["Moz","Webkit","O","ms"];function n(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";const n=null===(e=window.document)||void 0===e||null===(e=e.documentElement)||void 0===e?void 0:e.style;if(!n)return"";if(t in n)return"";for(let e=0;e<r.length;e++)if(a(t,r[e])in n)return r[e];return""}function a(e,t){return t?"".concat(t).concat(function(e){let t="",r=!0;for(let n=0;n<e.length;n++)r?(t+=e[n].toUpperCase(),r=!1):"-"===e[n]?r=!0:t+=e[n];return t}(e)):e}t.default=n()},7434:e=>{e.exports=function(e,t,r){return e===t||e.className===t.className&&r(e.style,t.style)&&e.width===t.width&&e.autoSize===t.autoSize&&e.cols===t.cols&&e.draggableCancel===t.draggableCancel&&e.draggableHandle===t.draggableHandle&&r(e.verticalCompact,t.verticalCompact)&&r(e.compactType,t.compactType)&&r(e.layout,t.layout)&&r(e.margin,t.margin)&&r(e.containerPadding,t.containerPadding)&&e.rowHeight===t.rowHeight&&e.maxRows===t.maxRows&&e.isBounded===t.isBounded&&e.isDraggable===t.isDraggable&&e.isResizable===t.isResizable&&e.allowOverlap===t.allowOverlap&&e.preventCollision===t.preventCollision&&e.useCSSTransforms===t.useCSSTransforms&&e.transformScale===t.transformScale&&e.isDroppable===t.isDroppable&&r(e.resizeHandles,t.resizeHandles)&&r(e.resizeHandle,t.resizeHandle)&&e.onLayoutChange===t.onLayoutChange&&e.onDragStart===t.onDragStart&&e.onDrag===t.onDrag&&e.onDragStop===t.onDragStop&&e.onResizeStart===t.onResizeStart&&e.onResize===t.onResize&&e.onResizeStop===t.onResizeStop&&e.onDrop===t.onDrop&&r(e.droppingItem,t.droppingItem)&&r(e.innerRef,t.innerRef)}},7494:(e,t,r)=>{const n=r(8395);e.exports=(e,t)=>{try{return new n(e,t).range||"*"}catch(e){return null}}},7574:(e,t,r)=>{const n=r(5566);e.exports=(e,t,r)=>n(e,t,r)>0},7645:(e,t,r)=>{const n=r(5860);e.exports=(e,t)=>{const r=n(e,t);return r?r.version:null}},7659:(e,t,r)=>{const n=r(5380);e.exports=(e,t,r)=>0!==n(e,t,r)},7685:(e,t,r)=>{const n=r(6175),a=r(6877),o=r(7574),i=r(3039),s=r(5161),l=r(1178);e.exports=(e,t,r,u)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return n(e,r,u);case"!=":return a(e,r,u);case">":return o(e,r,u);case">=":return i(e,r,u);case"<":return s(e,r,u);case"<=":return l(e,r,u);default:throw new TypeError(`Invalid operator: ${t}`)}}},7781:e=>{"use strict";e.exports=s},7840:(e,t,r)=>{const n=r(7944),a=r(8395);e.exports=(e,t,r)=>{let o=null,i=null,s=null;try{s=new a(t,r)}catch(e){return null}return e.forEach((e=>{s.test(e)&&(o&&-1!==i.compare(e)||(o=e,i=new n(o,r)))})),o}},7842:(e,t,r)=>{e=r.nmd(e);var n="__lodash_hash_undefined__",a=9007199254740991,o="[object Arguments]",i="[object Array]",s="[object Boolean]",l="[object Date]",u="[object Error]",c="[object Function]",d="[object Map]",p="[object Number]",h="[object Object]",f="[object Promise]",m="[object RegExp]",g="[object Set]",v="[object String]",b="[object Symbol]",y="[object WeakMap]",w="[object ArrayBuffer]",S="[object DataView]",E=/^\[object .+?Constructor\]$/,O=/^(?:0|[1-9]\d*)$/,x={};x["[object Float32Array]"]=x["[object Float64Array]"]=x["[object Int8Array]"]=x["[object Int16Array]"]=x["[object Int32Array]"]=x["[object Uint8Array]"]=x["[object Uint8ClampedArray]"]=x["[object Uint16Array]"]=x["[object Uint32Array]"]=!0,x[o]=x[i]=x[w]=x[s]=x[S]=x[l]=x[u]=x[c]=x[d]=x[p]=x[h]=x[m]=x[g]=x[v]=x[y]=!1;var R="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,_="object"==typeof self&&self&&self.Object===Object&&self,C=R||_||Function("return this")(),P=t&&!t.nodeType&&t,I=P&&e&&!e.nodeType&&e,T=I&&I.exports===P,D=T&&R.process,A=function(){try{return D&&D.binding&&D.binding("util")}catch(e){}}(),k=A&&A.isTypedArray;function j(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function L(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function M(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var N,$,V,F=Array.prototype,B=Function.prototype,z=Object.prototype,U=C["__core-js_shared__"],W=B.toString,H=z.hasOwnProperty,G=(N=/[^.]+$/.exec(U&&U.keys&&U.keys.IE_PROTO||""))?"Symbol(src)_1."+N:"",q=z.toString,Q=RegExp("^"+W.call(H).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),X=T?C.Buffer:void 0,Y=C.Symbol,K=C.Uint8Array,Z=z.propertyIsEnumerable,J=F.splice,ee=Y?Y.toStringTag:void 0,te=Object.getOwnPropertySymbols,re=X?X.isBuffer:void 0,ne=($=Object.keys,V=Object,function(e){return $(V(e))}),ae=Ae(C,"DataView"),oe=Ae(C,"Map"),ie=Ae(C,"Promise"),se=Ae(C,"Set"),le=Ae(C,"WeakMap"),ue=Ae(Object,"create"),ce=Me(ae),de=Me(oe),pe=Me(ie),he=Me(se),fe=Me(le),me=Y?Y.prototype:void 0,ge=me?me.valueOf:void 0;function ve(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function be(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ye(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function we(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new ye;++t<r;)this.add(e[t])}function Se(e){var t=this.__data__=new be(e);this.size=t.size}function Ee(e,t){var r=Ve(e),n=!r&&$e(e),a=!r&&!n&&Fe(e),o=!r&&!n&&!a&&He(e),i=r||n||a||o,s=i?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],l=s.length;for(var u in e)!t&&!H.call(e,u)||i&&("length"==u||a&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Le(u,l))||s.push(u);return s}function Oe(e,t){for(var r=e.length;r--;)if(Ne(e[r][0],t))return r;return-1}function xe(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ee&&ee in Object(e)?function(e){var t=H.call(e,ee),r=e[ee];try{e[ee]=void 0;var n=!0}catch(e){}var a=q.call(e);n&&(t?e[ee]=r:delete e[ee]);return a}(e):function(e){return q.call(e)}(e)}function Re(e){return We(e)&&xe(e)==o}function _e(e,t,r,n,a){return e===t||(null==e||null==t||!We(e)&&!We(t)?e!=e&&t!=t:function(e,t,r,n,a,c){var f=Ve(e),y=Ve(t),E=f?i:je(e),O=y?i:je(t),x=(E=E==o?h:E)==h,R=(O=O==o?h:O)==h,_=E==O;if(_&&Fe(e)){if(!Fe(t))return!1;f=!0,x=!1}if(_&&!x)return c||(c=new Se),f||He(e)?Ie(e,t,r,n,a,c):function(e,t,r,n,a,o,i){switch(r){case S:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!o(new K(e),new K(t)));case s:case l:case p:return Ne(+e,+t);case u:return e.name==t.name&&e.message==t.message;case m:case v:return e==t+"";case d:var c=L;case g:var h=1&n;if(c||(c=M),e.size!=t.size&&!h)return!1;var f=i.get(e);if(f)return f==t;n|=2,i.set(e,t);var y=Ie(c(e),c(t),n,a,o,i);return i.delete(e),y;case b:if(ge)return ge.call(e)==ge.call(t)}return!1}(e,t,E,r,n,a,c);if(!(1&r)){var C=x&&H.call(e,"__wrapped__"),P=R&&H.call(t,"__wrapped__");if(C||P){var I=C?e.value():e,T=P?t.value():t;return c||(c=new Se),a(I,T,r,n,c)}}if(!_)return!1;return c||(c=new Se),function(e,t,r,n,a,o){var i=1&r,s=Te(e),l=s.length,u=Te(t),c=u.length;if(l!=c&&!i)return!1;var d=l;for(;d--;){var p=s[d];if(!(i?p in t:H.call(t,p)))return!1}var h=o.get(e);if(h&&o.get(t))return h==t;var f=!0;o.set(e,t),o.set(t,e);var m=i;for(;++d<l;){var g=e[p=s[d]],v=t[p];if(n)var b=i?n(v,g,p,t,e,o):n(g,v,p,e,t,o);if(!(void 0===b?g===v||a(g,v,r,n,o):b)){f=!1;break}m||(m="constructor"==p)}if(f&&!m){var y=e.constructor,w=t.constructor;y==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w||(f=!1)}return o.delete(e),o.delete(t),f}(e,t,r,n,a,c)}(e,t,r,n,_e,a))}function Ce(e){return!(!Ue(e)||function(e){return!!G&&G in e}(e))&&(Be(e)?Q:E).test(Me(e))}function Pe(e){if(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||z,t!==n)return ne(e);var t,r,n,a=[];for(var o in Object(e))H.call(e,o)&&"constructor"!=o&&a.push(o);return a}function Ie(e,t,r,n,a,o){var i=1&r,s=e.length,l=t.length;if(s!=l&&!(i&&l>s))return!1;var u=o.get(e);if(u&&o.get(t))return u==t;var c=-1,d=!0,p=2&r?new we:void 0;for(o.set(e,t),o.set(t,e);++c<s;){var h=e[c],f=t[c];if(n)var m=i?n(f,h,c,t,e,o):n(h,f,c,e,t,o);if(void 0!==m){if(m)continue;d=!1;break}if(p){if(!j(t,(function(e,t){if(i=t,!p.has(i)&&(h===e||a(h,e,r,n,o)))return p.push(t);var i}))){d=!1;break}}else if(h!==f&&!a(h,f,r,n,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function Te(e){return function(e,t,r){var n=t(e);return Ve(e)?n:function(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}(n,r(e))}(e,Ge,ke)}function De(e,t){var r,n,a=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?a["string"==typeof t?"string":"hash"]:a.map}function Ae(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Ce(r)?r:void 0}ve.prototype.clear=function(){this.__data__=ue?ue(null):{},this.size=0},ve.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ve.prototype.get=function(e){var t=this.__data__;if(ue){var r=t[e];return r===n?void 0:r}return H.call(t,e)?t[e]:void 0},ve.prototype.has=function(e){var t=this.__data__;return ue?void 0!==t[e]:H.call(t,e)},ve.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ue&&void 0===t?n:t,this},be.prototype.clear=function(){this.__data__=[],this.size=0},be.prototype.delete=function(e){var t=this.__data__,r=Oe(t,e);return!(r<0)&&(r==t.length-1?t.pop():J.call(t,r,1),--this.size,!0)},be.prototype.get=function(e){var t=this.__data__,r=Oe(t,e);return r<0?void 0:t[r][1]},be.prototype.has=function(e){return Oe(this.__data__,e)>-1},be.prototype.set=function(e,t){var r=this.__data__,n=Oe(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},ye.prototype.clear=function(){this.size=0,this.__data__={hash:new ve,map:new(oe||be),string:new ve}},ye.prototype.delete=function(e){var t=De(this,e).delete(e);return this.size-=t?1:0,t},ye.prototype.get=function(e){return De(this,e).get(e)},ye.prototype.has=function(e){return De(this,e).has(e)},ye.prototype.set=function(e,t){var r=De(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},we.prototype.add=we.prototype.push=function(e){return this.__data__.set(e,n),this},we.prototype.has=function(e){return this.__data__.has(e)},Se.prototype.clear=function(){this.__data__=new be,this.size=0},Se.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Se.prototype.get=function(e){return this.__data__.get(e)},Se.prototype.has=function(e){return this.__data__.has(e)},Se.prototype.set=function(e,t){var r=this.__data__;if(r instanceof be){var n=r.__data__;if(!oe||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new ye(n)}return r.set(e,t),this.size=r.size,this};var ke=te?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,n=null==e?0:e.length,a=0,o=[];++r<n;){var i=e[r];t(i,r,e)&&(o[a++]=i)}return o}(te(e),(function(t){return Z.call(e,t)})))}:function(){return[]},je=xe;function Le(e,t){return!!(t=null==t?a:t)&&("number"==typeof e||O.test(e))&&e>-1&&e%1==0&&e<t}function Me(e){if(null!=e){try{return W.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ne(e,t){return e===t||e!=e&&t!=t}(ae&&je(new ae(new ArrayBuffer(1)))!=S||oe&&je(new oe)!=d||ie&&je(ie.resolve())!=f||se&&je(new se)!=g||le&&je(new le)!=y)&&(je=function(e){var t=xe(e),r=t==h?e.constructor:void 0,n=r?Me(r):"";if(n)switch(n){case ce:return S;case de:return d;case pe:return f;case he:return g;case fe:return y}return t});var $e=Re(function(){return arguments}())?Re:function(e){return We(e)&&H.call(e,"callee")&&!Z.call(e,"callee")},Ve=Array.isArray;var Fe=re||function(){return!1};function Be(e){if(!Ue(e))return!1;var t=xe(e);return t==c||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function ze(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function Ue(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function We(e){return null!=e&&"object"==typeof e}var He=k?function(e){return function(t){return e(t)}}(k):function(e){return We(e)&&ze(e.length)&&!!x[xe(e)]};function Ge(e){return null!=(t=e)&&ze(t.length)&&!Be(t)?Ee(e):Pe(e);var t}e.exports=function(e,t){return _e(e,t)}},7871:(e,t,r)=>{const n=r(5463);e.exports=(e,t,r)=>n(e,t,">",r)},7930:(e,t,r)=>{const n=r(7944),a=r(8395);e.exports=(e,t,r)=>{let o=null,i=null,s=null;try{s=new a(t,r)}catch(e){return null}return e.forEach((e=>{s.test(e)&&(o&&1!==i.compare(e)||(o=e,i=new n(o,r)))})),o}},7944:(e,t,r)=>{const n=r(9796),{MAX_LENGTH:a,MAX_SAFE_INTEGER:o}=r(9630),{safeRe:i,safeSrc:s,t:l}=r(6850),u=r(7095),{compareIdentifiers:c}=r(4031);class d{constructor(e,t){if(t=u(t),e instanceof d){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>a)throw new TypeError(`version is longer than ${a} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?i[l.LOOSE]:i[l.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<o)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof d)){if("string"==typeof e&&e===this.version)return 0;e=new d(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof d||(e=new d(e,this.options)),c(this.major,e.major)||c(this.minor,e.minor)||c(this.patch,e.patch)}comparePre(e){if(e instanceof d||(e=new d(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],a=e.prerelease[t];if(n("prerelease compare",t,r,a),void 0===r&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===r)return-1;if(r!==a)return c(r,a)}while(++t)}compareBuild(e){e instanceof d||(e=new d(e,this.options));let t=0;do{const r=this.build[t],a=e.build[t];if(n("build compare",t,r,a),void 0===r&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===r)return-1;if(r!==a)return c(r,a)}while(++t)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(t){const e=new RegExp(`^${this.options.loose?s[l.PRERELEASELOOSE]:s[l.PRERELEASE]}$`),r=`-${t}`.match(e);if(!r||r[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(0===this.prerelease.length)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===c(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=d},7988:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){0}},7994:(e,t,r)=>{const n=r(5860);e.exports=(e,t)=>{const r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},8029:e=>{const t=Object.freeze({loose:!0}),r=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:r},8100:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=p(r(5959)),o=p(r(2688)),i=r(8230),s=r(936),l=r(414),u=r(906),c=r(7222),d=p(r(7256));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=y(e);if(t){var o=y(this).constructor;r=Reflect.construct(a,arguments,o)}else r=a.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}(this,r)}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(c,e);var t,r,n,o=v(c);function c(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return w(b(e=o.call.apply(o,[this].concat(r))),"state",{resizing:null,dragging:null,className:""}),w(b(e),"elementRef",a.default.createRef()),w(b(e),"onDragStart",(function(t,r){var n=r.node,a=e.props,o=a.onDragStart,i=a.transformScale;if(o){var s={top:0,left:0},l=n.offsetParent;if(l){var c=l.getBoundingClientRect(),d=n.getBoundingClientRect(),p=d.left/i,h=c.left/i,f=d.top/i,m=c.top/i;s.left=p-h+l.scrollLeft,s.top=f-m+l.scrollTop,e.setState({dragging:s});var g=(0,u.calcXY)(e.getPositionParams(),s.top,s.left,e.props.w,e.props.h),v=g.x,y=g.y;return o.call(b(e),e.props.i,v,y,{e:t,node:n,newPosition:s})}}})),w(b(e),"onDrag",(function(t,r){var n=r.node,a=r.deltaX,o=r.deltaY,i=e.props.onDrag;if(i){if(!e.state.dragging)throw new Error("onDrag called before onDragStart.");var s=e.state.dragging.top+o,l=e.state.dragging.left+a,c=e.props,d=c.isBounded,p=c.i,h=c.w,f=c.h,m=c.containerWidth,g=e.getPositionParams();if(d){var v=n.offsetParent;if(v){var y=e.props,w=y.margin,S=y.rowHeight,E=v.clientHeight-(0,u.calcGridItemWHPx)(f,S,w[1]);s=(0,u.clamp)(s,0,E);var O=(0,u.calcGridColWidth)(g),x=m-(0,u.calcGridItemWHPx)(h,O,w[0]);l=(0,u.clamp)(l,0,x)}}var R={top:s,left:l};e.setState({dragging:R});var _=(0,u.calcXY)(g,s,l,h,f),C=_.x,P=_.y;return i.call(b(e),p,C,P,{e:t,node:n,newPosition:R})}})),w(b(e),"onDragStop",(function(t,r){var n=r.node,a=e.props.onDragStop;if(a){if(!e.state.dragging)throw new Error("onDragEnd called before onDragStart.");var o=e.props,i=o.w,s=o.h,l=o.i,c=e.state.dragging,d=c.left,p=c.top,h={top:p,left:d};e.setState({dragging:null});var f=(0,u.calcXY)(e.getPositionParams(),p,d,i,s),m=f.x,g=f.y;return a.call(b(e),l,m,g,{e:t,node:n,newPosition:h})}})),w(b(e),"onResizeStop",(function(t,r){e.onResizeHandler(t,r,"onResizeStop")})),w(b(e),"onResizeStart",(function(t,r){e.onResizeHandler(t,r,"onResizeStart")})),w(b(e),"onResize",(function(t,r){e.onResizeHandler(t,r,"onResize")})),e}return t=c,r=[{key:"shouldComponentUpdate",value:function(e,t){if(this.props.children!==e.children)return!0;if(this.props.droppingPosition!==e.droppingPosition)return!0;var r=(0,u.calcGridItemPosition)(this.getPositionParams(this.props),this.props.x,this.props.y,this.props.w,this.props.h,this.state),n=(0,u.calcGridItemPosition)(this.getPositionParams(e),e.x,e.y,e.w,e.h,t);return!(0,l.fastPositionEqual)(r,n)||this.props.useCSSTransforms!==e.useCSSTransforms}},{key:"componentDidMount",value:function(){this.moveDroppingItem({})}},{key:"componentDidUpdate",value:function(e){this.moveDroppingItem(e)}},{key:"moveDroppingItem",value:function(e){var t=this.props.droppingPosition;if(t){var r=this.elementRef.current;if(r){var n=e.droppingPosition||{left:0,top:0},a=this.state.dragging,o=a&&t.left!==n.left||t.top!==n.top;if(a){if(o){var i=t.left-a.left,s=t.top-a.top;this.onDrag(t.e,{node:r,deltaX:i,deltaY:s})}}else this.onDragStart(t.e,{node:r,deltaX:t.left,deltaY:t.top})}}}},{key:"getPositionParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return{cols:e.cols,containerPadding:e.containerPadding,containerWidth:e.containerWidth,margin:e.margin,maxRows:e.maxRows,rowHeight:e.rowHeight}}},{key:"createStyle",value:function(e){var t,r=this.props,n=r.usePercentages,a=r.containerWidth;return r.useCSSTransforms?t=(0,l.setTransform)(e):(t=(0,l.setTopLeft)(e),n&&(t.left=(0,l.perc)(e.left/a),t.width=(0,l.perc)(e.width/a))),t}},{key:"mixinDraggable",value:function(e,t){return a.default.createElement(i.DraggableCore,{disabled:!t,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,handle:this.props.handle,cancel:".react-resizable-handle"+(this.props.cancel?","+this.props.cancel:""),scale:this.props.transformScale,nodeRef:this.elementRef},e)}},{key:"mixinResizable",value:function(e,t,r){var n=this.props,o=n.cols,i=n.x,l=n.minW,c=n.minH,d=n.maxW,p=n.maxH,h=n.transformScale,f=n.resizeHandles,m=n.resizeHandle,g=this.getPositionParams(),v=(0,u.calcGridItemPosition)(g,0,0,o-i,0).width,b=(0,u.calcGridItemPosition)(g,0,0,l,c),y=(0,u.calcGridItemPosition)(g,0,0,d,p),w=[b.width,b.height],S=[Math.min(y.width,v),Math.min(y.height,1/0)];return a.default.createElement(s.Resizable,{draggableOpts:{disabled:!r},className:r?void 0:"react-resizable-hide",width:t.width,height:t.height,minConstraints:w,maxConstraints:S,onResizeStop:this.onResizeStop,onResizeStart:this.onResizeStart,onResize:this.onResize,transformScale:h,resizeHandles:f,handle:m},e)}},{key:"onResizeHandler",value:function(e,t,r){var n=t.node,a=t.size,o=this.props[r];if(o){var i=this.props,s=i.cols,l=i.x,c=i.y,d=i.i,p=i.maxH,h=i.minH,f=this.props,m=f.minW,g=f.maxW,v=(0,u.calcWH)(this.getPositionParams(),a.width,a.height,l,c),b=v.w,y=v.h;m=Math.max(m,1),g=Math.min(g,s-l),b=(0,u.clamp)(b,m,g),y=(0,u.clamp)(y,h,p),this.setState({resizing:"onResizeStop"===r?null:a}),o.call(this,d,b,y,{e,node:n,size:a})}}},{key:"render",value:function(){var e=this.props,t=e.x,r=e.y,n=e.w,o=e.h,i=e.isDraggable,s=e.isResizable,l=e.droppingPosition,c=e.useCSSTransforms,p=(0,u.calcGridItemPosition)(this.getPositionParams(),t,r,n,o,this.state),h=a.default.Children.only(this.props.children),m=a.default.cloneElement(h,{ref:this.elementRef,className:(0,d.default)("react-grid-item",h.props.className,this.props.className,{static:this.props.static,resizing:Boolean(this.state.resizing),"react-draggable":i,"react-draggable-dragging":Boolean(this.state.dragging),dropping:Boolean(l),cssTransforms:c}),style:f(f(f({},this.props.style),h.props.style),this.createStyle(p))});return m=this.mixinResizable(m,p,s),m=this.mixinDraggable(m,i)}}],r&&m(t.prototype,r),n&&m(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(a.default.Component);t.default=S,w(S,"propTypes",{children:o.default.element,cols:o.default.number.isRequired,containerWidth:o.default.number.isRequired,rowHeight:o.default.number.isRequired,margin:o.default.array.isRequired,maxRows:o.default.number.isRequired,containerPadding:o.default.array.isRequired,x:o.default.number.isRequired,y:o.default.number.isRequired,w:o.default.number.isRequired,h:o.default.number.isRequired,minW:function(e,t){var r=e[t];return"number"!=typeof r?new Error("minWidth not Number"):r>e.w||r>e.maxW?new Error("minWidth larger than item width/maxWidth"):void 0},maxW:function(e,t){var r=e[t];return"number"!=typeof r?new Error("maxWidth not Number"):r<e.w||r<e.minW?new Error("maxWidth smaller than item width/minWidth"):void 0},minH:function(e,t){var r=e[t];return"number"!=typeof r?new Error("minHeight not Number"):r>e.h||r>e.maxH?new Error("minHeight larger than item height/maxHeight"):void 0},maxH:function(e,t){var r=e[t];return"number"!=typeof r?new Error("maxHeight not Number"):r<e.h||r<e.minH?new Error("maxHeight smaller than item height/minHeight"):void 0},i:o.default.string.isRequired,resizeHandles:c.resizeHandleAxesType,resizeHandle:c.resizeHandleType,onDragStop:o.default.func,onDragStart:o.default.func,onDrag:o.default.func,onResizeStop:o.default.func,onResizeStart:o.default.func,onResize:o.default.func,isDraggable:o.default.bool.isRequired,isResizable:o.default.bool.isRequired,isBounded:o.default.bool.isRequired,static:o.default.bool,useCSSTransforms:o.default.bool.isRequired,transformScale:o.default.number,className:o.default.string,handle:o.default.string,cancel:o.default.string,droppingPosition:o.default.shape({e:o.default.object.isRequired,left:o.default.number.isRequired,top:o.default.number.isRequired})}),w(S,"defaultProps",{className:"",cancel:"",handle:"",minH:1,minW:1,maxH:1/0,maxW:1/0,transformScale:1})},8230:(e,t,r)=>{"use strict";const{default:n,DraggableCore:a}=r(9111);e.exports=n,e.exports.default=n,e.exports.DraggableCore=a},8262:(e,t,r)=>{"use strict";function n(e){var t,r,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=n(e[t]))&&(a&&(a+=" "),a+=r);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function a(){for(var e,t,r=0,a="";r<arguments.length;)(e=arguments[r++])&&(t=n(e))&&(a&&(a+=" "),a+=t);return a}r.r(t),r.d(t,{clsx:()=>a,default:()=>o});const o=a},8395:(e,t,r)=>{const n=/\s+/g;class a{constructor(e,t){if(t=i(t),e instanceof a)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new a(e.raw,t);if(e instanceof s)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(n," "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!v(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&b(e[0])){this.set=[e];break}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");const t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&m)|(this.options.loose&&g))+":"+e,r=o.get(t);if(r)return r;const n=this.options.loose,a=n?c[d.HYPHENRANGELOOSE]:c[d.HYPHENRANGE];e=e.replace(a,T(this.options.includePrerelease)),l("hyphen replace",e),e=e.replace(c[d.COMPARATORTRIM],p),l("comparator trim",e),e=e.replace(c[d.TILDETRIM],h),l("tilde trim",e),e=e.replace(c[d.CARETTRIM],f),l("caret trim",e);let i=e.split(" ").map((e=>w(e,this.options))).join(" ").split(/\s+/).map((e=>I(e,this.options)));n&&(i=i.filter((e=>(l("loose invalid filter",e,this.options),!!e.match(c[d.COMPARATORLOOSE]))))),l("range list",i);const u=new Map,b=i.map((e=>new s(e,this.options)));for(const e of b){if(v(e))return[e];u.set(e.value,e)}u.size>1&&u.has("")&&u.delete("");const y=[...u.values()];return o.set(t,y),y}intersects(e,t){if(!(e instanceof a))throw new TypeError("a Range is required");return this.set.some((r=>y(r,t)&&e.set.some((e=>y(e,t)&&r.every((r=>e.every((e=>r.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new u(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(D(this.set[t],e,this.options))return!0;return!1}}e.exports=a;const o=new(r(1158)),i=r(7095),s=r(9524),l=r(9796),u=r(7944),{safeRe:c,t:d,comparatorTrimReplace:p,tildeTrimReplace:h,caretTrimReplace:f}=r(6850),{FLAG_INCLUDE_PRERELEASE:m,FLAG_LOOSE:g}=r(9630),v=e=>"<0.0.0-0"===e.value,b=e=>""===e.value,y=(e,t)=>{let r=!0;const n=e.slice();let a=n.pop();for(;r&&n.length;)r=n.every((e=>a.intersects(e,t))),a=n.pop();return r},w=(e,t)=>(l("comp",e,t),e=x(e,t),l("caret",e),e=E(e,t),l("tildes",e),e=_(e,t),l("xrange",e),e=P(e,t),l("stars",e),e),S=e=>!e||"x"===e.toLowerCase()||"*"===e,E=(e,t)=>e.trim().split(/\s+/).map((e=>O(e,t))).join(" "),O=(e,t)=>{const r=t.loose?c[d.TILDELOOSE]:c[d.TILDE];return e.replace(r,((t,r,n,a,o)=>{let i;return l("tilde",e,t,r,n,a,o),S(r)?i="":S(n)?i=`>=${r}.0.0 <${+r+1}.0.0-0`:S(a)?i=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:o?(l("replaceTilde pr",o),i=`>=${r}.${n}.${a}-${o} <${r}.${+n+1}.0-0`):i=`>=${r}.${n}.${a} <${r}.${+n+1}.0-0`,l("tilde return",i),i}))},x=(e,t)=>e.trim().split(/\s+/).map((e=>R(e,t))).join(" "),R=(e,t)=>{l("caret",e,t);const r=t.loose?c[d.CARETLOOSE]:c[d.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,((t,r,a,o,i)=>{let s;return l("caret",e,t,r,a,o,i),S(r)?s="":S(a)?s=`>=${r}.0.0${n} <${+r+1}.0.0-0`:S(o)?s="0"===r?`>=${r}.${a}.0${n} <${r}.${+a+1}.0-0`:`>=${r}.${a}.0${n} <${+r+1}.0.0-0`:i?(l("replaceCaret pr",i),s="0"===r?"0"===a?`>=${r}.${a}.${o}-${i} <${r}.${a}.${+o+1}-0`:`>=${r}.${a}.${o}-${i} <${r}.${+a+1}.0-0`:`>=${r}.${a}.${o}-${i} <${+r+1}.0.0-0`):(l("no pr"),s="0"===r?"0"===a?`>=${r}.${a}.${o}${n} <${r}.${a}.${+o+1}-0`:`>=${r}.${a}.${o}${n} <${r}.${+a+1}.0-0`:`>=${r}.${a}.${o} <${+r+1}.0.0-0`),l("caret return",s),s}))},_=(e,t)=>(l("replaceXRanges",e,t),e.split(/\s+/).map((e=>C(e,t))).join(" ")),C=(e,t)=>{e=e.trim();const r=t.loose?c[d.XRANGELOOSE]:c[d.XRANGE];return e.replace(r,((r,n,a,o,i,s)=>{l("xRange",e,r,n,a,o,i,s);const u=S(a),c=u||S(o),d=c||S(i),p=d;return"="===n&&p&&(n=""),s=t.includePrerelease?"-0":"",u?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&p?(c&&(o=0),i=0,">"===n?(n=">=",c?(a=+a+1,o=0,i=0):(o=+o+1,i=0)):"<="===n&&(n="<",c?a=+a+1:o=+o+1),"<"===n&&(s="-0"),r=`${n+a}.${o}.${i}${s}`):c?r=`>=${a}.0.0${s} <${+a+1}.0.0-0`:d&&(r=`>=${a}.${o}.0${s} <${a}.${+o+1}.0-0`),l("xRange return",r),r}))},P=(e,t)=>(l("replaceStars",e,t),e.trim().replace(c[d.STAR],"")),I=(e,t)=>(l("replaceGTE0",e,t),e.trim().replace(c[t.includePrerelease?d.GTE0PRE:d.GTE0],"")),T=e=>(t,r,n,a,o,i,s,l,u,c,d,p)=>`${r=S(n)?"":S(a)?`>=${n}.0.0${e?"-0":""}`:S(o)?`>=${n}.${a}.0${e?"-0":""}`:i?`>=${r}`:`>=${r}${e?"-0":""}`} ${l=S(u)?"":S(c)?`<${+u+1}.0.0-0`:S(d)?`<${u}.${+c+1}.0-0`:p?`<=${u}.${c}.${d}-${p}`:e?`<${u}.${c}.${+d+1}-0`:`<=${l}`}`.trim(),D=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(l(e[r].semver),e[r].semver!==s.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}},8398:e=>{"use strict";e.exports=l},8449:(e,t,r)=>{const n=r(6850),a=r(9630),o=r(7944),i=r(4031),s=r(5860),l=r(7645),u=r(7994),c=r(5955),d=r(660),p=r(2966),h=r(5986),f=r(1617),m=r(9613),g=r(5380),v=r(2862),b=r(7023),y=r(2801),w=r(603),S=r(6033),E=r(144),O=r(599),x=r(6909),R=r(7659),_=r(2077),C=r(7092),P=r(3811),I=r(5334),T=r(9524),D=r(8395),A=r(1722),k=r(651),j=r(7840),L=r(7930),M=r(3489),N=r(7494),$=r(5463),V=r(7871),F=r(4266),B=r(1112),z=r(1465),U=r(9252);e.exports={parse:s,valid:l,clean:u,inc:c,diff:d,major:p,minor:h,patch:f,prerelease:m,compare:g,rcompare:v,compareLoose:b,compareBuild:y,sort:w,rsort:S,gt:E,lt:O,eq:x,neq:R,gte:_,lte:C,cmp:P,coerce:I,Comparator:T,Range:D,satisfies:A,toComparators:k,maxSatisfying:j,minSatisfying:L,minVersion:M,validRange:N,outside:$,gtr:V,ltr:F,intersects:B,simplifyRange:z,subset:U,SemVer:o,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:a.SEMVER_SPEC_VERSION,RELEASE_TYPES:a.RELEASE_TYPES,compareIdentifiers:i.compareIdentifiers,rcompareIdentifiers:i.rcompareIdentifiers}},8531:e=>{"use strict";e.exports=u},8752:(e,t,r)=>{const n=r(9534),a=r(6293);e.exports=(e,t,r)=>{let o=null,i=null,s=null;try{s=new a(t,r)}catch(e){return null}return e.forEach((e=>{s.test(e)&&(o&&1!==i.compare(e)||(o=e,i=new n(o,r)))})),o}},8968:(e,t,r)=>{const n=r(9618);e.exports=(e,t)=>{const r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},8992:(e,t,r)=>{const n=r(9534);e.exports=(e,t)=>new n(e,t).major},9111:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(5959)),a=p(r(2688)),o=p(r(8398)),i=p(r(8262)),s=r(2837),l=r(402),u=r(6732),c=p(r(1060)),d=p(r(7988));function p(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}function m(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class g extends n.Component{static getDerivedStateFromProps(e,t){let{position:r}=e,{prevPropsPosition:n}=t;return!r||n&&r.x===n.x&&r.y===n.y?null:((0,d.default)("Draggable: getDerivedStateFromProps %j",{position:r,prevPropsPosition:n}),{x:r.x,y:r.y,prevPropsPosition:{...r}})}constructor(e){super(e),m(this,"onDragStart",((e,t)=>{(0,d.default)("Draggable: onDragStart: %j",t);if(!1===this.props.onStart(e,(0,l.createDraggableData)(this,t)))return!1;this.setState({dragging:!0,dragged:!0})})),m(this,"onDrag",((e,t)=>{if(!this.state.dragging)return!1;(0,d.default)("Draggable: onDrag: %j",t);const r=(0,l.createDraggableData)(this,t),n={x:r.x,y:r.y,slackX:0,slackY:0};if(this.props.bounds){const{x:e,y:t}=n;n.x+=this.state.slackX,n.y+=this.state.slackY;const[a,o]=(0,l.getBoundPosition)(this,n.x,n.y);n.x=a,n.y=o,n.slackX=this.state.slackX+(e-n.x),n.slackY=this.state.slackY+(t-n.y),r.x=n.x,r.y=n.y,r.deltaX=n.x-this.state.x,r.deltaY=n.y-this.state.y}if(!1===this.props.onDrag(e,r))return!1;this.setState(n)})),m(this,"onDragStop",((e,t)=>{if(!this.state.dragging)return!1;if(!1===this.props.onStop(e,(0,l.createDraggableData)(this,t)))return!1;(0,d.default)("Draggable: onDragStop: %j",t);const r={dragging:!1,slackX:0,slackY:0};if(Boolean(this.props.position)){const{x:e,y:t}=this.props.position;r.x=e,r.y=t}this.setState(r)})),this.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:{...e.position},slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){void 0!==window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var e,t;return null!==(e=null===(t=this.props)||void 0===t||null===(t=t.nodeRef)||void 0===t?void 0:t.current)&&void 0!==e?e:o.default.findDOMNode(this)}render(){const{axis:e,bounds:t,children:r,defaultPosition:a,defaultClassName:o,defaultClassNameDragging:u,defaultClassNameDragged:d,position:p,positionOffset:h,scale:m,...g}=this.props;let v={},b=null;const y=!Boolean(p)||this.state.dragging,w=p||a,S={x:(0,l.canDragX)(this)&&y?this.state.x:w.x,y:(0,l.canDragY)(this)&&y?this.state.y:w.y};this.state.isElementSVG?b=(0,s.createSVGTransform)(S,h):v=(0,s.createCSSTransform)(S,h);const E=(0,i.default)(r.props.className||"",o,{[u]:this.state.dragging,[d]:this.state.dragged});return n.createElement(c.default,f({},g,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),n.cloneElement(n.Children.only(r),{className:E,style:{...r.props.style,...v},transform:b}))}}t.default=g,m(g,"displayName","Draggable"),m(g,"propTypes",{...c.default.propTypes,axis:a.default.oneOf(["both","x","y","none"]),bounds:a.default.oneOfType([a.default.shape({left:a.default.number,right:a.default.number,top:a.default.number,bottom:a.default.number}),a.default.string,a.default.oneOf([!1])]),defaultClassName:a.default.string,defaultClassNameDragging:a.default.string,defaultClassNameDragged:a.default.string,defaultPosition:a.default.shape({x:a.default.number,y:a.default.number}),positionOffset:a.default.shape({x:a.default.oneOfType([a.default.number,a.default.string]),y:a.default.oneOfType([a.default.number,a.default.string])}),position:a.default.shape({x:a.default.number,y:a.default.number}),className:u.dontSetMe,style:u.dontSetMe,transform:u.dontSetMe}),m(g,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})},9252:(e,t,r)=>{const n=r(8395),a=r(9524),{ANY:o}=a,i=r(1722),s=r(5380),l=[new a(">=0.0.0-0")],u=[new a(">=0.0.0")],c=(e,t,r)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===o){if(1===t.length&&t[0].semver===o)return!0;e=r.includePrerelease?l:u}if(1===t.length&&t[0].semver===o){if(r.includePrerelease)return!0;t=u}const n=new Set;let a,c,h,f,m,g,v;for(const t of e)">"===t.operator||">="===t.operator?a=d(a,t,r):"<"===t.operator||"<="===t.operator?c=p(c,t,r):n.add(t.semver);if(n.size>1)return null;if(a&&c){if(h=s(a.semver,c.semver,r),h>0)return null;if(0===h&&(">="!==a.operator||"<="!==c.operator))return null}for(const e of n){if(a&&!i(e,String(a),r))return null;if(c&&!i(e,String(c),r))return null;for(const n of t)if(!i(e,String(n),r))return!1;return!0}let b=!(!c||r.includePrerelease||!c.semver.prerelease.length)&&c.semver,y=!(!a||r.includePrerelease||!a.semver.prerelease.length)&&a.semver;b&&1===b.prerelease.length&&"<"===c.operator&&0===b.prerelease[0]&&(b=!1);for(const e of t){if(v=v||">"===e.operator||">="===e.operator,g=g||"<"===e.operator||"<="===e.operator,a)if(y&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch&&(y=!1),">"===e.operator||">="===e.operator){if(f=d(a,e,r),f===e&&f!==a)return!1}else if(">="===a.operator&&!i(a.semver,String(e),r))return!1;if(c)if(b&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===b.major&&e.semver.minor===b.minor&&e.semver.patch===b.patch&&(b=!1),"<"===e.operator||"<="===e.operator){if(m=p(c,e,r),m===e&&m!==c)return!1}else if("<="===c.operator&&!i(c.semver,String(e),r))return!1;if(!e.operator&&(c||a)&&0!==h)return!1}return!(a&&g&&!c&&0!==h)&&(!(c&&v&&!a&&0!==h)&&(!y&&!b))},d=(e,t,r)=>{if(!e)return t;const n=s(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},p=(e,t,r)=>{if(!e)return t;const n=s(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,r={})=>{if(e===t)return!0;e=new n(e,r),t=new n(t,r);let a=!1;e:for(const n of e.set){for(const e of t.set){const t=c(n,e,r);if(a=a||null!==t,t)continue e}if(a)return!1}return!0}},9482:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}a.default=e,r&&r.set(e,a);return a}(r(5959)),o=d(r(7842)),i=d(r(7256)),s=r(414),l=r(906),u=d(r(8100)),c=d(r(7222));function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function h(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return o}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=O(e);if(t){var o=O(this).constructor;r=Reflect.construct(a,arguments,o)}else r=a.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}(this,r)}}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R="react-grid-layout",_=!1;try{_=/firefox/i.test(navigator.userAgent)}catch(e){}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(d,e);var t,r,n,c=S(d);function d(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return x(E(e=c.call.apply(c,[this].concat(r))),"state",{activeDrag:null,layout:(0,s.synchronizeLayoutWithChildren)(e.props.layout,e.props.children,e.props.cols,(0,s.compactType)(e.props),e.props.allowOverlap),mounted:!1,oldDragItem:null,oldLayout:null,oldResizeItem:null,droppingDOMNode:null,children:[]}),x(E(e),"dragEnterCounter",0),x(E(e),"onDragStart",(function(t,r,n,a){var o=a.e,i=a.node,l=e.state.layout,u=(0,s.getLayoutItem)(l,t);if(u)return e.setState({oldDragItem:(0,s.cloneLayoutItem)(u),oldLayout:l}),e.props.onDragStart(l,u,u,null,o,i)})),x(E(e),"onDrag",(function(t,r,n,a){var o=a.e,i=a.node,l=e.state.oldDragItem,u=e.state.layout,c=e.props,d=c.cols,p=c.allowOverlap,h=c.preventCollision,f=(0,s.getLayoutItem)(u,t);if(f){var m={w:f.w,h:f.h,x:f.x,y:f.y,placeholder:!0,i:t};u=(0,s.moveElement)(u,f,r,n,!0,h,(0,s.compactType)(e.props),d,p),e.props.onDrag(u,l,f,m,o,i),e.setState({layout:p?u:(0,s.compact)(u,(0,s.compactType)(e.props),d),activeDrag:m})}})),x(E(e),"onDragStop",(function(t,r,n,a){var o=a.e,i=a.node;if(e.state.activeDrag){var l=e.state.oldDragItem,u=e.state.layout,c=e.props,d=c.cols,p=c.preventCollision,h=c.allowOverlap,f=(0,s.getLayoutItem)(u,t);if(f){u=(0,s.moveElement)(u,f,r,n,!0,p,(0,s.compactType)(e.props),d,h),e.props.onDragStop(u,l,f,null,o,i);var m=h?u:(0,s.compact)(u,(0,s.compactType)(e.props),d),g=e.state.oldLayout;e.setState({activeDrag:null,layout:m,oldDragItem:null,oldLayout:null}),e.onLayoutMaybeChanged(m,g)}}})),x(E(e),"onResizeStart",(function(t,r,n,a){var o=a.e,i=a.node,l=e.state.layout,u=(0,s.getLayoutItem)(l,t);u&&(e.setState({oldResizeItem:(0,s.cloneLayoutItem)(u),oldLayout:e.state.layout}),e.props.onResizeStart(l,u,u,null,o,i))})),x(E(e),"onResize",(function(t,r,n,a){var o=a.e,i=a.node,l=e.state,u=l.layout,c=l.oldResizeItem,d=e.props,p=d.cols,h=d.preventCollision,f=d.allowOverlap,v=(0,s.withLayoutItem)(u,t,(function(e){var t;if(h&&!f){var a=(0,s.getAllCollisions)(u,m(m({},e),{},{w:r,h:n})).filter((function(t){return t.i!==e.i}));if(t=a.length>0){var o=1/0,i=1/0;a.forEach((function(t){t.x>e.x&&(o=Math.min(o,t.x)),t.y>e.y&&(i=Math.min(i,t.y))})),Number.isFinite(o)&&(e.w=o-e.x),Number.isFinite(i)&&(e.h=i-e.y)}}return t||(e.w=r,e.h=n),e})),b=g(v,2),y=b[0],w=b[1];if(w){var S={w:w.w,h:w.h,x:w.x,y:w.y,static:!0,i:t};e.props.onResize(y,c,w,S,o,i),e.setState({layout:f?y:(0,s.compact)(y,(0,s.compactType)(e.props),p),activeDrag:S})}})),x(E(e),"onResizeStop",(function(t,r,n,a){var o=a.e,i=a.node,l=e.state,u=l.layout,c=l.oldResizeItem,d=e.props,p=d.cols,h=d.allowOverlap,f=(0,s.getLayoutItem)(u,t);e.props.onResizeStop(u,c,f,null,o,i);var m=h?u:(0,s.compact)(u,(0,s.compactType)(e.props),p),g=e.state.oldLayout;e.setState({activeDrag:null,layout:m,oldResizeItem:null,oldLayout:null}),e.onLayoutMaybeChanged(m,g)})),x(E(e),"onDragOver",(function(t){var r;if(t.preventDefault(),t.stopPropagation(),_&&(null===(r=t.nativeEvent.target)||void 0===r||!r.classList.contains(R)))return!1;var n=e.props,o=n.droppingItem,i=n.onDropDragOver,s=n.margin,u=n.cols,c=n.rowHeight,d=n.maxRows,p=n.width,f=n.containerPadding,g=n.transformScale,v=null==i?void 0:i(t);if(!1===v)return e.state.droppingDOMNode&&e.removeDroppingPlaceholder(),!1;var b=m(m({},o),v),y=e.state.layout,w=t.nativeEvent,S=w.layerX,E=w.layerY,O={left:S/g,top:E/g,e:t};if(e.state.droppingDOMNode){if(e.state.droppingPosition){var x=e.state.droppingPosition,C=x.left,P=x.top;(C!=S||P!=E)&&e.setState({droppingPosition:O})}}else{var I={cols:u,margin:s,maxRows:d,rowHeight:c,containerWidth:p,containerPadding:f||s},T=(0,l.calcXY)(I,E,S,b.w,b.h);e.setState({droppingDOMNode:a.createElement("div",{key:b.i}),droppingPosition:O,layout:[].concat(h(y),[m(m({},b),{},{x:T.x,y:T.y,static:!1,isDraggable:!0})])})}})),x(E(e),"removeDroppingPlaceholder",(function(){var t=e.props,r=t.droppingItem,n=t.cols,a=e.state.layout,o=(0,s.compact)(a.filter((function(e){return e.i!==r.i})),(0,s.compactType)(e.props),n);e.setState({layout:o,droppingDOMNode:null,activeDrag:null,droppingPosition:void 0})})),x(E(e),"onDragLeave",(function(t){t.preventDefault(),t.stopPropagation(),e.dragEnterCounter--,0===e.dragEnterCounter&&e.removeDroppingPlaceholder()})),x(E(e),"onDragEnter",(function(t){t.preventDefault(),t.stopPropagation(),e.dragEnterCounter++})),x(E(e),"onDrop",(function(t){t.preventDefault(),t.stopPropagation();var r=e.props.droppingItem,n=e.state.layout,a=n.find((function(e){return e.i===r.i}));e.dragEnterCounter=0,e.removeDroppingPlaceholder(),e.props.onDrop(n,a,t)})),e}return t=d,n=[{key:"getDerivedStateFromProps",value:function(e,t){var r;return t.activeDrag?null:((0,o.default)(e.layout,t.propsLayout)&&e.compactType===t.compactType?(0,s.childrenEqual)(e.children,t.children)||(r=t.layout):r=e.layout,r?{layout:(0,s.synchronizeLayoutWithChildren)(r,e.children,e.cols,(0,s.compactType)(e),e.allowOverlap),compactType:e.compactType,children:e.children,propsLayout:e.layout}:null)}}],(r=[{key:"componentDidMount",value:function(){this.setState({mounted:!0}),this.onLayoutMaybeChanged(this.state.layout,this.props.layout)}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.children!==e.children||!(0,s.fastRGLPropsEqual)(this.props,e,o.default)||this.state.activeDrag!==t.activeDrag||this.state.mounted!==t.mounted||this.state.droppingPosition!==t.droppingPosition}},{key:"componentDidUpdate",value:function(e,t){if(!this.state.activeDrag){var r=this.state.layout,n=t.layout;this.onLayoutMaybeChanged(r,n)}}},{key:"containerHeight",value:function(){if(this.props.autoSize){var e=(0,s.bottom)(this.state.layout),t=this.props.containerPadding?this.props.containerPadding[1]:this.props.margin[1];return e*this.props.rowHeight+(e-1)*this.props.margin[1]+2*t+"px"}}},{key:"onLayoutMaybeChanged",value:function(e,t){t||(t=this.state.layout),(0,o.default)(t,e)||this.props.onLayoutChange(e)}},{key:"placeholder",value:function(){var e=this.state.activeDrag;if(!e)return null;var t=this.props,r=t.width,n=t.cols,o=t.margin,i=t.containerPadding,s=t.rowHeight,l=t.maxRows,c=t.useCSSTransforms,d=t.transformScale;return a.createElement(u.default,{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,className:"react-grid-placeholder",containerWidth:r,cols:n,margin:o,containerPadding:i||o,maxRows:l,rowHeight:s,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:c,transformScale:d},a.createElement("div",null))}},{key:"processGridItem",value:function(e,t){if(e&&e.key){var r=(0,s.getLayoutItem)(this.state.layout,String(e.key));if(!r)return null;var n=this.props,o=n.width,i=n.cols,l=n.margin,c=n.containerPadding,d=n.rowHeight,p=n.maxRows,h=n.isDraggable,f=n.isResizable,m=n.isBounded,g=n.useCSSTransforms,v=n.transformScale,b=n.draggableCancel,y=n.draggableHandle,w=n.resizeHandles,S=n.resizeHandle,E=this.state,O=E.mounted,x=E.droppingPosition,R="boolean"==typeof r.isDraggable?r.isDraggable:!r.static&&h,_="boolean"==typeof r.isResizable?r.isResizable:!r.static&&f,C=r.resizeHandles||w,P=R&&m&&!1!==r.isBounded;return a.createElement(u.default,{containerWidth:o,cols:i,margin:l,containerPadding:c||l,maxRows:p,rowHeight:d,cancel:b,handle:y,onDragStop:this.onDragStop,onDragStart:this.onDragStart,onDrag:this.onDrag,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,isDraggable:R,isResizable:_,isBounded:P,useCSSTransforms:g&&O,usePercentages:!O,transformScale:v,w:r.w,h:r.h,x:r.x,y:r.y,i:r.i,minH:r.minH,minW:r.minW,maxH:r.maxH,maxW:r.maxW,static:r.static,droppingPosition:t?x:void 0,resizeHandles:C,resizeHandle:S},e)}}},{key:"render",value:function(){var e=this,t=this.props,r=t.className,n=t.style,o=t.isDroppable,l=t.innerRef,u=(0,i.default)(R,r),c=m({height:this.containerHeight()},n);return a.createElement("div",{ref:l,className:u,style:c,onDrop:o?this.onDrop:s.noop,onDragLeave:o?this.onDragLeave:s.noop,onDragEnter:o?this.onDragEnter:s.noop,onDragOver:o?this.onDragOver:s.noop},a.Children.map(this.props.children,(function(t){return e.processGridItem(t)})),o&&this.state.droppingDOMNode&&this.processGridItem(this.state.droppingDOMNode,!0),this.placeholder())}}])&&y(t.prototype,r),n&&y(t,n),Object.defineProperty(t,"prototype",{writable:!1}),d}(a.Component);t.default=C,x(C,"displayName","ReactGridLayout"),x(C,"propTypes",c.default),x(C,"defaultProps",{autoSize:!0,cols:12,className:"",style:{},draggableHandle:"",draggableCancel:"",containerPadding:null,rowHeight:150,maxRows:1/0,layout:[],margin:[10,10],isBounded:!1,isDraggable:!0,isResizable:!0,allowOverlap:!1,isDroppable:!1,useCSSTransforms:!0,transformScale:1,verticalCompact:!0,compactType:"vertical",preventCollision:!1,droppingItem:{i:"__dropping-elem__",h:1,w:1},resizeHandles:["se"],onLayoutChange:s.noop,onDragStart:s.noop,onDrag:s.noop,onDragStop:s.noop,onResizeStart:s.noop,onResize:s.noop,onResizeStop:s.noop,onDrop:s.noop,onDropDragOver:s.noop})},9524:(e,t,r)=>{const n=Symbol("SemVer ANY");class a{static get ANY(){return n}constructor(e,t){if(t=o(t),e instanceof a){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),u("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===n?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(e){const t=this.options.loose?i[s.COMPARATORLOOSE]:i[s.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new c(r[2],this.options.loose):this.semver=n}toString(){return this.value}test(e){if(u("Comparator.test",e,this.options.loose),this.semver===n||e===n)return!0;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}return l(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof a))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new d(e.value,t).test(this.value):""===e.operator?""===e.value||new d(this.value,t).test(e.semver):(!(t=o(t)).includePrerelease||"<0.0.0-0"!==this.value&&"<0.0.0-0"!==e.value)&&(!(!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&(!(!this.operator.startsWith(">")||!e.operator.startsWith(">"))||(!(!this.operator.startsWith("<")||!e.operator.startsWith("<"))||(!(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))||(!!(l(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))||!!(l(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))))))}}e.exports=a;const o=r(7095),{safeRe:i,t:s}=r(6850),l=r(3811),u=r(9796),c=r(7944),d=r(8395)},9534:(e,t,r)=>{const n=r(5906),{MAX_LENGTH:a,MAX_SAFE_INTEGER:o}=r(6484),{safeRe:i,t:s}=r(2728),l=r(8029),{compareIdentifiers:u}=r(410);class c{constructor(e,t){if(t=l(t),e instanceof c){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>a)throw new TypeError(`version is longer than ${a} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?i[s.LOOSE]:i[s.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<o)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof c)){if("string"==typeof e&&e===this.version)return 0;e=new c(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof c||(e=new c(e,this.options)),u(this.major,e.major)||u(this.minor,e.minor)||u(this.patch,e.patch)}comparePre(e){if(e instanceof c||(e=new c(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],a=e.prerelease[t];if(n("prerelease compare",t,r,a),void 0===r&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===r)return-1;if(r!==a)return u(r,a)}while(++t)}compareBuild(e){e instanceof c||(e=new c(e,this.options));let t=0;do{const r=this.build[t],a=e.build[t];if(n("build compare",t,r,a),void 0===r&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===r)return-1;if(r!==a)return u(r,a)}while(++t)}inc(e,t,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(!t&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===u(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=c},9613:(e,t,r)=>{const n=r(5860);e.exports=(e,t)=>{const r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}},9618:(e,t,r)=>{const n=r(9534);e.exports=(e,t,r=!1)=>{if(e instanceof n)return e;try{return new n(e,t)}catch(e){if(!r)return null;throw e}}},9630:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},9796:e=>{const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},9954:(e,t,r)=>{"use strict";t.__esModule=!0,t.cloneElement=function(e,t){t.style&&e.props.style&&(t.style=i(i({},e.props.style),t.style));t.className&&e.props.className&&(t.className=e.props.className+" "+t.className);return a.default.cloneElement(e,t)};var n,a=(n=r(5959))&&n.__esModule?n:{default:n};function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}}},h={};function f(e){var t=h[e];if(void 0!==t)return t.exports;var r=h[e]={id:e,loaded:!1,exports:{}};return p[e](r,r.exports,f),r.loaded=!0,r.exports}f.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return f.d(t,{a:t}),t},d=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,f.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var r=Object.create(null);f.r(r);var n={};c=c||[null,d({}),d([]),d(d)];for(var a=2&t&&e;"object"==typeof a&&!~c.indexOf(a);a=d(a))Object.getOwnPropertyNames(a).forEach((t=>n[t]=()=>e[t]));return n.default=()=>e,f.d(r,n),r},f.d=(e,t)=>{for(var r in t)f.o(t,r)&&!f.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},f.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),f.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),f.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},f.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),f.p="public/plugins/dpm-finder/";var m={};return(()=>{"use strict";f.r(m),f.d(m,{plugin:()=>Xv});var e=f(1308),t=f.n(e);f.p=t()&&t().uri?t().uri.slice(0,t().uri.lastIndexOf("/")+1):"public/plugins/dpm-finder/";var r=f(7781),n=f(5959),a=f.t(n,2),o=f.n(n),i=f(8531),s=f(2007);function l(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){u(e,t,r[t])}))}return e}function d(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}var p=f(6089),h=f(1159),g=Object.defineProperty,v=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,w=(e,t,r)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function S(e,t,n){const a=((e,t)=>{for(var r in t||(t={}))b.call(t,r)&&w(e,r,t[r]);if(v)for(var r of v(t))y.call(t,r)&&w(e,r,t[r]);return e})({},t);if(n)for(const e of Object.keys(a))n.includes(e)||delete a[e];return r.urlUtil.renderUrl(r.locationUtil.assureBaseUrl(e),a)}function E(e){const t=(0,h.useParams)(),r=(0,h.useLocation)();return{params:t,isExact:null!==(0,h.matchPath)({path:e,caseSensitive:!1,end:!0},r.pathname),path:r.pathname,url:r.pathname}}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const O=new Map;var x=f(1269);const R={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let _;const C=new Uint8Array(16);function P(){if(!_&&(_="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!_))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _(C)}const I=[];for(let e=0;e<256;++e)I.push((e+256).toString(16).slice(1));function T(e,t=0){return I[e[t+0]]+I[e[t+1]]+I[e[t+2]]+I[e[t+3]]+"-"+I[e[t+4]]+I[e[t+5]]+"-"+I[e[t+6]]+I[e[t+7]]+"-"+I[e[t+8]]+I[e[t+9]]+"-"+I[e[t+10]]+I[e[t+11]]+I[e[t+12]]+I[e[t+13]]+I[e[t+14]]+I[e[t+15]]}const D=function(e,t,r){if(R.randomUUID&&!t&&!e)return R.randomUUID();const n=(e=e||{}).random||(e.rng||P)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return T(n)};var A=Object.defineProperty,k=Object.defineProperties,j=Object.getOwnPropertyDescriptors,L=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,$=(e,t,r)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const V=o().memo((function(e){var t,r=e,{model:a}=r,i=((e,t)=>{var r={};for(var n in e)M.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&L)for(var n of L(e))t.indexOf(n)<0&&N.call(e,n)&&(r[n]=e[n]);return r})(r,["model"]);const s=null!=(t=a.constructor.Component)?t:F,[l,u]=(0,n.useState)(0);return(0,n.useEffect)((()=>{const e=a.activate();return u((e=>e+1)),e}),[a]),a.isActive||a.renderBeforeActivation?o().createElement(s,(c=((e,t)=>{for(var r in t||(t={}))M.call(t,r)&&$(e,r,t[r]);if(L)for(var r of L(t))N.call(t,r)&&$(e,r,t[r]);return e})({},i),k(c,j({model:a})))):null;var c}));function F(e){return null}class B extends r.BusEventWithPayload{}B.type="scene-object-state-change";class z extends r.BusEventWithPayload{}z.type="scene-object-user-action";var U,W=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};class H{constructor(e){var t,r,n,a;((e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)})(this,U,void 0),n=e,W(t=this,r=U,"write to private field"),a?a.call(t,n):r.set(t,n)}resolve(){return W(e=this,t=U,"read from private field"),r?r.call(e):t.get(e);var e,t,r}}U=new WeakMap;var G=Object.defineProperty,q=Object.getOwnPropertySymbols,Q=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable,Y=(e,t,r)=>t in e?G(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,K=(e,t)=>{for(var r in t||(t={}))Q.call(t,r)&&Y(e,r,t[r]);if(q)for(var r of q(t))X.call(t,r)&&Y(e,r,t[r]);return e};class Z{constructor(e){this._isActive=!1,this._activationHandlers=[],this._deactivationHandlers=new Map,this._subs=new x.Subscription,this._refCount=0,this._renderBeforeActivation=!1,e.key||(e.key=D()),this._events=new r.EventBusSrv,this._state=Object.freeze(e),this._setParent(this._state)}get state(){return this._state}get isActive(){return this._isActive}get renderBeforeActivation(){return this._renderBeforeActivation}get parent(){return this._parent}get variableDependency(){return this._variableDependency}get urlSync(){return this._urlSync}get Component(){return V}_setParent(e){ee(e,(e=>{e._parent&&e._parent!==this&&console.warn("SceneObject already has a parent set that is different from the new parent. You cannot share the same SceneObject instance in multiple scenes or in multiple different places of the same scene graph. Use SceneObject.clone() to duplicate a SceneObject or store a state key reference and use sceneGraph.findObject to locate it.",e,this),e._parent=this}))}clearParent(){this._parent=void 0}subscribeToState(e){return this._events.subscribe(B,(t=>{t.payload.changedObject===this&&e(t.payload.newState,t.payload.prevState)}))}subscribeToEvent(e,t){return this._events.subscribe(e,t)}setState(e){const t=this._state,r=K(K({},this._state),e);this._state=Object.freeze(r),this._setParent(e),this._handleActivationOfChangedStateProps(t,r),this.publishEvent(new B({prevState:t,newState:r,partialUpdate:e,changedObject:this}),!0)}_handleActivationOfChangedStateProps(e,t){this.isActive&&(e.$behaviors!==t.$behaviors&&this._handleChangedBehaviors(e.$behaviors,t.$behaviors),e.$data!==t.$data&&this._handleChangedStateActivation(e.$data,t.$data),e.$variables!==t.$variables&&this._handleChangedStateActivation(e.$variables,t.$variables),e.$timeRange!==t.$timeRange&&this._handleChangedStateActivation(e.$timeRange,t.$timeRange))}_handleChangedStateActivation(e,t){if(e){const t=this._deactivationHandlers.get(e);t&&(t(),this._deactivationHandlers.delete(e))}t&&this._deactivationHandlers.set(t,t.activate())}_handleChangedBehaviors(e,t){if(e)for(const r of e)if(!t||!t.includes(r)){const e=this._deactivationHandlers.get(r);e&&(e(),this._deactivationHandlers.delete(r))}if(t)for(const r of t)e&&e.includes(r)||this._activateBehavior(r)}publishEvent(e,t){this._events.publish(e),t&&this.parent&&this.parent.publishEvent(e,t)}getRoot(){return this._parent?this._parent.getRoot():this}_internalActivate(){this._isActive=!0;const{$data:e,$variables:t,$timeRange:r,$behaviors:n}=this.state;if(this._activationHandlers.forEach((e=>{const t=e();t&&this._deactivationHandlers.set(t,t)})),r&&!r.isActive&&this._deactivationHandlers.set(r,r.activate()),t&&!t.isActive&&this._deactivationHandlers.set(t,t.activate()),e&&!e.isActive&&this._deactivationHandlers.set(e,e.activate()),n)for(const e of n)this._activateBehavior(e)}_activateBehavior(e){if(e instanceof Z)this._deactivationHandlers.set(e,e.activate());else if("function"==typeof e){const t=e(this);t&&this._deactivationHandlers.set(e,t)}}activate(){this.isActive||this._internalActivate(),this._refCount++;let e=!1;return()=>{if(this._refCount--,e){throw new Error("SceneObject cancelation handler returned by activate() called a second time")}e=!0,0===this._refCount&&this._internalDeactivate()}}_internalDeactivate(){this._isActive=!1;for(let e of this._deactivationHandlers.values())e();this._deactivationHandlers.clear(),this._events.removeAllListeners(),this._subs.unsubscribe(),this._subs=new x.Subscription}useState(){return J(this)}forceRender(){this.setState({})}clone(e){return function(e,t){const r=le(e.state,t);return new e.constructor(r)}(this,e)}addActivationHandler(e){this._activationHandlers.push(e)}forEachChild(e){ee(this.state,e)}getRef(){return this._ref||(this._ref=new H(this)),this._ref}toJSON(){return{type:Object.getPrototypeOf(this).constructor.name,isActive:this.isActive,state:this.state}}}function J(e,t){var r;const[a,o]=(0,n.useState)(e.state),i=e.state,s=null!=(r=null==t?void 0:t.shouldActivateOrKeepAlive)&&r;return(0,n.useEffect)((()=>{let t;s&&(t=e.activate());const r=e.subscribeToState((e=>{o(e)}));return e.state!==i&&o(e.state),()=>{r.unsubscribe(),t&&t()}}),[e,s]),e.state}function ee(e,t){for(const r of Object.values(e))if(r instanceof Z&&t(r),Array.isArray(r))for(const e of r)e instanceof Z&&t(e)}var te=f(3241),re=Object.defineProperty,ne=Object.getOwnPropertySymbols,ae=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable,ie=(e,t,r)=>t in e?re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,se=(e,t)=>{for(var r in t||(t={}))ae.call(t,r)&&ie(e,r,t[r]);if(ne)for(var r of ne(t))oe.call(t,r)&&ie(e,r,t[r]);return e};function le(e,t){const r=se({},e);Object.assign(r,t);for(const e in r){if(t&&void 0!==t[e])continue;const n=r[e];if(n instanceof H)console.warn("Cloning object with SceneObjectRef");else if(n instanceof Z)r[e]=n.clone();else if(Array.isArray(n)){const t=[];for(const e of n)e instanceof Z?t.push(e.clone()):"object"==typeof e?t.push((0,te.cloneDeep)(e)):t.push(e);r[e]=t}else r[e]="object"==typeof n?(0,te.cloneDeep)(n):n}return r}function ue(e,t){let r,n=e;for(;n&&!r;)r=t(n),n=n.parent;return r}r.DataSourceApi;const ce=new Map;function de(e,t){const r=t.state.$variables;if(!r)return t.parent?de(e,t.parent):null;const n=r.getByName(e);return n||(t.parent?de(e,t.parent):null)}function pe(e,t,...r){let n=!1;"undefined"!=typeof window&&(n="true"===localStorage.getItem("grafana.debug.scenes"))}new WeakMap,new WeakMap,new WeakMap,new WeakMap;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function he(e){let t=e;for(;t;){if(t.state.$behaviors)for(const e of t.state.$behaviors)if("isQueryController"in e)return e;t=t.parent}}new WeakMap,new WeakMap;var fe=(e=>(e.Actions="actions",e.Auto="auto",e.BasicGauge="basic",e.ColorBackground="color-background",e.ColorBackgroundSolid="color-background-solid",e.ColorText="color-text",e.Custom="custom",e.DataLinks="data-links",e.Gauge="gauge",e.GradientGauge="gradient-gauge",e.Image="image",e.JSONView="json-view",e.LcdGauge="lcd-gauge",e.Sparkline="sparkline",e))(fe||{});var me=(e=>(e.CSV="csv",e.Date="date",e.Distributed="distributed",e.DoubleQuote="doublequote",e.Glob="glob",e.HTML="html",e.JSON="json",e.Lucene="lucene",e.PercentEncode="percentencode",e.Pipe="pipe",e.QueryParam="queryparam",e.Raw="raw",e.Regex="regex",e.SQLString="sqlstring",e.SingleQuote="singlequote",e.Text="text",e.UriEncode="uriencode",e))(me||{});fe.Auto;var ge=(e=>(e.NotStarted="NotStarted",e.Loading="Loading",e.Streaming="Streaming",e.Done="Done",e.Error="Error",e))(ge||{}),ve=Object.defineProperty,be=Object.getOwnPropertySymbols,ye=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable,Se=(e,t,r)=>t in e?ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Ee={state:ge.Done,series:[],timeRange:(0,r.getDefaultTimeRange)()};class Oe{constructor(e,t){this._sceneObject=e,this._nextChangeShouldAddHistoryStep=!1,this._keys=t.keys}getKeys(){return"function"==typeof this._keys?this._keys():this._keys}getUrlState(){return this._sceneObject.getUrlState()}updateFromUrl(e){this._sceneObject.updateFromUrl(e)}shouldCreateHistoryStep(e){return this._nextChangeShouldAddHistoryStep}performBrowserHistoryAction(e){this._nextChangeShouldAddHistoryStep=!0,e(),this._nextChangeShouldAddHistoryStep=!1}}const xe=/^\d+[yYmMsSwWhHdD]$/;function Re(e){if("string"!=typeof e)return null;if(-1!==e.indexOf("now"))return e;if(xe.test(e))return e;if(8===e.length){const t=(0,r.toUtc)(e,"YYYYMMDD");if(t.isValid())return t.toISOString()}else if(15===e.length){const t=(0,r.toUtc)(e,"YYYYMMDDTHHmmss");if(t.isValid())return t.toISOString()}else if(19===e.length){const t=(0,r.toUtc)(e,"YYYY-MM-DD HH:mm:ss");if(t.isValid())return t.toISOString()}else if(24===e.length){return(0,r.toUtc)(e).toISOString()}const t=parseInt(e,10);return isNaN(t)?null:(0,r.toUtc)(t).toISOString()}function _e(e,t,n,a,o,i){const s=o&&"now"===t,l=Date.now();i&&function(e){e!==Ce&&(Ce=e,(0,r.setWeekStart)(e))}(i);const u=(e,t)=>r.dateMath.toDateTime?r.dateMath.toDateTime(e,t):r.dateMath.parse(e,t.roundUp,t.timezone,t.fiscalYearStartMonth);return{to:u(s?"now-"+o:t,{roundUp:!0,timezone:n,fiscalYearStartMonth:a,now:l}),from:u(e,{roundUp:!1,timezone:n,fiscalYearStartMonth:a,now:l}),raw:{from:e,to:t}}}let Ce;function Pe(e,t,n){if((0,r.isDateTime)(e))return e.isValid();if(r.dateMath.isMathString(e))return r.dateMath.isValid(e);return(0,r.dateTimeParse)(e,{roundUp:t,timeZone:n}).isValid()}var Ie=Object.defineProperty,Te=Object.getOwnPropertySymbols,De=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable,ke=(e,t,r)=>t in e?Ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class je extends Z{constructor(e={}){var t;const n=e.from&&Pe(e.from)?e.from:"now-6h",a=e.to&&Pe(e.to)?e.to:"now",o=e.timeZone;super(((e,t)=>{for(var r in t||(t={}))De.call(t,r)&&ke(e,r,t[r]);if(Te)for(var r of Te(t))Ae.call(t,r)&&ke(e,r,t[r]);return e})({from:n,to:a,timeZone:o,value:_e(n,a,o||(0,r.getTimeZone)(),e.fiscalYearStartMonth,e.UNSAFE_nowDelay,e.weekStart),refreshOnActivate:null!=(t=e.refreshOnActivate)?t:{percent:10}},e)),this._urlSync=new Oe(this,{keys:["from","to","timezone","time","time.window"]}),this.onTimeRangeChange=e=>{const t={};if("string"==typeof e.raw.from?t.from=e.raw.from:t.from=e.raw.from.toISOString(),"string"==typeof e.raw.to?t.to=e.raw.to:t.to=e.raw.to.toISOString(),t.value=_e(t.from,t.to,this.getTimeZone(),this.state.fiscalYearStartMonth,this.state.UNSAFE_nowDelay,this.state.weekStart),t.from!==this.state.from||t.to!==this.state.to){const e=he(this);null==e||e.startProfile("SceneTimeRange"),this._urlSync.performBrowserHistoryAction((()=>{this.setState(t)}))}},this.onTimeZoneChange=e=>{this._urlSync.performBrowserHistoryAction((()=>{this.setState({timeZone:e})}))},this.onRefresh=()=>{this.refreshRange(0),this.publishEvent(new i.RefreshEvent,!0)},this.addActivationHandler(this._onActivate.bind(this))}_onActivate(){if(!this.state.timeZone){const e=this.getTimeZoneSource();e!==this&&this._subs.add(e.subscribeToState(((e,t)=>{void 0!==e.timeZone&&e.timeZone!==t.timeZone&&this.refreshRange(0)})))}return r.rangeUtil.isRelativeTimeRange(this.state.value.raw)&&this.refreshIfStale(),()=>{this.state.weekStart&&(0,r.setWeekStart)(i.config.bootData.user.weekStart)}}refreshIfStale(){var e,t,r,n;let a;void 0!==(null==(t=null==(e=this.state)?void 0:e.refreshOnActivate)?void 0:t.percent)&&(a=this.calculatePercentOfInterval(this.state.refreshOnActivate.percent)),void 0!==(null==(n=null==(r=this.state)?void 0:r.refreshOnActivate)?void 0:n.afterMs)&&(a=Math.min(this.state.refreshOnActivate.afterMs,null!=a?a:1/0)),void 0!==a&&this.refreshRange(a)}getTimeZoneSource(){if(!this.parent||!this.parent.parent)return this;const e=ue(this.parent.parent,(e=>{if(e.state.$timeRange&&e.state.$timeRange.state.timeZone)return e.state.$timeRange}));return e||this}refreshRange(e){var t;const n=_e(this.state.from,this.state.to,null!=(t=this.state.timeZone)?t:(0,r.getTimeZone)(),this.state.fiscalYearStartMonth,this.state.UNSAFE_nowDelay,this.state.weekStart);n.to.diff(this.state.value.to,"milliseconds")>=e&&this.setState({value:n})}calculatePercentOfInterval(e){const t=this.state.value.to.diff(this.state.value.from,"milliseconds");return Math.ceil(t/e)}getTimeZone(){if(this.state.timeZone)return this.state.timeZone;const e=this.getTimeZoneSource();return e!==this?e.state.timeZone:(0,r.getTimeZone)()}getUrlState(){const e=i.locationService.getSearchObject(),t={from:this.state.from,to:this.state.to,timezone:this.getTimeZone()};return e.time&&e["time.window"]&&(t.time=null,t["time.window"]=null),t}updateFromUrl(e){var t,n,a;const o={};let i=Re(e.from),s=Re(e.to);if(e.time&&e["time.window"]){const t=function(e,t){const n=isNaN(Date.parse(e))?parseInt(e,10):Date.parse(e);let a;a=t.match(/^\d+$/)&&parseInt(t,10)?parseInt(t,10):r.rangeUtil.intervalToMs(t);return{from:(0,r.toUtc)(n-a/2).toISOString(),to:(0,r.toUtc)(n+a/2).toISOString()}}(Array.isArray(e.time)?e.time[0]:e.time,Array.isArray(e["time.window"])?e["time.window"][0]:e["time.window"]);t.from&&Pe(t.from)&&(i=t.from),t.to&&Pe(t.to)&&(s=t.to)}if(i&&Pe(i)&&(o.from=i),s&&Pe(s)&&(o.to=s),"string"==typeof e.timezone&&(o.timeZone=""!==e.timezone?e.timezone:void 0),0!==Object.keys(o).length)return o.value=_e(null!=(t=o.from)?t:this.state.from,null!=(n=o.to)?n:this.state.to,null!=(a=o.timeZone)?a:this.getTimeZone(),this.state.fiscalYearStartMonth,this.state.UNSAFE_nowDelay,this.state.weekStart),this.setState(o)}}const Le=new class extends Z{constructor(e){super(((e,t)=>{for(var r in t||(t={}))ye.call(t,r)&&Se(e,r,t[r]);if(be)for(var r of be(t))we.call(t,r)&&Se(e,r,t[r]);return e})({data:Ee},e))}getResultsStream(){const e={origin:this,data:this.state.data};return(0,x.of)(e)}},Me=new je;const Ne=new class extends Z{constructor(){super({variables:[]})}getByName(e){}isVariableLoadingOrWaitingToUpdate(e){return!1}};function $e(e){var t;return null!=(t=ue(e,(e=>e.state.$timeRange)))?t:Me}class Ve extends r.BusEventWithPayload{}function Fe(e){return"object"==typeof e&&"formatter"in e}Ve.type="scene-variable-changed-value";let Be,ze={};function Ue(e){const t=ze[e];return t||(ze[e]=(0,te.property)(e))}class We{constructor(e,t){this.state={name:e,value:t,type:"scopedvar"}}getValue(e){let{value:t}=this.state,r=t.value;return r=e?Ue(e)(t.value):t.value,"string"===r||"number"===r||"boolean"===r?r:String(r)}getValueText(){const{value:e}=this.state;return null!=e.text?String(e.text):String(e)}}const He=new r.Registry((()=>[{id:me.Lucene,name:"Lucene",description:"Values are lucene escaped and multi-valued variables generate an OR expression",formatter:e=>{if("string"==typeof e)return Ge(e);if(Array.isArray(e)){if(0===e.length)return"__empty__";return"("+(0,te.map)(e,(e=>'"'+Ge(e)+'"')).join(" OR ")+")"}return Ge(`${e}`)}},{id:me.Raw,name:"raw",description:"Keep value as is",formatter:e=>String(e)},{id:me.Regex,name:"Regex",description:"Values are regex escaped and multi-valued variables generate a (<value>|<value>) expression",formatter:e=>{if("string"==typeof e)return(0,r.escapeRegex)(e);if(Array.isArray(e)){const t=e.map((e=>"string"==typeof e?(0,r.escapeRegex)(e):(0,r.escapeRegex)(String(e))));return 1===t.length?t[0]:"("+t.join("|")+")"}return(0,r.escapeRegex)(`${e}`)}},{id:me.Pipe,name:"Pipe",description:"Values are separated by | character",formatter:e=>"string"==typeof e?e:Array.isArray(e)?e.join("|"):`${e}`},{id:me.Distributed,name:"Distributed",description:"Multiple values are formatted like variable=value",formatter:(e,t,r)=>"string"==typeof e?e:Array.isArray(e)?(e=(0,te.map)(e,((e,t)=>0!==t?r.state.name+"="+e:e))).join(","):`${e}`},{id:me.CSV,name:"Csv",description:"Comma-separated values",formatter:e=>"string"==typeof e?e:(0,te.isArray)(e)?e.join(","):String(e)},{id:me.HTML,name:"HTML",description:"HTML escaping of values",formatter:e=>"string"==typeof e?r.textUtil.escapeHtml(e):(0,te.isArray)(e)?r.textUtil.escapeHtml(e.join(", ")):r.textUtil.escapeHtml(String(e))},{id:me.JSON,name:"JSON",description:"JSON stringify value",formatter:e=>"string"==typeof e?e:JSON.stringify(e)},{id:me.PercentEncode,name:"Percent encode",description:"Useful for URL escaping values",formatter:e=>(0,te.isArray)(e)?qe("{"+e.join(",")+"}"):qe(e)},{id:me.SingleQuote,name:"Single quote",description:"Single quoted values",formatter:e=>{const t=new RegExp("'","g");if((0,te.isArray)(e))return(0,te.map)(e,(e=>`'${(0,te.replace)(e,t,"\\'")}'`)).join(",");let r="string"==typeof e?e:String(e);return`'${(0,te.replace)(r,t,"\\'")}'`}},{id:me.DoubleQuote,name:"Double quote",description:"Double quoted values",formatter:e=>{const t=new RegExp('"',"g");if((0,te.isArray)(e))return(0,te.map)(e,(e=>`"${(0,te.replace)(e,t,'\\"')}"`)).join(",");let r="string"==typeof e?e:String(e);return`"${(0,te.replace)(r,t,'\\"')}"`}},{id:me.SQLString,name:"SQL string",description:"SQL string quoting and commas for use in IN statements and other scenarios",formatter:Ze},{id:me.Date,name:"Date",description:"Format date in different ways",formatter:(e,t)=>{var n;let a=NaN;if("number"==typeof e?a=e:"string"==typeof e&&(a=parseInt(e,10)),isNaN(a))return"NaN";const o=null!=(n=t[0])?n:"iso";switch(o){case"ms":return String(e);case"seconds":return`${Math.round(a/1e3)}`;case"iso":return(0,r.dateTime)(a).toISOString();default:return(t||[]).length>1?(0,r.dateTime)(a).format(t.join(":")):(0,r.dateTime)(a).format(o)}}},{id:me.Glob,name:"Glob",description:"Format multi-valued variables using glob syntax, example {value1,value2}",formatter:e=>(0,te.isArray)(e)&&e.length>1?"{"+e.join(",")+"}":String(e)},{id:me.Text,name:"Text",description:"Format variables in their text representation. Example in multi-variable scenario A + B + C.",formatter:(e,t,r)=>r.getValueText?r.getValueText():String(e)},{id:me.QueryParam,name:"Query parameter",description:"Format variables as URL parameters. Example in multi-variable scenario A + B + C => var-foo=A&var-foo=B&var-foo=C.",formatter:(e,t,n)=>{if(n.urlSync){const e=n.urlSync.getUrlState();return r.urlUtil.toUrlParams(e)}return Array.isArray(e)?e.map((e=>Ye(n.state.name,e))).join("&"):Ye(n.state.name,e)}},{id:me.UriEncode,name:"Percent encode as URI",description:"Useful for URL escaping values, taking into URI syntax characters",formatter:e=>(0,te.isArray)(e)?Qe("{"+e.join(",")+"}"):Qe(e)}]));function Ge(e){return!1===isNaN(+e)?e:e.replace(/([\!\*\+\-\=<>\s\&\|\(\)\[\]\{\}\^\~\?\:\\/"])/g,"\\$1")}function qe(e){return"object"==typeof e&&(e=String(e)),Xe(encodeURIComponent(e))}const Qe=e=>Xe(encodeURI(String(e))),Xe=e=>e.replace(/[!'()*]/g,(e=>"%"+e.charCodeAt(0).toString(16).toUpperCase()));function Ye(e,t){return`var-${e}=${qe(t)}`}const Ke={"'":"''",'"':'\\"'};function Ze(e){const t=new RegExp("'|\"","g");if((0,te.isArray)(e))return(0,te.map)(e,(e=>`'${(0,te.replace)(e,t,(e=>{var t;return null!=(t=Ke[e])?t:""}))}'`)).join(",");let r="string"==typeof e?e:String(e);return`'${(0,te.replace)(r,t,(e=>{var t;return null!=(t=Ke[e])?t:""}))}'`}const Je="All",et="$__all",tt="$__auto",rt=/\$(\w+)|\[\[(\w+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g,nt="__searchFilter";class at{constructor(e){this._value=e}formatter(){return this._value}}class ot{constructor(e,t){this.state={name:e,type:"time_macro"},this._sceneObject=t}getValue(){const e=$e(this._sceneObject);return"__from"===this.state.name?e.state.value.from.valueOf():e.state.value.to.valueOf()}getValueText(){const e=$e(this._sceneObject);return"__from"===this.state.name?(0,r.dateTimeFormat)(e.state.value.from,{timeZone:e.getTimeZone()}):(0,r.dateTimeFormat)(e.state.value.to,{timeZone:e.getTimeZone()})}}class it{constructor(e,t,r){this.state={name:e,type:"time_macro",match:r},this._sceneObject=t}getValue(){var e;const t=zu(this._sceneObject);if(t){const r=null==(e=t.state.data)?void 0:e.request;return r?"__interval_ms"===this.state.name?r.intervalMs:r.interval:this.state.match}return this.state.match}}function st(e,t){e.setState(t)}function lt(){return i.useLocationService?(0,i.useLocationService)():i.locationService}class ut extends Z{constructor(){super(...arguments),this._urlSync=new ct(this)}validateAndUpdate(){return this.getValueOptions({}).pipe((0,x.map)((e=>(this.updateValueGivenNewOptions(e),{}))))}onCancel(){this.setStateHelper({loading:!1});const e=this.parent;null==e||e.cancel(this)}updateValueGivenNewOptions(e){const{value:t,text:r,options:n}=this.state,a=this.getStateUpdateGivenNewOptions(e,t,r);this.interceptStateUpdateAfterValidation(a),this.setStateHelper(a),(a.value!==t||a.text!==r||this.hasAllValue()&&!(0,te.isEqual)(e,n))&&this.publishEvent(new Ve(this),!0)}getStateUpdateGivenNewOptions(e,t,r){const n={options:e,loading:!1,value:t,text:r};if(0===e.length)return this.state.defaultToAll||this.state.includeAll?(n.value=et,n.text=Je):this.state.isMulti?(n.value=[],n.text=[]):(n.value="",n.text=""),n;if(this.hasAllValue())return this.state.includeAll?n.text=Je:(n.value=e[0].value,n.text=e[0].label,this.state.isMulti&&(n.value=[n.value],n.text=[n.text])),n;if(this.state.isMulti){const a=(Array.isArray(t)?t:[t]).filter((t=>e.find((e=>e.value===t)))),o=a.map((t=>e.find((e=>e.value===t)).label));if(0===a.length){const t=this.getDefaultMultiState(e);n.value=t.value,n.text=t.text}else(0,te.isEqual)(a,t)||(n.value=a),(0,te.isEqual)(o,r)||(n.text=o);return n}let a=function(e,t,r){let n;for(const a of r){if(a.value===e)return a;a.label===t&&(n=a)}return n}(t,r,e);if(a)n.text=a.label,n.value=a.value;else{const t=this.getDefaultSingleState(e);n.value=t.value,n.text=t.text}return n}interceptStateUpdateAfterValidation(e){const t=e.value===et&&this.state.text===Je;this.skipNextValidation&&e.value!==this.state.value&&e.text!==this.state.text&&!t&&(e.value=this.state.value,e.text=this.state.text),this.skipNextValidation=!1}getValue(){return this.hasAllValue()?this.state.allValue?new dt(this.state.allValue,this):this.state.options.map((e=>e.value)):this.state.value}getValueText(){return this.hasAllValue()?Je:Array.isArray(this.state.text)?this.state.text.join(" + "):String(this.state.text)}hasAllValue(){const e=this.state.value;return e===et||Array.isArray(e)&&e[0]===et}getDefaultMultiState(e){return this.state.defaultToAll?{value:[et],text:[Je]}:e.length>0?{value:[e[0].value],text:[e[0].label]}:{value:[],text:[]}}getDefaultSingleState(e){return this.state.defaultToAll?{value:et,text:Je}:e.length>0?{value:e[0].value,text:e[0].label}:{value:"",text:""}}changeValueTo(e,t,r=!1){var n,a;if(e===this.state.value&&t===this.state.text)return;if(t||(t=Array.isArray(e)?e.map((e=>this.findLabelTextForValue(e))):this.findLabelTextForValue(e)),Array.isArray(e)){if(0===e.length){const r=this.getDefaultMultiState(this.state.options);e=r.value,t=r.text}e[e.length-1]===et?(e=[et],t=[Je]):e[0]===et&&e.length>1&&(e.shift(),Array.isArray(t)&&t.shift())}if((0,te.isEqual)(e,this.state.value)&&(0,te.isEqual)(t,this.state.text))return;const o=()=>this.setStateHelper({value:e,text:t,loading:!1});r?null==(a=(n=this._urlSync).performBrowserHistoryAction)||a.call(n,o):o(),this.publishEvent(new Ve(this),!0)}findLabelTextForValue(e){if(e===et)return Je;const t=this.state.options.find((t=>t.value===e));if(t)return t.label;const r=this.state.options.find((t=>t.label===e));return r?r.label:e}setStateHelper(e){st(this,e)}getOptionsForSelect(e=!0){let t=this.state.options;if(this.state.includeAll&&(t=[{value:et,label:Je},...t]),e&&!Array.isArray(this.state.value)){t.find((e=>e.value===this.state.value))||(t=[{value:this.state.value,label:String(this.state.text)},...t])}return t}refreshOptions(){this.getValueOptions({}).subscribe((e=>{this.updateValueGivenNewOptions(e)}))}}class ct{constructor(e){this._sceneObject=e,this._nextChangeShouldAddHistoryStep=!1}getKey(){return`var-${this._sceneObject.state.name}`}getKeys(){return this._sceneObject.state.skipUrlSync?[]:[this.getKey()]}getUrlState(){if(this._sceneObject.state.skipUrlSync)return{};let e=null,t=this._sceneObject.state.value;return e=Array.isArray(t)?t.map(String):this._sceneObject.state.isMulti?[String(t)]:String(t),{[this.getKey()]:e}}updateFromUrl(e){let t=e[this.getKey()];null!=t&&(this._sceneObject.state.includeAll&&(t=function(e){if((0,te.isArray)(e)&&e[0]===Je)return[et];if(e===Je)return et;return e}(t)),this._sceneObject.state.allValue&&this._sceneObject.state.allValue===t&&(t=et),this._sceneObject.isActive||(this._sceneObject.skipNextValidation=!0),this._sceneObject.changeValueTo(t))}performBrowserHistoryAction(e){this._nextChangeShouldAddHistoryStep=!0,e(),this._nextChangeShouldAddHistoryStep=!1}shouldCreateHistoryStep(e){return this._nextChangeShouldAddHistoryStep}}class dt{constructor(e,t){this._value=e,this._variable=t}formatter(e){return e===me.Text?Je:e===me.PercentEncode?He.get(me.PercentEncode).formatter(this._value,[],this._variable):e===me.QueryParam?He.get(me.QueryParam).formatter(Je,[],this._variable):this._value}}function pt(e,t={}){if(e.state.$variables)for(const r of e.state.$variables.state.variables)r.state.skipUrlSync||t[r.state.name]||(t[r.state.name]=r);return e.parent&&pt(e.parent,t),t}var ht=Object.defineProperty,ft=Object.defineProperties,mt=Object.getOwnPropertyDescriptors,gt=Object.getOwnPropertySymbols,vt=Object.prototype.hasOwnProperty,bt=Object.prototype.propertyIsEnumerable,yt=(e,t,r)=>t in e?ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function wt(e,t,n){return new Proxy({},{get:(a,o)=>{return"name"===o?e.name:"displayName"===o?(0,r.getFieldDisplayName)(e,t,n):"labels"===o||"formattedLabels"===o?e.labels?(i=((e,t)=>{for(var r in t||(t={}))vt.call(t,r)&&yt(e,r,t[r]);if(gt)for(var r of gt(t))bt.call(t,r)&&yt(e,r,t[r]);return e})({},e.labels),s={__values:Object.values(e.labels).sort().join(", "),toString:()=>(0,r.formatLabels)(e.labels,"",!0)},ft(i,mt(s))):"":void 0;var i,s}})}const St=(0,r.getDisplayProcessor)();class Et{constructor(e){this._urlQueryParams=e}formatter(e){if(!e)return this._urlQueryParams;const t=e.split(":");if("exclude"===t[0]&&t.length>1){const e=new URLSearchParams(this._urlQueryParams);for(const r of t[1].split(","))e.delete(r);return`?${e}`}if("include"===t[0]&&t.length>1){const e=new URLSearchParams(this._urlQueryParams),r=t[1].split(",");for(const t of e.keys())r.includes(t)||e.delete(t);return`?${e}`}return this._urlQueryParams}}const Ot=new Map([[r.DataLinkBuiltInVars.includeVars,class{constructor(e,t){this.state={name:e,type:"url_variable"},this._sceneObject=t}getValue(){const e=pt(this._sceneObject),t=He.get(me.QueryParam),r=[];for(const n of Object.keys(e)){const a=e[n];if(a instanceof ut&&a.hasAllValue()&&!a.state.allValue){r.push(t.formatter(et,[],a));continue}const o=a.getValue();o&&(Fe(o)?r.push(o.formatter(me.QueryParam)):r.push(t.formatter(o,[],a)))}return new at(r.join("&"))}getValueText(){return""}}],[r.DataLinkBuiltInVars.keepTime,class{constructor(e,t){this.state={name:e,type:"url_variable"},this._sceneObject=t}getValue(){var e;const t=null==(e=$e(this._sceneObject).urlSync)?void 0:e.getUrlState();return"browser"===(null==t?void 0:t.timezone)&&(t.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone),new at(r.urlUtil.toUrlParams(t))}getValueText(){return""}}],["__value",class{constructor(e,t,r,n){this._match=r,this._scopedVars=n,this.state={name:e,type:"__value"}}getValue(e){var t,n;const a=null==(t=this._scopedVars)?void 0:t.__dataContext;if(!a)return this._match;const{frame:o,rowIndex:i,field:s,calculatedValue:l}=a.value;if(l)switch(e){case"numeric":case"raw":return l.numeric;case"time":return"";default:return(0,r.formattedValueToString)(l)}if(null==i)return this._match;if("time"===e){const e=o.fields.find((e=>e.type===r.FieldType.time));return e?e.values.get(i):void 0}if(!s)return this._match;const u=s.values.get(i);if("raw"===e)return u;const c=(null!=(n=s.display)?n:St)(u);return"numeric"===e?c.numeric:(0,r.formattedValueToString)(c)}getValueText(){return""}}],["__data",class{constructor(e,t,r,n){this._match=r,this._scopedVars=n,this.state={name:e,type:"__data"}}getValue(e){var t,n;const a=null==(t=this._scopedVars)?void 0:t.__dataContext;if(!a||!e)return this._match;const{frame:o,rowIndex:i}=a.value;if(void 0===i||void 0===e)return this._match;const s={name:o.name,refId:o.refId,fields:(0,r.getFieldDisplayValuesProxy)({frame:o,rowIndex:i})};return null!=(n=Ue(e)(s))?n:""}getValueText(){return""}}],["__series",class{constructor(e,t,r,n){this._match=r,this._scopedVars=n,this.state={name:e,type:"__series"}}getValue(e){var t;const n=null==(t=this._scopedVars)?void 0:t.__dataContext;if(!n||!e)return this._match;if("name"!==e)return this._match;const{frame:a,frameIndex:o}=n.value;return(0,r.getFrameDisplayName)(a,o)}getValueText(){return""}}],["__field",class{constructor(e,t,r,n){this._match=r,this._scopedVars=n,this.state={name:e,type:"__field"}}getValue(e){var t,r;const n=null==(t=this._scopedVars)?void 0:t.__dataContext;if(!n||!e)return this._match;if(void 0===e||""===e)return this._match;const{frame:a,field:o,data:i}=n.value,s=wt(o,a,i);return null!=(r=Ue(e)(s))?r:""}getValueText(){return""}}],["__url",class{constructor(e,t){this.state={name:e,type:"url_macro"}}getValue(e){var t;const r=i.locationService.getLocation(),n=null!=(t=i.config.appSubUrl)?t:"";switch(null!=e?e:""){case"params":return new Et(r.search);case"path":return n+r.pathname;default:return n+r.pathname+r.search}}getValueText(){return""}}],["__from",ot],["__to",ot],["__timezone",class{constructor(e,t){this.state={name:e,type:"time_macro"},this._sceneObject=t}getValue(){const e=$e(this._sceneObject).getTimeZone();return"browser"===e?Intl.DateTimeFormat().resolvedOptions().timeZone:e}getValueText(){return this.getValue()}}],["__user",class{constructor(e,t){this.state={name:e,type:"user_macro"}}getValue(e){const t=i.config.bootData.user;switch(e){case"login":return t.login;case"email":return t.email;default:return String(t.id)}}getValueText(){return""}}],["__org",class{constructor(e,t){this.state={name:e,type:"org_macro"}}getValue(e){const t=i.config.bootData.user;return"name"===e?t.orgName:String(t.orgId)}getValueText(){return""}}],["__interval",it],["__interval_ms",it]]);function xt(e,t,r,n,a){return t&&"string"==typeof t?(rt.lastIndex=0,t.replace(rt,((t,o,i,s,l,u,c)=>{const d=o||i||l,p=s||c||n,h=function(e,t,r,n){if(r&&r.hasOwnProperty(e)){const t=r[e];if(t)return function(e,t){return Be?(Be.state.name=e,Be.state.value=t):Be=new We(e,t),Be}(e,t)}const a=de(e,n);if(a)return a;const o=Ot.get(e);if(o)return new o(e,n,t,r);return null}(d,t,r,e);if(!h)return a&&a.push({match:t,variableName:d,fieldPath:u,format:p,value:t,found:!1}),t;const f=function(e,t,r,n){if(null==r)return"";if(Fe(r))return xt(e,r.formatter(n));Array.isArray(r)||"object"!=typeof r||(r=`${r}`);if("function"==typeof n)return n(r,{name:t.state.name,type:t.state.type,multi:t.state.isMulti,includeAll:t.state.includeAll});let a=[];n?(a=n.split(":"),a.length>1?(n=a[0],a=a.slice(1)):a=[]):n=me.Glob;let o=He.getIfExists(n);o||(console.error(`Variable format ${n} not found. Using glob format as fallback.`),o=He.get(me.Glob));return o.formatter(r,a,t)}(e,h,h.getValue(u),p);return a&&a.push({match:t,variableName:d,fieldPath:u,format:p,value:f,found:f!==t}),f}))):null!=t?t:""}function Rt(e){return void 0!==e.useState}function _t(e){return"enrichDataRequest"in e}function Ct(e){return"isDataLayer"in e}function Pt(e){return t=>{const r=qu.getQueryController(e.origin);return r?new x.Observable((n=>{e.cancel||(e.cancel=()=>n.complete()),r.queryStarted(e);let a=!1;const o=t.subscribe({next:t=>{a||t.state===ge.Loading||(a=!0,r.queryCompleted(e)),n.next(t)},error:e=>n.error(e),complete:()=>{n.complete()}});return()=>{o.unsubscribe(),a||r.queryCompleted(e)}})):t}}function It(e){return new x.Observable((t=>{t.next({state:ge.Loading});(0,x.from)(e).pipe((0,x.map)((()=>({state:ge.Done}))),(0,x.catchError)((()=>(t.next({state:ge.Error}),[])))).subscribe({next:e=>t.next(e),complete:()=>t.complete()})}))}async function Tt(e,t){if(null==e?void 0:e.uid){const t=ce.get(e.uid);if(t)return t}if(e&&e.query)return e;const r=(0,i.getDataSourceSrv)().get(e,t);if(t.__sceneObject&&t.__sceneObject.value.valueOf()){const e=qu.getQueryController(t.__sceneObject.value.valueOf());e&&e.state.enableProfiling&&It(r).pipe(Pt({type:"plugin",origin:t.__sceneObject.value.valueOf()})).subscribe((()=>{}))}return await r}class Dt{constructor(){this._values=new Map}recordCurrentDependencyValuesForSceneObject(e){if(this.clearValues(),e.variableDependency)for(const t of e.variableDependency.getNames()){const r=qu.lookupVariable(t,e);r&&this._values.set(r.state.name,r.getValue())}}cloneAndRecordCurrentValuesForSceneObject(e){const t=new Dt;return t.recordCurrentDependencyValuesForSceneObject(e),t}clearValues(){this._values.clear()}hasValues(){return!!this._values}recordCurrentValue(e){this._values.set(e.state.name,e.getValue())}hasRecordedValue(e){return this._values.has(e.state.name)}hasValueChanged(e){if(this._values.has(e.state.name)){if(!Fl(this._values.get(e.state.name),e.getValue()))return!0}return!1}hasDependenciesChanged(e){if(!this._values)return!1;if(!e.variableDependency)return!1;for(const t of e.variableDependency.getNames()){const r=qu.lookupVariable(t,e);if(!r)continue;const n=r.state.name;if(r&&this._values.has(n)){if(!Fl(this._values.get(n),r.getValue()))return!0}}return!1}}function At(e){return"object"==typeof e&&"getExtraQueries"in e}var kt=Object.defineProperty,jt=Object.defineProperties,Lt=Object.getOwnPropertyDescriptors,Mt=Object.getOwnPropertySymbols,Nt=Object.prototype.hasOwnProperty,$t=Object.prototype.propertyIsEnumerable,Vt=(e,t,r)=>t in e?kt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Ft=(e,t)=>(0,x.of)(t),Bt=e=>t=>t.pipe((0,x.mergeMap)((([t,...r])=>{const n=r.flatMap((r=>{var n,a;return null!=(a=null==(n=e.get(r.request.requestId))?void 0:n(t,r))?a:(0,x.of)(r)}));return(0,x.forkJoin)([(0,x.of)(t),...n])})),(0,x.map)((([e,...t])=>{var r,n,a;return n=((e,t)=>{for(var r in t||(t={}))Nt.call(t,r)&&Vt(e,r,t[r]);if(Mt)for(var r of Mt(t))$t.call(t,r)&&Vt(e,r,t[r]);return e})({},e),a={series:[...e.series,...t.flatMap((e=>e.series))],annotations:[...null!=(r=e.annotations)?r:[],...t.flatMap((e=>{var t;return null!=(t=e.annotations)?t:[]}))]},jt(n,Lt(a))})));var zt=Object.defineProperty,Ut=Object.defineProperties,Wt=Object.getOwnPropertyDescriptors,Ht=Object.getOwnPropertySymbols,Gt=Object.prototype.hasOwnProperty,qt=Object.prototype.propertyIsEnumerable,Qt=(e,t,r)=>t in e?zt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Xt=(e,t)=>{for(var r in t||(t={}))Gt.call(t,r)&&Qt(e,r,t[r]);if(Ht)for(var r of Ht(t))qt.call(t,r)&&Qt(e,r,t[r]);return e},Yt=(e,t)=>Ut(e,Wt(t));const Kt=0;function Zt(e){const t=e.getRoot();return _t(t)?t.enrichDataRequest(e):null}let Jt,er=new Set;const tr=new Set;var rr=f(1559);function nr(e,t="latest"){return ar(e,t.replace(/\-.*/,""))}function ar(e,t){const r={};for(const[n,a]of Object.entries(e))or(a)?r[n]=ar(a,t):(sr(a,n),r[n]=ir(a,t));return r}function or(e){if("object"==typeof e){const[t]=Object.keys(e);return!(0,rr.valid)(t)}return!1}function ir(e,t){let r,n=Object.keys(e).sort(rr.compare);if("latest"===t)return e[n[n.length-1]];for(const e of n)(0,rr.gte)(t,e)&&(r=e);return r||(r=n[n.length-1]),e[r]}function sr(e,t){if(!Object.keys(e).every((e=>(0,rr.valid)(e))))throw new Error(`Invalid semver version: '${t}'`)}const lr="8.5.0",ur={RadioButton:{container:{"10.2.3":"data-testid radio-button"}},Breadcrumbs:{breadcrumb:{"9.4.0":e=>`data-testid ${e} breadcrumb`}},TimePicker:{openButton:{[lr]:"data-testid TimePicker Open Button"},overlayContent:{"10.2.3":"data-testid TimePicker Overlay Content"},fromField:{"10.2.3":"data-testid Time Range from field",[lr]:"Time Range from field"},toField:{"10.2.3":"data-testid Time Range to field",[lr]:"Time Range to field"},applyTimeRange:{[lr]:"data-testid TimePicker submit button"},copyTimeRange:{"10.4.0":"data-testid TimePicker copy button"},pasteTimeRange:{"10.4.0":"data-testid TimePicker paste button"},calendar:{label:{"10.2.3":"data-testid Time Range calendar",[lr]:"Time Range calendar"},openButton:{"10.2.3":"data-testid Open time range calendar",[lr]:"Open time range calendar"},closeButton:{"10.2.3":"data-testid Close time range Calendar",[lr]:"Close time range Calendar"}},absoluteTimeRangeTitle:{[lr]:"data-testid-absolute-time-range-narrow"}},DataSourcePermissions:{form:{"9.5.0":()=>'form[name="addPermission"]'},roleType:{"9.5.0":"Role to add new permission to"},rolePicker:{"9.5.0":"Built-in role picker"},permissionLevel:{"9.5.0":"Permission Level"}},DateTimePicker:{input:{"10.2.3":"data-testid date-time-input"}},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:{[lr]:"Test Data Query scenario select container"},scenarioSelect:{[lr]:"Test Data Query scenario select"},max:{[lr]:"TestData max"},min:{[lr]:"TestData min"},noise:{[lr]:"TestData noise"},seriesCount:{[lr]:"TestData series count"},spread:{[lr]:"TestData spread"},startValue:{[lr]:"TestData start value"},drop:{[lr]:"TestData drop values"}}},DataSourceHttpSettings:{urlInput:{"10.4.0":"data-testid Datasource HTTP settings url",[lr]:"Datasource HTTP settings url"}},Jaeger:{traceIDInput:{[lr]:"Trace ID"}},Prometheus:{configPage:{connectionSettings:{[lr]:"Data source connection URL"},manageAlerts:{"10.4.0":"prometheus-alerts-manager"},scrapeInterval:{"10.4.0":"data-testid scrape interval"},queryTimeout:{"10.4.0":"data-testid query timeout"},defaultEditor:{"10.4.0":"data-testid default editor"},disableMetricLookup:{"10.4.0":"disable-metric-lookup"},prometheusType:{"10.4.0":"data-testid prometheus type"},prometheusVersion:{"10.4.0":"data-testid prometheus version"},cacheLevel:{"10.4.0":"data-testid cache level"},incrementalQuerying:{"10.4.0":"prometheus-incremental-querying"},queryOverlapWindow:{"10.4.0":"data-testid query overlap window"},disableRecordingRules:{"10.4.0":"disable-recording-rules"},customQueryParameters:{"10.4.0":"data-testid custom query parameters"},httpMethod:{"10.4.0":"data-testid http method"},exemplarsAddButton:{"10.3.0":"data-testid Add exemplar config button",[lr]:"Add exemplar config button"},internalLinkSwitch:{"10.3.0":"data-testid Internal link switch",[lr]:"Internal link switch"},codeModeMetricNamesSuggestionLimit:{"11.1.0":"data-testid code mode metric names suggestion limit"}},queryEditor:{explain:{"10.4.0":"data-testid prometheus explain switch wrapper"},editorToggle:{"10.4.0":"data-testid QueryEditorModeToggle"},options:{"10.4.0":"data-testid prometheus options"},legend:{"10.4.0":"data-testid prometheus legend wrapper"},format:{"10.4.0":"data-testid prometheus format"},step:{"10.4.0":"prometheus-step"},type:{"10.4.0":"data-testid prometheus type"},exemplars:{"10.4.0":"prometheus-exemplars"},builder:{metricSelect:{"10.4.0":"data-testid metric select"},hints:{"10.4.0":"data-testid prometheus hints"},metricsExplorer:{"10.4.0":"data-testid metrics explorer"},queryAdvisor:{"10.4.0":"data-testid query advisor"}},code:{queryField:{"10.4.0":"data-testid prometheus query field"},metricsCountInfo:{"11.1.0":"data-testid metrics count disclaimer"},metricsBrowser:{openButton:{"10.4.0":"data-testid open metrics browser"},selectMetric:{"10.4.0":"data-testid select a metric"},seriesLimit:{"10.3.1":"data-testid series limit"},metricList:{"10.4.0":"data-testid metric list"},labelNamesFilter:{"10.4.0":"data-testid label names filter"},labelValuesFilter:{"10.4.0":"data-testid label values filter"},useQuery:{"10.4.0":"data-testid use query"},useAsRateQuery:{"10.4.0":"data-testid use as rate query"},validateSelector:{"10.4.0":"data-testid validate selector"},clear:{"10.4.0":"data-testid clear"}}}},exemplarMarker:{"10.3.0":"data-testid Exemplar marker",[lr]:"Exemplar marker"},variableQueryEditor:{queryType:{"10.4.0":"data-testid query type"},labelnames:{metricRegex:{"10.4.0":"data-testid label names metric regex"}},labelValues:{labelSelect:{"10.4.0":"data-testid label values label select"}},metricNames:{metricRegex:{"10.4.0":"data-testid metric names metric regex"}},varQueryResult:{"10.4.0":"data-testid variable query result"},seriesQuery:{"10.4.0":"data-testid prometheus series query"},classicQuery:{"10.4.0":"data-testid prometheus classic query"}},annotations:{minStep:{"10.4.0":"prometheus-annotation-min-step"},title:{"10.4.0":"data-testid prometheus annotation title"},tags:{"10.4.0":"data-testid prometheus annotation tags"},text:{"10.4.0":"data-testid prometheus annotation text"},seriesValueAsTimestamp:{"10.4.0":"data-testid prometheus annotation series value as timestamp"}}}},Menu:{MenuComponent:{[lr]:e=>`${e} menu`},MenuGroup:{[lr]:e=>`${e} menu group`},MenuItem:{[lr]:e=>`${e} menu item`},SubMenu:{container:{"10.3.0":"data-testid SubMenu container",[lr]:"SubMenu container"},icon:{"10.3.0":"data-testid SubMenu icon",[lr]:"SubMenu icon"}}},Panels:{Panel:{title:{[lr]:e=>`data-testid Panel header ${e}`},content:{"11.1.0":"data-testid panel content"},headerItems:{"10.2.0":e=>`data-testid Panel header item ${e}`},menuItems:{"9.5.0":e=>`data-testid Panel menu item ${e}`},menu:{"9.5.0":e=>`data-testid Panel menu ${e}`},containerByTitle:{[lr]:e=>`${e} panel`},headerCornerInfo:{[lr]:e=>`Panel header ${e}`},status:{"10.2.0":e=>`data-testid Panel status ${e}`,[lr]:e=>"Panel status"},loadingBar:{"10.0.0":()=>"Panel loading bar"},HoverWidget:{container:{"10.1.0":"data-testid hover-header-container",[lr]:"hover-header-container"},dragIcon:{"10.0.0":"data-testid drag-icon"}},PanelDataErrorMessage:{"10.4.0":"data-testid Panel data error message"}},Visualization:{Graph:{container:{"9.5.0":"Graph container"},VisualizationTab:{legendSection:{[lr]:"Legend section"}},Legend:{legendItemAlias:{[lr]:e=>`gpl alias ${e}`},showLegendSwitch:{[lr]:"gpl show legend"}},xAxis:{labels:{[lr]:()=>"div.flot-x-axis > div.flot-tick-label"}}},BarGauge:{valueV2:{[lr]:"data-testid Bar gauge value"}},PieChart:{svgSlice:{"10.3.0":"data testid Pie Chart Slice"}},Text:{container:{[lr]:()=>".markdown-html"}},Table:{header:{[lr]:"table header"},footer:{[lr]:"table-footer"},body:{"10.2.0":"data-testid table body"}}}},VizLegend:{seriesName:{"10.3.0":e=>`data-testid VizLegend series ${e}`}},Drawer:{General:{title:{[lr]:e=>`Drawer title ${e}`},expand:{[lr]:"Drawer expand"},contract:{[lr]:"Drawer contract"},close:{"10.3.0":"data-testid Drawer close",[lr]:"Drawer close"},rcContentWrapper:{"9.4.0":()=>".rc-drawer-content-wrapper"},subtitle:{"10.4.0":"data-testid drawer subtitle"}},DashboardSaveDrawer:{saveButton:{"11.1.0":"data-testid Save dashboard drawer button"},saveAsButton:{"11.1.0":"data-testid Save as dashboard drawer button"},saveAsTitleInput:{"11.1.0":"Save dashboard title field"}}},PanelEditor:{General:{content:{"11.1.0":"data-testid Panel editor content","8.0.0":"Panel editor content"}},OptionsPane:{content:{"11.1.0":"data-testid Panel editor option pane content",[lr]:"Panel editor option pane content"},select:{[lr]:"Panel editor option pane select"},fieldLabel:{[lr]:e=>`${e} field property editor`},fieldInput:{"11.0.0":e=>`data-testid Panel editor option pane field input ${e}`}},DataPane:{content:{"11.1.0":"data-testid Panel editor data pane content",[lr]:"Panel editor data pane content"}},applyButton:{"9.2.0":"data-testid Apply changes and go back to dashboard","9.1.0":"Apply changes and go back to dashboard","8.0.0":"panel editor apply"},toggleVizPicker:{"10.0.0":"data-testid toggle-viz-picker","8.0.0":"toggle-viz-picker"},toggleVizOptions:{"10.1.0":"data-testid toggle-viz-options",[lr]:"toggle-viz-options"},toggleTableView:{"11.1.0":"data-testid toggle-table-view",[lr]:"toggle-table-view"},showZoomField:{"10.2.0":"Map controls Show zoom control field property editor"},showAttributionField:{"10.2.0":"Map controls Show attribution field property editor"},showScaleField:{"10.2.0":"Map controls Show scale field property editor"},showMeasureField:{"10.2.0":"Map controls Show measure tools field property editor"},showDebugField:{"10.2.0":"Map controls Show debug field property editor"},measureButton:{"9.2.0":"show measure tools"}},PanelInspector:{Data:{content:{[lr]:"Panel inspector Data content"}},Stats:{content:{[lr]:"Panel inspector Stats content"}},Json:{content:{"11.1.0":"data-testid Panel inspector Json content",[lr]:"Panel inspector Json content"}},Query:{content:{[lr]:"Panel inspector Query content"},refreshButton:{[lr]:"Panel inspector Query refresh button"},jsonObjectKeys:{[lr]:()=>".json-formatter-key"}}},Tab:{title:{"11.2.0":e=>`data-testid Tab ${e}`},active:{[lr]:()=>'[class*="-activeTabStyle"]'}},RefreshPicker:{runButtonV2:{[lr]:"data-testid RefreshPicker run button"},intervalButtonV2:{[lr]:"data-testid RefreshPicker interval button"}},QueryTab:{content:{[lr]:"Query editor tab content"},queryInspectorButton:{[lr]:"Query inspector button"},queryHistoryButton:{"10.2.0":"data-testid query-history-button",[lr]:"query-history-button"},addQuery:{"10.2.0":"data-testid query-tab-add-query",[lr]:"Query editor add query button"},queryGroupTopSection:{"11.2.0":"data-testid query group top section"},addExpression:{"11.2.0":"data-testid query-tab-add-expression"}},QueryHistory:{queryText:{"9.0.0":"Query text"}},QueryEditorRows:{rows:{[lr]:"Query editor row"}},QueryEditorRow:{actionButton:{"10.4.0":e=>`data-testid ${e}`},title:{[lr]:e=>`Query editor row title ${e}`},container:{[lr]:e=>`Query editor row ${e}`}},AlertTab:{content:{"10.2.3":"data-testid Alert editor tab content",[lr]:"Alert editor tab content"}},AlertRules:{groupToggle:{"11.0.0":"data-testid group-collapse-toggle"},toggle:{"11.0.0":"data-testid collapse-toggle"},expandedContent:{"11.0.0":"data-testid expanded-content"},previewButton:{"11.1.0":"data-testid alert-rule preview-button"},ruleNameField:{"11.1.0":"data-testid alert-rule name-field"},newFolderButton:{"11.1.0":"data-testid alert-rule new-folder-button"},newFolderNameField:{"11.1.0":"data-testid alert-rule name-folder-name-field"},newFolderNameCreateButton:{"11.1.0":"data-testid alert-rule name-folder-name-create-button"},newEvaluationGroupButton:{"11.1.0":"data-testid alert-rule new-evaluation-group-button"},newEvaluationGroupName:{"11.1.0":"data-testid alert-rule new-evaluation-group-name"},newEvaluationGroupInterval:{"11.1.0":"data-testid alert-rule new-evaluation-group-interval"},newEvaluationGroupCreate:{"11.1.0":"data-testid alert-rule new-evaluation-group-create-button"}},Alert:{alertV2:{[lr]:e=>`data-testid Alert ${e}`}},TransformTab:{content:{"10.1.0":"data-testid Transform editor tab content",[lr]:"Transform editor tab content"},newTransform:{"10.1.0":e=>`data-testid New transform ${e}`},transformationEditor:{"10.1.0":e=>`data-testid Transformation editor ${e}`},transformationEditorDebugger:{"10.1.0":e=>`data-testid Transformation editor debugger ${e}`}},Transforms:{card:{"10.1.0":e=>`data-testid New transform ${e}`},disableTransformationButton:{"10.4.0":"data-testid Disable transformation button"},Reduce:{modeLabel:{"10.2.3":"data-testid Transform mode label",[lr]:"Transform mode label"},calculationsLabel:{"10.2.3":"data-testid Transform calculations label",[lr]:"Transform calculations label"}},SpatialOperations:{actionLabel:{"9.1.2":"root Action field property editor"},locationLabel:{"10.2.0":"root Location Mode field property editor"},location:{autoOption:{"9.1.2":"Auto location option"},coords:{option:{"9.1.2":"Coords location option"},latitudeFieldLabel:{"9.1.2":"root Latitude field field property editor"},longitudeFieldLabel:{"9.1.2":"root Longitude field field property editor"}},geohash:{option:{"9.1.2":"Geohash location option"},geohashFieldLabel:{"9.1.2":"root Geohash field field property editor"}},lookup:{option:{"9.1.2":"Lookup location option"},lookupFieldLabel:{"9.1.2":"root Lookup field field property editor"},gazetteerFieldLabel:{"9.1.2":"root Gazetteer field property editor"}}}},searchInput:{"10.2.3":"data-testid search transformations",[lr]:"search transformations"},noTransformationsMessage:{"10.2.3":"data-testid no transformations message"},addTransformationButton:{"10.1.0":"data-testid add transformation button",[lr]:"add transformation button"},removeAllTransformationsButton:{"10.4.0":"data-testid remove all transformations button"}},NavBar:{Configuration:{button:{"9.5.0":"Configuration"}},Toggle:{button:{"10.2.3":"data-testid Toggle menu",[lr]:"Toggle menu"}},Reporting:{button:{"9.5.0":"Reporting"}}},NavMenu:{Menu:{"10.2.3":"data-testid navigation mega-menu"},item:{"9.5.0":"data-testid Nav menu item"}},NavToolbar:{container:{"9.4.0":"data-testid Nav toolbar"},commandPaletteTrigger:{"11.5.0":"data-testid Command palette trigger"},shareDashboard:{"11.1.0":"data-testid Share dashboard"},markAsFavorite:{"11.1.0":"data-testid Mark as favorite"},editDashboard:{editButton:{"11.1.0":"data-testid Edit dashboard button"},saveButton:{"11.1.0":"data-testid Save dashboard button"},exitButton:{"11.1.0":"data-testid Exit edit mode button"},settingsButton:{"11.1.0":"data-testid Dashboard settings"},addRowButton:{"11.1.0":"data-testid Add row button"},addLibraryPanelButton:{"11.1.0":"data-testid Add a panel from the panel library button"},addVisualizationButton:{"11.1.0":"data-testid Add new visualization menu item"},pastePanelButton:{"11.1.0":"data-testid Paste panel button"},discardChangesButton:{"11.1.0":"data-testid Discard changes button"},discardLibraryPanelButton:{"11.1.0":"data-testid Discard library panel button"},unlinkLibraryPanelButton:{"11.1.0":"data-testid Unlink library panel button"},saveLibraryPanelButton:{"11.1.0":"data-testid Save library panel button"},backToDashboardButton:{"11.1.0":"data-testid Back to dashboard button"}}},PageToolbar:{container:{[lr]:()=>".page-toolbar"},item:{[lr]:e=>`${e}`},itemButton:{"9.5.0":e=>`data-testid ${e}`}},QueryEditorToolbarItem:{button:{[lr]:e=>`QueryEditor toolbar item button ${e}`}},BackButton:{backArrow:{"10.3.0":"data-testid Go Back",[lr]:"Go Back"}},OptionsGroup:{group:{"11.1.0":e=>e?`data-testid Options group ${e}`:"data-testid Options group",[lr]:e=>e?`Options group ${e}`:"Options group"},toggle:{"11.1.0":e=>e?`data-testid Options group ${e} toggle`:"data-testid Options group toggle",[lr]:e=>e?`Options group ${e} toggle`:"Options group toggle"}},PluginVisualization:{item:{[lr]:e=>`Plugin visualization item ${e}`},current:{[lr]:()=>'[class*="-currentVisualizationItem"]'}},Select:{menu:{"11.5.0":"data-testid Select menu",[lr]:"Select options menu"},option:{"11.1.0":"data-testid Select option",[lr]:"Select option"},toggleAllOptions:{"11.3.0":"data-testid toggle all options"},input:{[lr]:()=>'input[id*="time-options-input"]'},singleValue:{[lr]:()=>'div[class*="-singleValue"]'}},FieldConfigEditor:{content:{[lr]:"Field config editor content"}},OverridesConfigEditor:{content:{[lr]:"Field overrides editor content"}},FolderPicker:{containerV2:{[lr]:"data-testid Folder picker select container"},input:{"10.4.0":"data-testid folder-picker-input"}},ReadonlyFolderPicker:{container:{[lr]:"data-testid Readonly folder picker select container"}},DataSourcePicker:{container:{"10.0.0":"data-testid Data source picker select container","8.0.0":"Data source picker select container"},inputV2:{"10.1.0":"data-testid Select a data source",[lr]:"Select a data source"},dataSourceList:{"10.4.0":"data-testid Data source list dropdown"},advancedModal:{dataSourceList:{"10.4.0":"data-testid Data source list"},builtInDataSourceList:{"10.4.0":"data-testid Built in data source list"}}},TimeZonePicker:{containerV2:{[lr]:"data-testid Time zone picker select container"},changeTimeSettingsButton:{"11.0.0":"data-testid Time zone picker Change time settings button"}},WeekStartPicker:{containerV2:{[lr]:"data-testid Choose starting day of the week"},placeholder:{[lr]:"Choose starting day of the week"}},TraceViewer:{spanBar:{"9.0.0":"data-testid SpanBar--wrapper"}},QueryField:{container:{"10.3.0":"data-testid Query field",[lr]:"Query field"}},QueryBuilder:{queryPatterns:{"10.3.0":"data-testid Query patterns",[lr]:"Query patterns"},labelSelect:{"10.3.0":"data-testid Select label",[lr]:"Select label"},inputSelect:{"11.1.0":"data-testid Select label-input"},valueSelect:{"10.3.0":"data-testid Select value",[lr]:"Select value"},matchOperatorSelect:{"10.3.0":"data-testid Select match operator",[lr]:"Select match operator"}},ValuePicker:{button:{"10.3.0":e=>`data-testid Value picker button ${e}`},select:{"10.3.0":e=>`data-testid Value picker select ${e}`}},Search:{sectionV2:{[lr]:"data-testid Search section"},itemsV2:{[lr]:"data-testid Search items"},cards:{[lr]:"data-testid Search cards"},collapseFolder:{[lr]:e=>`data-testid Collapse folder ${e}`},expandFolder:{[lr]:e=>`data-testid Expand folder ${e}`},dashboardItem:{[lr]:e=>`data-testid Dashboard search item ${e}`},dashboardCard:{[lr]:e=>`data-testid Search card ${e}`},folderHeader:{"9.3.0":e=>`data-testid Folder header ${e}`},folderContent:{"9.3.0":e=>`data-testid Folder content ${e}`},dashboardItems:{[lr]:"data-testid Dashboard search item"}},DashboardLinks:{container:{[lr]:"data-testid Dashboard link container"},dropDown:{[lr]:"data-testid Dashboard link dropdown"},link:{[lr]:"data-testid Dashboard link"}},LoadingIndicator:{icon:{"10.4.0":"data-testid Loading indicator",[lr]:"Loading indicator"}},CallToActionCard:{buttonV2:{[lr]:e=>`data-testid Call to action button ${e}`}},DataLinksContextMenu:{singleLink:{"10.3.0":"data-testid Data link",[lr]:"Data link"}},CodeEditor:{container:{"10.2.3":"data-testid Code editor container",[lr]:"Code editor container"}},ReactMonacoEditor:{editorLazy:{"11.1.0":"data-testid ReactMonacoEditor editorLazy"}},DashboardImportPage:{textarea:{[lr]:"data-testid-import-dashboard-textarea"},submit:{[lr]:"data-testid-load-dashboard"}},ImportDashboardForm:{name:{[lr]:"data-testid-import-dashboard-title"},submit:{[lr]:"data-testid-import-dashboard-submit"}},PanelAlertTabContent:{content:{"10.2.3":"data-testid Unified alert editor tab content",[lr]:"Unified alert editor tab content"}},VisualizationPreview:{card:{[lr]:e=>`data-testid suggestion-${e}`}},ColorSwatch:{name:{[lr]:"data-testid-colorswatch"}},DashboardRow:{title:{[lr]:e=>`data-testid dashboard-row-title-${e}`}},UserProfile:{profileSaveButton:{[lr]:"data-testid-user-profile-save"},preferencesSaveButton:{[lr]:"data-testid-shared-prefs-save"},orgsTable:{[lr]:"data-testid-user-orgs-table"},sessionsTable:{[lr]:"data-testid-user-sessions-table"},extensionPointTabs:{"10.2.3":"data-testid-extension-point-tabs"},extensionPointTab:{"10.2.3":e=>`data-testid-extension-point-tab-${e}`}},FileUpload:{inputField:{"9.0.0":"data-testid-file-upload-input-field"},fileNameSpan:{"9.0.0":"data-testid-file-upload-file-name"}},DebugOverlay:{wrapper:{"9.2.0":"debug-overlay"}},OrgRolePicker:{input:{"9.5.0":"Role"}},AnalyticsToolbarButton:{button:{"9.5.0":"Dashboard insights"}},Variables:{variableOption:{"9.5.0":"data-testid variable-option"},variableLinkWrapper:{"11.1.1":"data-testid variable-link-wrapper"}},Annotations:{annotationsTypeInput:{"11.1.0":"data-testid annotations-type-input",[lr]:"annotations-type-input"},annotationsChoosePanelInput:{"11.1.0":"data-testid choose-panels-input",[lr]:"choose-panels-input"},editor:{testButton:{"11.0.0":"data-testid annotations-test-button"},resultContainer:{"11.0.0":"data-testid annotations-query-result-container"}}},Tooltip:{container:{"10.2.0":"data-testid tooltip"}},ReturnToPrevious:{buttonGroup:{"11.0.0":"data-testid dismissable button group"},backButton:{"11.0.0":"data-testid back"},dismissButton:{"11.0.0":"data-testid dismiss"}},SQLQueryEditor:{selectColumn:{"11.0.0":"data-testid select-column"},selectColumnInput:{"11.0.0":"data-testid select-column-input"},selectFunctionParameter:{"11.0.0":e=>`data-testid select-function-parameter-${e}`},selectAggregation:{"11.0.0":"data-testid select-aggregation"},selectAggregationInput:{"11.0.0":"data-testid select-aggregation-input"},selectAlias:{"11.0.0":"data-testid select-alias"},selectAliasInput:{"11.0.0":"data-testid select-alias-input"},selectInputParameter:{"11.0.0":"data-testid select-input-parameter"},filterConjunction:{"11.0.0":"data-testid filter-conjunction"},filterField:{"11.0.0":"data-testid filter-field"},filterOperator:{"11.0.0":"data-testid filter-operator"},headerTableSelector:{"11.0.0":"data-testid header-table-selector"},headerFilterSwitch:{"11.0.0":"data-testid header-filter-switch"},headerGroupSwitch:{"11.0.0":"data-testid header-group-switch"},headerOrderSwitch:{"11.0.0":"data-testid header-order-switch"},headerPreviewSwitch:{"11.0.0":"data-testid header-preview-switch"}},EntityNotFound:{container:{"11.2.0":"data-testid entity-not-found"}},Portal:{container:{"11.5.0":"data-testid portal-container"}}},cr={pages:nr({Alerting:{AddAlertRule:{url:{"10.1.0":"/alerting/new/alerting",[lr]:"/alerting/new"}},EditAlertRule:{url:{[lr]:e=>`alerting/${e}/edit`}}},Login:{url:{[lr]:"/login"},username:{"10.2.3":"data-testid Username input field",[lr]:"Username input field"},password:{"10.2.3":"data-testid Password input field",[lr]:"Password input field"},submit:{"10.2.3":"data-testid Login button",[lr]:"Login button"},skip:{"10.2.3":"data-testid Skip change password button"}},PasswordlessLogin:{url:{[lr]:"/login/passwordless/authenticate"},email:{"10.2.3":"data-testid Email input field",[lr]:"Email input field"},submit:{"10.2.3":"data-testid PasswordlessLogin button",[lr]:"PasswordlessLogin button"}},Home:{url:{[lr]:"/"}},DataSource:{name:{"10.3.0":"data-testid Data source settings page name input field",[lr]:"Data source settings page name input field"},delete:{[lr]:"Data source settings page Delete button"},readOnly:{"10.3.0":"data-testid Data source settings page read only message",[lr]:"Data source settings page read only message"},saveAndTest:{"10.0.0":"data-testid Data source settings page Save and Test button",[lr]:"Data source settings page Save and Test button"},alert:{"10.3.0":"data-testid Data source settings page Alert",[lr]:"Data source settings page Alert"}},DataSources:{url:{[lr]:"/datasources"},dataSources:{[lr]:e=>`Data source list item ${e}`}},EditDataSource:{url:{"9.5.0":e=>`/datasources/edit/${e}`},settings:{"9.5.0":"Datasource settings page basic settings"}},AddDataSource:{url:{[lr]:"/datasources/new"},dataSourcePluginsV2:{"9.3.1":e=>`Add new data source ${e}`,[lr]:e=>`Data source plugin item ${e}`}},ConfirmModal:{delete:{"10.0.0":"data-testid Confirm Modal Danger Button",[lr]:"Confirm Modal Danger Button"}},AddDashboard:{url:{[lr]:"/dashboard/new"},itemButton:{"9.5.0":e=>`data-testid ${e}`},addNewPanel:{"11.1.0":"data-testid Add new panel","8.0.0":"Add new panel",[lr]:"Add new panel"},itemButtonAddViz:{[lr]:"Add new visualization menu item"},addNewRow:{"11.1.0":"data-testid Add new row",[lr]:"Add new row"},addNewPanelLibrary:{"11.1.0":"data-testid Add new panel from panel library",[lr]:"Add new panel from panel library"},Settings:{Annotations:{List:{url:{[lr]:"/dashboard/new?orgId=1&editview=annotations"}},Edit:{url:{[lr]:e=>`/dashboard/new?editview=annotations&editIndex=${e}`}}},Variables:{List:{url:{"11.3.0":"/dashboard/new?orgId=1&editview=variables",[lr]:"/dashboard/new?orgId=1&editview=templating"}},Edit:{url:{"11.3.0":e=>`/dashboard/new?orgId=1&editview=variables&editIndex=${e}`,[lr]:e=>`/dashboard/new?orgId=1&editview=templating&editIndex=${e}`}}}}},Dashboard:{url:{[lr]:e=>`/d/${e}`},DashNav:{nav:{[lr]:"Dashboard navigation"},navV2:{[lr]:"data-testid Dashboard navigation"},publicDashboardTag:{"9.1.0":"data-testid public dashboard tag"},shareButton:{"10.4.0":"data-testid share-button"},scrollContainer:{"11.1.0":"data-testid Dashboard canvas scroll container"},newShareButton:{container:{"11.1.0":"data-testid new share button"},shareLink:{"11.1.0":"data-testid new share link-button"},arrowMenu:{"11.1.0":"data-testid new share button arrow menu"},menu:{container:{"11.1.0":"data-testid new share button menu"},shareInternally:{"11.1.0":"data-testid new share button share internally"},shareExternally:{"11.1.1":"data-testid new share button share externally"},shareSnapshot:{"11.2.0":"data-testid new share button share snapshot"},inviteUser:{"11.5.0":"data-testid new share button invite user"}}},NewExportButton:{container:{"11.2.0":"data-testid new export button"},arrowMenu:{"11.2.0":"data-testid new export button arrow menu"},Menu:{container:{"11.2.0":"data-testid new export button menu"},exportAsJson:{"11.2.0":"data-testid new export button export as json"}}},playlistControls:{prev:{"11.0.0":"data-testid playlist previous dashboard button"},stop:{"11.0.0":"data-testid playlist stop dashboard button"},next:{"11.0.0":"data-testid playlist next dashboard button"}}},Controls:{"11.1.0":"data-testid dashboard controls"},SubMenu:{submenu:{[lr]:"Dashboard submenu"},submenuItem:{[lr]:"data-testid template variable"},submenuItemLabels:{[lr]:e=>`data-testid Dashboard template variables submenu Label ${e}`},submenuItemValueDropDownValueLinkTexts:{[lr]:e=>`data-testid Dashboard template variables Variable Value DropDown value link text ${e}`},submenuItemValueDropDownDropDown:{[lr]:"Variable options"},submenuItemValueDropDownOptionTexts:{[lr]:e=>`data-testid Dashboard template variables Variable Value DropDown option text ${e}`},Annotations:{annotationsWrapper:{"10.0.0":"data-testid annotation-wrapper"},annotationLabel:{"10.0.0":e=>`data-testid Dashboard annotations submenu Label ${e}`},annotationToggle:{"10.0.0":e=>`data-testid Dashboard annotations submenu Toggle ${e}`}}},Settings:{Actions:{close:{"9.5.0":"data-testid dashboard-settings-close"}},General:{deleteDashBoard:{"11.1.0":"data-testid Dashboard settings page delete dashboard button"},sectionItems:{[lr]:e=>`Dashboard settings section item ${e}`},saveDashBoard:{[lr]:"Dashboard settings aside actions Save button"},saveAsDashBoard:{[lr]:"Dashboard settings aside actions Save As button"},title:{"11.2.0":"General"}},Annotations:{Edit:{urlParams:{[lr]:e=>`editview=annotations&editIndex=${e}`}},List:{url:{[lr]:e=>`/d/${e}?editview=annotations`},addAnnotationCTAV2:{[lr]:"data-testid Call to action button Add annotation query"},annotations:{"10.4.0":"data-testid list-annotations"}},Settings:{name:{"11.1.0":"data-testid Annotations settings name input",[lr]:"Annotations settings name input"}},NewAnnotation:{panelFilterSelect:{"10.0.0":"data-testid annotations-panel-filter"},showInLabel:{"11.1.0":"data-testid show-in-label"},previewInDashboard:{"10.0.0":"data-testid annotations-preview"},delete:{"10.4.0":"data-testid annotations-delete"},apply:{"10.4.0":"data-testid annotations-apply"},enable:{"10.4.0":"data-testid annotation-enable"},hide:{"10.4.0":"data-testid annotation-hide"}}},Variables:{List:{url:{"11.3.0":e=>`/d/${e}?editview=variables`,[lr]:e=>`/d/${e}?editview=templating`},addVariableCTAV2:{[lr]:"data-testid Call to action button Add variable"},newButton:{[lr]:"Variable editor New variable button"},table:{[lr]:"Variable editor Table"},tableRowNameFields:{[lr]:e=>`Variable editor Table Name field ${e}`},tableRowDefinitionFields:{"10.1.0":e=>`Variable editor Table Definition field ${e}`},tableRowArrowUpButtons:{[lr]:e=>`Variable editor Table ArrowUp button ${e}`},tableRowArrowDownButtons:{[lr]:e=>`Variable editor Table ArrowDown button ${e}`},tableRowDuplicateButtons:{[lr]:e=>`Variable editor Table Duplicate button ${e}`},tableRowRemoveButtons:{[lr]:e=>`Variable editor Table Remove button ${e}`}},Edit:{urlParams:{"11.3.0":e=>`editview=variables&editIndex=${e}`,[lr]:e=>`editview=templating&editIndex=${e}`},General:{headerLink:{[lr]:"Variable editor Header link"},modeLabelNew:{[lr]:"Variable editor Header mode New"},modeLabelEdit:{[lr]:"Variable editor Header mode Edit"},generalNameInput:{[lr]:"Variable editor Form Name field"},generalNameInputV2:{[lr]:"data-testid Variable editor Form Name field"},generalTypeSelect:{[lr]:"Variable editor Form Type select"},generalTypeSelectV2:{[lr]:"data-testid Variable editor Form Type select"},generalLabelInput:{[lr]:"Variable editor Form Label field"},generalLabelInputV2:{[lr]:"data-testid Variable editor Form Label field"},generalHideSelect:{[lr]:"Variable editor Form Hide select"},generalHideSelectV2:{[lr]:"data-testid Variable editor Form Hide select"},selectionOptionsAllowCustomValueSwitch:{[lr]:"data-testid Variable editor Form Allow Custom Value switch"},selectionOptionsMultiSwitch:{"10.4.0":"data-testid Variable editor Form Multi switch",[lr]:"Variable editor Form Multi switch"},selectionOptionsIncludeAllSwitch:{"10.4.0":"data-testid Variable editor Form IncludeAll switch",[lr]:"Variable editor Form IncludeAll switch"},selectionOptionsCustomAllInput:{"10.4.0":"data-testid Variable editor Form IncludeAll field",[lr]:"Variable editor Form IncludeAll field"},previewOfValuesOption:{"10.4.0":"data-testid Variable editor Preview of Values option",[lr]:"Variable editor Preview of Values option"},submitButton:{"10.4.0":"data-testid Variable editor Run Query button",[lr]:"Variable editor Submit button"},applyButton:{"9.3.0":"data-testid Variable editor Apply button"}},QueryVariable:{queryOptionsDataSourceSelect:{"10.4.0":"data-testid Select a data source","10.0.0":"data-testid Data source picker select container",[lr]:"Data source picker select container"},queryOptionsRefreshSelect:{[lr]:"Variable editor Form Query Refresh select"},queryOptionsRefreshSelectV2:{[lr]:"data-testid Variable editor Form Query Refresh select"},queryOptionsRegExInput:{[lr]:"Variable editor Form Query RegEx field"},queryOptionsRegExInputV2:{[lr]:"data-testid Variable editor Form Query RegEx field"},queryOptionsSortSelect:{[lr]:"Variable editor Form Query Sort select"},queryOptionsSortSelectV2:{[lr]:"data-testid Variable editor Form Query Sort select"},queryOptionsQueryInput:{"10.4.0":"data-testid Variable editor Form Default Variable Query Editor textarea"},valueGroupsTagsEnabledSwitch:{[lr]:"Variable editor Form Query UseTags switch"},valueGroupsTagsTagsQueryInput:{[lr]:"Variable editor Form Query TagsQuery field"},valueGroupsTagsTagsValuesQueryInput:{[lr]:"Variable editor Form Query TagsValuesQuery field"}},ConstantVariable:{constantOptionsQueryInput:{[lr]:"Variable editor Form Constant Query field"},constantOptionsQueryInputV2:{[lr]:"data-testid Variable editor Form Constant Query field"}},DatasourceVariable:{datasourceSelect:{[lr]:"data-testid datasource variable datasource type"}},TextBoxVariable:{textBoxOptionsQueryInput:{[lr]:"Variable editor Form TextBox Query field"},textBoxOptionsQueryInputV2:{[lr]:"data-testid Variable editor Form TextBox Query field"}},CustomVariable:{customValueInput:{[lr]:"data-testid custom-variable-input"}},IntervalVariable:{intervalsValueInput:{[lr]:"data-testid interval variable intervals input"},autoEnabledCheckbox:{"10.4.0":"data-testid interval variable auto value checkbox"},stepCountIntervalSelect:{"10.4.0":"data-testid interval variable step count input"},minIntervalInput:{"10.4.0":"data-testid interval variable mininum interval input"}},GroupByVariable:{dataSourceSelect:{"10.4.0":"data-testid Select a data source"},infoText:{"10.4.0":"data-testid group by variable info text"},modeToggle:{"10.4.0":"data-testid group by variable mode toggle"}},AdHocFiltersVariable:{datasourceSelect:{"10.4.0":"data-testid Select a data source"},infoText:{"10.4.0":"data-testid ad-hoc filters variable info text"},modeToggle:{"11.0.0":"data-testid ad-hoc filters variable mode toggle"}}}}},Annotations:{marker:{"10.0.0":"data-testid annotation-marker"}},Rows:{Repeated:{ConfigSection:{warningMessage:{"10.2.0":"data-testid Repeated rows warning message"}}}}},Dashboards:{url:{[lr]:"/dashboards"},dashboards:{"10.2.0":e=>`Dashboard search item ${e}`}},SaveDashboardAsModal:{newName:{"10.2.0":"Save dashboard title field"},save:{"10.2.0":"Save dashboard button"}},SaveDashboardModal:{save:{"10.2.0":"Dashboard settings Save Dashboard Modal Save button"},saveVariables:{"10.2.0":"Dashboard settings Save Dashboard Modal Save variables checkbox"},saveTimerange:{"10.2.0":"Dashboard settings Save Dashboard Modal Save timerange checkbox"},saveRefresh:{"11.1.0":"Dashboard settings Save Dashboard Modal Save refresh checkbox"}},SharePanelModal:{linkToRenderedImage:{[lr]:"Link to rendered image"}},ShareDashboardModal:{PublicDashboard:{WillBePublicCheckbox:{"9.1.0":"data-testid public dashboard will be public checkbox"},LimitedDSCheckbox:{"9.1.0":"data-testid public dashboard limited datasources checkbox"},CostIncreaseCheckbox:{"9.1.0":"data-testid public dashboard cost may increase checkbox"},PauseSwitch:{"9.5.0":"data-testid public dashboard pause switch"},EnableAnnotationsSwitch:{"9.3.0":"data-testid public dashboard on off switch for annotations"},CreateButton:{"9.5.0":"data-testid public dashboard create button"},DeleteButton:{"9.3.0":"data-testid public dashboard delete button"},CopyUrlInput:{"9.1.0":"data-testid public dashboard copy url input"},CopyUrlButton:{"9.1.0":"data-testid public dashboard copy url button"},SettingsDropdown:{"10.1.0":"data-testid public dashboard settings dropdown"},TemplateVariablesWarningAlert:{"9.1.0":"data-testid public dashboard disabled template variables alert"},UnsupportedDataSourcesWarningAlert:{"9.5.0":"data-testid public dashboard unsupported data sources alert"},NoUpsertPermissionsWarningAlert:{"9.5.0":"data-testid public dashboard no upsert permissions alert"},EnableTimeRangeSwitch:{"9.4.0":"data-testid public dashboard on off switch for time range"},EmailSharingConfiguration:{Container:{"9.5.0":"data-testid email sharing config container"},ShareType:{"9.5.0":"data-testid public dashboard share type"},EmailSharingInput:{"9.5.0":"data-testid public dashboard email sharing input"},EmailSharingInviteButton:{"9.5.0":"data-testid public dashboard email sharing invite button"},EmailSharingList:{"9.5.0":"data-testid public dashboard email sharing list"},DeleteEmail:{"9.5.0":"data-testid public dashboard delete email button"},ReshareLink:{"9.5.0":"data-testid public dashboard reshare link button"}}},SnapshotScene:{url:{"11.1.0":e=>`/dashboard/snapshot/${e}`},PublishSnapshot:{"11.1.0":"data-testid publish snapshot button"},CopyUrlButton:{"11.1.0":"data-testid snapshot copy url button"},CopyUrlInput:{"11.1.0":"data-testid snapshot copy url input"}}},ShareDashboardDrawer:{ShareInternally:{container:{"11.3.0":"data-testid share internally drawer container"},lockTimeRangeSwitch:{"11.3.0":"data-testid share internally lock time range switch"},shortenUrlSwitch:{"11.3.0":"data-testid share internally shorten url switch"},copyUrlButton:{"11.3.0":"data-testid share internally copy url button"},SharePanel:{preview:{"11.5.0":"data-testid share panel internally image generation preview"},widthInput:{"11.5.0":"data-testid share panel internally width input"},heightInput:{"11.5.0":"data-testid share panel internally height input"},scaleFactorInput:{"11.5.0":"data-testid share panel internally scale factor input"},generateImageButton:{"11.5.0":"data-testid share panel internally generate image button"},downloadImageButton:{"11.5.0":"data-testid share panel internally download image button"}}},ShareExternally:{container:{"11.3.0":"data-testid share externally drawer container"},publicAlert:{"11.3.0":"data-testid public share alert"},emailSharingAlert:{"11.3.0":"data-testid email share alert"},shareTypeSelect:{"11.3.0":"data-testid share externally share type select"},Creation:{PublicShare:{createButton:{"11.3.0":"data-testid public share dashboard create button"},cancelButton:{"11.3.0":"data-testid public share dashboard cancel button"}},EmailShare:{createButton:{"11.3.0":"data-testid email share dashboard create button"},cancelButton:{"11.3.0":"data-testid email share dashboard cancel button"}},willBePublicCheckbox:{"11.3.0":"data-testid share dashboard will be public checkbox"}},Configuration:{enableTimeRangeSwitch:{"11.3.0":"data-testid share externally enable time range switch"},enableAnnotationsSwitch:{"11.3.0":"data-testid share externally enable annotations switch"},copyUrlButton:{"11.3.0":"data-testid share externally copy url button"},revokeAccessButton:{"11.3.0":"data-testid share externally revoke access button"},toggleAccessButton:{"11.3.0":"data-testid share externally pause or resume access button"}}},ShareSnapshot:{url:{"11.3.0":e=>`/dashboard/snapshot/${e}`},container:{"11.3.0":"data-testid share snapshot drawer container"},publishSnapshot:{"11.3.0":"data-testid share snapshot publish button"},copyUrlButton:{"11.3.0":"data-testid share snapshot copy url button"}}},ExportDashboardDrawer:{ExportAsJson:{container:{"11.3.0":"data-testid export as json drawer container"},codeEditor:{"11.3.0":"data-testid export as json code editor"},exportExternallyToggle:{"11.3.0":"data-testid export as json externally switch"},saveToFileButton:{"11.3.0":"data-testid export as json save to file button"},copyToClipboardButton:{"11.3.0":"data-testid export as json copy to clipboard button"},cancelButton:{"11.3.0":"data-testid export as json cancel button"}}},PublicDashboard:{page:{"9.5.0":"public-dashboard-page"},NotAvailable:{container:{"9.5.0":"public-dashboard-not-available"},title:{"9.5.0":"public-dashboard-title"},pausedDescription:{"9.5.0":"public-dashboard-paused-description"}},footer:{"11.0.0":"public-dashboard-footer"}},PublicDashboardScene:{loadingPage:{"11.0.0":"public-dashboard-scene-loading-page"},page:{"11.0.0":"public-dashboard-scene-page"},controls:{"11.0.0":"public-dashboard-controls"}},RequestViewAccess:{form:{"9.5.0":"request-view-access-form"},recipientInput:{"9.5.0":"request-view-access-recipient-input"},submitButton:{"9.5.0":"request-view-access-submit-button"}},PublicDashboardConfirmAccess:{submitButton:{"10.2.0":"data-testid confirm-access-submit-button"}},Explore:{url:{[lr]:"/explore"},General:{container:{[lr]:"data-testid Explore"},graph:{[lr]:"Explore Graph"},table:{[lr]:"Explore Table"},scrollView:{"9.0.0":"data-testid explorer scroll view"}},QueryHistory:{container:{"11.1.0":"data-testid QueryHistory"}}},SoloPanel:{url:{[lr]:e=>`/d-solo/${e}`}},PluginsList:{page:{[lr]:"Plugins list page"},list:{[lr]:"Plugins list"},listItem:{[lr]:"Plugins list item"},signatureErrorNotice:{"10.3.0":"data-testid Unsigned plugins notice",[lr]:"Unsigned plugins notice"}},PluginPage:{page:{[lr]:"Plugin page"},signatureInfo:{"10.3.0":"data-testid Plugin signature info",[lr]:"Plugin signature info"},disabledInfo:{"10.3.0":"data-testid Plugin disabled info",[lr]:"Plugin disabled info"}},PlaylistForm:{name:{[lr]:"Playlist name"},interval:{[lr]:"Playlist interval"},itemDelete:{"10.2.0":"data-testid playlist-form-delete-item"}},BrowseDashboards:{table:{body:{"10.2.0":"data-testid browse-dashboards-table"},row:{"10.2.0":e=>`data-testid browse dashboards row ${e}`},checkbox:{"10.0.0":e=>`data-testid ${e} checkbox`}},NewFolderForm:{form:{"10.2.0":"data-testid new folder form"},nameInput:{"10.2.0":"data-testid new-folder-name-input"},createButton:{"10.2.0":"data-testid new-folder-create-button"}}},Search:{url:{"9.3.0":"/?search=openn"},FolderView:{url:{"9.3.0":"/?search=open&layout=folders"}}},PublicDashboards:{ListItem:{linkButton:{"9.3.0":"public-dashboard-link-button"},configButton:{"9.3.0":"public-dashboard-configuration-button"},trashcanButton:{"9.3.0":"public-dashboard-remove-button"},pauseSwitch:{"10.1.0":"data-testid public dashboard pause switch"}}},UserListPage:{tabs:{allUsers:{"10.0.0":"data-testid all-users-tab"},orgUsers:{"10.0.0":"data-testid org-users-tab"},anonUserDevices:{"10.2.3":"data-testid anon-user-devices-tab"},publicDashboardsUsers:{"10.0.0":"data-testid public-dashboards-users-tab"},users:{"10.0.0":"data-testid users-tab"}},org:{url:{"10.2.0":"/admin/users","9.5.0":"/org/users"}},admin:{url:{"9.5.0":"/admin/users"}},publicDashboards:{container:{"11.1.0":"data-testid public-dashboards-users-list"}},UserListAdminPage:{container:{"10.0.0":"data-testid user-list-admin-page"}},UsersListPage:{container:{"10.0.0":"data-testid users-list-page"}},UserAnonListPage:{container:{"10.4.0":"data-testid user-anon-list-page"}},UsersListPublicDashboardsPage:{container:{"10.0.0":"data-testid users-list-public-dashboards-page"},DashboardsListModal:{listItem:{"10.0.0":e=>`data-testid dashboards-list-item-${e}`}}}},ProfilePage:{url:{"10.2.0":"/profile"}},Plugin:{url:{[lr]:e=>`/plugins/${e}`}}}),components:nr(ur)},dr=(e,t)=>e>t?1:e<t?-1:0,pr=1/0,hr=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),fr="eexxaacctt",mr=/\p{P}/gu,gr=["en",{numeric:!0,sensitivity:"base"}],vr=(e,t,r)=>e.replace("A-Z",t).replace("a-z",r),br={unicode:!1,alpha:null,interSplit:"[^A-Za-z\\d']+",intraSplit:"[a-z][A-Z]",interBound:"[^A-Za-z\\d]",intraBound:"[A-Za-z]\\d|\\d[A-Za-z]|[a-z][A-Z]",interLft:0,interRgt:0,interChars:".",interIns:pr,intraChars:"[a-z\\d']",intraIns:null,intraContr:"'[a-z]{1,2}\\b",intraMode:0,intraSlice:[1,pr],intraSub:null,intraTrn:null,intraDel:null,intraFilt:(e,t,r)=>!0,toUpper:e=>e.toLocaleUpperCase(),toLower:e=>e.toLocaleLowerCase(),compare:null,sort:(e,t,r,n=dr)=>{let{idx:a,chars:o,terms:i,interLft2:s,interLft1:l,start:u,intraIns:c,interIns:d,cases:p}=e;return a.map(((e,t)=>t)).sort(((e,r)=>o[r]-o[e]||c[e]-c[r]||i[r]+s[r]+.5*l[r]-(i[e]+s[e]+.5*l[e])||d[e]-d[r]||u[e]-u[r]||p[r]-p[e]||n(t[a[e]],t[a[r]])))}},yr=(e,t)=>0==t?"":1==t?e+"??":t==pr?e+"*?":e+`{0,${t}}?`,wr="(?:\\b|_)";function Sr(e){e=Object.assign({},br,e);let{unicode:t,interLft:r,interRgt:n,intraMode:a,intraSlice:o,intraIns:i,intraSub:s,intraTrn:l,intraDel:u,intraContr:c,intraSplit:d,interSplit:p,intraBound:h,interBound:f,intraChars:m,toUpper:g,toLower:v,compare:b}=e;i??=a,s??=a,l??=a,u??=a,b??="undefined"==typeof Intl?dr:new Intl.Collator(...gr).compare;let y=e.letters??e.alpha;if(null!=y){let e=g(y),t=v(y);p=vr(p,e,t),d=vr(d,e,t),f=vr(f,e,t),h=vr(h,e,t),m=vr(m,e,t),c=vr(c,e,t)}let w=t?"u":"";const S='".+?"',E=new RegExp(S,"gi"+w),O=new RegExp(`(?:\\s+|^)-(?:${m}+|${S})`,"gi"+w);let{intraRules:x}=e;null==x&&(x=e=>{let t=br.intraSlice,r=0,n=0,a=0,c=0;if(/[^\d]/.test(e)){let d=e.length;d<=4?d>=3&&(a=Math.min(l,1),4==d&&(r=Math.min(i,1))):(t=o,r=i,n=s,a=l,c=u)}return{intraSlice:t,intraIns:r,intraSub:n,intraTrn:a,intraDel:c}});let R=!!d,_=new RegExp(d,"g"+w),C=new RegExp(p,"g"+w),P=new RegExp("^"+p+"|"+p+"$","g"+w),I=new RegExp(c,"gi"+w);const T=(e,t=!1)=>{let r=[];e=(e=e.replace(E,(e=>(r.push(e),fr)))).replace(P,""),t||(e=v(e)),R&&(e=e.replace(_,(e=>e[0]+" "+e[1])));let n=0;return e.split(C).filter((e=>""!=e)).map((e=>e===fr?r[n++]:e))},D=/[^\d]+|\d+/g,A=(t,o=0,s=!1)=>{let l=T(t);if(0==l.length)return[];let u,c=Array(l.length).fill("");if(l=l.map(((e,t)=>e.replace(I,(e=>(c[t]=e,""))))),1==a)u=l.map(((e,t)=>{if('"'===e[0])return hr(e.slice(1,-1));let r="";for(let n of e.matchAll(D)){let e=n[0],{intraSlice:a,intraIns:o,intraSub:i,intraTrn:s,intraDel:l}=x(e);if(o+i+s+l==0)r+=e+c[t];else{let[n,u]=a,d=e.slice(0,n),p=e.slice(u),h=e.slice(n,u);1==o&&1==d.length&&d!=h[0]&&(d+="(?!"+d+")");let f=h.length,g=[e];if(i)for(let e=0;e<f;e++)g.push(d+h.slice(0,e)+m+h.slice(e+1)+p);if(s)for(let e=0;e<f-1;e++)h[e]!=h[e+1]&&g.push(d+h.slice(0,e)+h[e+1]+h[e]+h.slice(e+2)+p);if(l)for(let e=0;e<f;e++)g.push(d+h.slice(0,e+1)+"?"+h.slice(e+1)+p);if(o){let e=yr(m,1);for(let t=0;t<f;t++)g.push(d+h.slice(0,t)+e+h.slice(t)+p)}r+="(?:"+g.join("|")+")"+c[t]}}return r}));else{let e=yr(m,i);2==o&&i>0&&(e=")("+e+")("),u=l.map(((t,r)=>'"'===t[0]?hr(t.slice(1,-1)):t.split("").map(((e,t,r)=>(1==i&&0==t&&r.length>1&&e!=r[t+1]&&(e+="(?!"+e+")"),e))).join(e)+c[r]))}let d=2==r?wr:"",p=2==n?wr:"",h=p+yr(e.interChars,e.interIns)+d;return o>0?s?u=d+"("+u.join(")"+p+"|"+d+"(")+")"+p:(u="("+u.join(")("+h+")(")+")",u="(.??"+d+")"+u+"("+p+".*)"):(u=u.join(h),u=d+u+p),[new RegExp(u,"i"+w),l,c]},k=(e,t,r)=>{let[n]=A(t);if(null==n)return null;let a=[];if(null!=r)for(let t=0;t<r.length;t++){let o=r[t];n.test(e[o])&&a.push(o)}else for(let t=0;t<e.length;t++)n.test(e[t])&&a.push(t);return a};let j=!!h,L=new RegExp(f,w),M=new RegExp(h,w);const N=(t,a,o)=>{let[i,s,l]=A(o,1),u=T(o,!0),[c]=A(o,2),d=s.length,p=Array(d),h=Array(d);for(let e=0;e<d;e++){let t=s[e],r=u[e],n='"'==t[0]?t.slice(1,-1):t+l[e],a='"'==r[0]?r.slice(1,-1):r+l[e];p[e]=n,h[e]=a}let f=t.length,m=Array(f).fill(0),g={idx:Array(f),start:m.slice(),chars:m.slice(),cases:m.slice(),terms:m.slice(),interIns:m.slice(),intraIns:m.slice(),interLft2:m.slice(),interRgt2:m.slice(),interLft1:m.slice(),interRgt1:m.slice(),ranges:Array(f)},b=1==r||1==n,y=0;for(let o=0;o<t.length;o++){let s=a[t[o]],l=s.match(i),u=l.index+l[1].length,f=u,m=!1,S=0,E=0,O=0,x=0,R=0,_=0,C=0,P=0,I=0,T=[];for(let t=0,a=2;t<d;t++,a+=2){let o=v(l[a]),i=p[t],c=h[t],g=i.length,y=o.length,D=o==i;if(l[a]==c&&C++,!D&&l[a+1].length>=g){let e=v(l[a+1]).indexOf(i);e>-1&&(T.push(f,y,e,g),f+=$(l,a,e,g),o=i,y=g,D=!0,0==t&&(u=f))}if(b||D){let e=f-1,c=f+y,d=!1,p=!1;if(-1==e||L.test(s[e]))D&&S++,d=!0;else{if(2==r){m=!0;break}if(j&&M.test(s[e]+s[e+1]))D&&E++,d=!0;else if(1==r){let e=l[a+1],r=f+y;if(e.length>=g){let n,c=0,p=!1,h=new RegExp(i,"ig"+w);for(;n=h.exec(e);){c=n.index;let e=r+c,t=e-1;if(-1==t||L.test(s[t])){S++,p=!0;break}if(M.test(s[t]+s[e])){E++,p=!0;break}}p&&(d=!0,T.push(f,y,c,g),f+=$(l,a,c,g),o=i,y=g,D=!0,0==t&&(u=f))}if(!d){m=!0;break}}}if(c==s.length||L.test(s[c]))D&&O++,p=!0;else{if(2==n){m=!0;break}if(j&&M.test(s[c-1]+s[c]))D&&x++,p=!0;else if(1==n){m=!0;break}}D&&(R+=g,d&&p&&_++)}if(y>g&&(I+=y-g),t>0&&(P+=l[a-1].length),!e.intraFilt(i,o,f)){m=!0;break}t<d-1&&(f+=y+l[a+1].length)}if(!m){g.idx[y]=t[o],g.interLft2[y]=S,g.interLft1[y]=E,g.interRgt2[y]=O,g.interRgt1[y]=x,g.chars[y]=R,g.terms[y]=_,g.cases[y]=C,g.interIns[y]=P,g.intraIns[y]=I,g.start[y]=u;let e=s.match(c),r=e.index+e[1].length,n=T.length,a=n>0?0:1/0,i=n-4;for(let t=2;t<e.length;){let n=e[t].length;if(a<=i&&T[a]==r){let n=T[a+1],o=T[a+2],i=T[a+3],s=t,l="";for(let t=0;t<n;s++)l+=e[s],t+=e[s].length;e.splice(t,s-t,l),r+=$(e,t,o,i),a+=4}else r+=n,t++}r=e.index+e[1].length;let l=g.ranges[y]=[],d=r,p=r;for(let t=2;t<e.length;t++){let n=e[t].length;r+=n,t%2==0?p=r:n>0&&(l.push(d,p),d=p=r)}p>d&&l.push(d,p),y++}}if(y<t.length)for(let e in g)g[e]=g[e].slice(0,y);return g},$=(e,t,r,n)=>{let a=e[t]+e[t+1].slice(0,r);return e[t-1]+=a,e[t]=e[t+1].slice(r,r+n),e[t+1]=e[t+1].slice(r+n),a.length};return{search:(...t)=>((t,r,n,a=1e3,o)=>{n=n?!0===n?5:n:0;let i=null,s=null,l=[];r=r.replace(O,(e=>{let t=e.trim().slice(1);return t='"'===t[0]?hr(t.slice(1,-1)):t.replace(mr,""),""!=t&&l.push(t),""}));let u,c=T(r);if(l.length>0){if(u=new RegExp(l.join("|"),"i"+w),0==c.length){let e=[];for(let r=0;r<t.length;r++)u.test(t[r])||e.push(r);return[e,null,null]}}else if(0==c.length)return[null,null,null];if(n>0){let e=T(r);if(e.length>1){let r=e.slice().sort(((e,t)=>t.length-e.length));for(let e=0;e<r.length;e++){if(0==o?.length)return[[],null,null];o=k(t,r[e],o)}if(e.length>n)return[o,null,null];i=Or(e).map((e=>e.join(" "))),s=[];let a=new Set;for(let e=0;e<i.length;e++)if(a.size<o.length){let r=o.filter((e=>!a.has(e))),n=k(t,i[e],r);for(let e=0;e<n.length;e++)a.add(n[e]);s.push(n)}else s.push([])}}null==i&&(i=[r],s=[o?.length>0?o:k(t,r)]);let d=null,p=null;if(l.length>0&&(s=s.map((e=>e.filter((e=>!u.test(t[e])))))),s.reduce(((e,t)=>e+t.length),0)<=a){d={},p=[];for(let r=0;r<s.length;r++){let n=s[r];if(null==n||0==n.length)continue;let a=i[r],o=N(n,t,a),l=e.sort(o,t,a,b);if(r>0)for(let e=0;e<l.length;e++)l[e]+=p.length;for(let e in o)d[e]=(d[e]??[]).concat(o[e]);p=p.concat(l)}}return[[].concat(...s),d,p]})(...t),split:T,filter:k,info:N,sort:e.sort}}const Er=(()=>{let e={A:"",a:"",E:"",e:"",I:"",i:"",O:"",o:"",U:"",u:"",C:"",c:"",L:"",l:"",N:"",n:"",S:"",s:"",Z:"",z:""},t=new Map,r="";for(let n in e)e[n].split("").forEach((e=>{r+=e,t.set(e,n)}));let n=new RegExp(`[${r}]`,"g"),a=e=>t.get(e);return e=>{if("string"==typeof e)return e.replace(n,a);let t=Array(e.length);for(let r=0;r<e.length;r++)t[r]=e[r].replace(n,a);return t}})();function Or(e){let t,r,n=(e=e.slice()).length,a=[e.slice()],o=new Array(n).fill(0),i=1;for(;i<n;)o[i]<i?(t=i%2&&o[i],r=e[i],e[i]=e[t],e[t]=r,++o[i],i=1,a.push(e.slice())):(o[i]=0,++i);return a}const xr=(e,t)=>t?`<mark>${e}</mark>`:e,Rr=(e,t)=>e+t;Sr.latinize=Er,Sr.permute=e=>Or([...Array(e.length).keys()]).sort(((e,t)=>{for(let r=0;r<e.length;r++)if(e[r]!=t[r])return e[r]-t[r];return 0})).map((t=>t.map((t=>e[t])))),Sr.highlight=function(e,t,r=xr,n="",a=Rr){n=a(n,r(e.substring(0,t[0]),!1))??n;for(let o=0;o<t.length;o+=2){let i=t[o],s=t[o+1];n=a(n,r(e.substring(i,s),!0))??n,o<t.length-3&&(n=a(n,r(e.substring(t[o+1],t[o+2]),!1))??n)}return n=a(n,r(e.substring(t[t.length-1]),!1))??n};const _r=/[^ -~]/m,Cr=/^[\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7E]+$/m,Pr=new Sr({intraMode:1});function Ir(e,t,r){let n=[];if(""===r)n=e;else if(_r.test(r)||Cr.test(r)||r.length>25||Pr.split(r).length>5)for(let a=0;a<t.length;a++){t[a].includes(r)&&n.push(e[a])}else{const[a,o,i]=Pr.search(t,r,5,1e4);(null==a?void 0:a.length)&&(n=o&&i?i.map((t=>e[o.idx[t]])):a.map((t=>e[t])))}return n}function Tr(e,t=!1){let r=e;t&&(r=[{value:et,label:Je},...r]);const n=r.map((e=>e.label));return e=>Ir(r,n,e)}var Dr=Object.defineProperty,Ar=Object.defineProperties,kr=Object.getOwnPropertyDescriptors,jr=Object.getOwnPropertySymbols,Lr=Object.prototype.hasOwnProperty,Mr=Object.prototype.propertyIsEnumerable,Nr=(e,t,r)=>t in e?Dr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const $r=()=>!0,Vr=e=>"$__all"!==e.value,Fr=(e,t)=>e.length===t.filter(Vr).length?s.ToggleAllState.allSelected:0===e.length||1===e.length&&e[0]&&"$__all"===e[0].value?s.ToggleAllState.noneSelected:s.ToggleAllState.indeterminate;function Br({model:e}){const{value:t,text:r,key:a,options:i,includeAll:l,isReadOnly:u,allowCustomValue:c=!0}=e.useState(),[d,p]=(0,n.useState)(""),[h,f]=(0,n.useState)(!1),m=function(e,t){return{value:e,label:null!=t?t:String(e)}}(t,String(r)),g=qu.getQueryController(e),v=(0,n.useMemo)((()=>Tr(i,l)),[i,l])(d);return o().createElement(s.Select,{id:a,isValidNewOption:e=>e.trim().length>0,placeholder:"Select value",width:"auto",disabled:u,value:m,inputValue:d,allowCustomValue:c,virtualized:!0,filterOption:$r,tabSelectsValue:!1,onInputChange:(t,{action:r})=>"input-change"===r?(p(t),e.onSearchChange&&e.onSearchChange(t),t):t,onOpenMenu:()=>{h&&p(String(r))},onCloseMenu:()=>{p("")},options:v,"data-testid":cr.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${t}`),onChange:t=>{e.changeValueTo(t.value,t.label,!0),null==g||g.startProfile("VariableValueSelect"),h!==t.__isNew__&&f(t.__isNew__)}})}function zr({model:e}){const{value:t,options:r,key:a,maxVisibleValues:i,noValueOnClear:l,includeAll:u,isReadOnly:c,allowCustomValue:d=!0}=e.useState(),p=(0,n.useMemo)((()=>(0,te.isArray)(t)?t:[t]),[t]),[h,f]=(0,n.useState)(p),[m,g]=(0,n.useState)(""),v=qu.getQueryController(e),b=(0,n.useMemo)((()=>Tr(r,u)),[r,u]);(0,n.useEffect)((()=>{f(p)}),[p]);const y=r.length>0?"Select value":"",w=b(m);return o().createElement(s.MultiSelect,{id:a,placeholder:y,width:"auto",inputValue:m,disabled:c,value:h,noMultiValueWrap:!0,maxVisibleValues:null!=i?i:5,tabSelectsValue:!1,virtualized:!0,allowCustomValue:d,toggleAllOptions:{enabled:!0,optionsFilter:Vr,determineToggleAllState:Fr},options:w,closeMenuOnSelect:!1,components:{Option:Ur},isClearable:!0,hideSelectedOptions:!1,onInputChange:(t,{action:r})=>"input-change"===r?(g(t),e.onSearchChange&&e.onSearchChange(t),t):"input-blur"===r?(g(""),""):m,onBlur:()=>{e.changeValueTo(h,void 0,!0),null==v||v.startProfile("VariableValueSelectMulti")},filterOption:$r,"data-testid":cr.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${h}`),onChange:(t,r)=>{"clear"===r.action&&l&&e.changeValueTo([],void 0,!0),f(t.map((e=>e.value)))}})}const Ur=({children:e,data:t,innerProps:r,innerRef:n,isFocused:a,isSelected:i,indeterminate:l,renderOptionLabel:u})=>{var c;const d=((e,t)=>{var r={};for(var n in e)Lr.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&jr)for(var n of jr(e))t.indexOf(n)<0&&Mr.call(e,n)&&(r[n]=e[n]);return r})(r,["onMouseMove","onMouseOver"]),h=(0,s.useTheme2)(),f=(0,s.getSelectStyles)(h),m=(0,s.useStyles2)(Wr);return o().createElement("div",(g=((e,t)=>{for(var r in t||(t={}))Lr.call(t,r)&&Nr(e,r,t[r]);if(jr)for(var r of jr(t))Mr.call(t,r)&&Nr(e,r,t[r]);return e})({ref:n,className:(0,p.cx)(f.option,a&&f.optionFocused)},d),v={"data-testid":"data-testid Select option",title:t.title},Ar(g,kr(v))),o().createElement("div",{className:m.checkbox},o().createElement(s.Checkbox,{indeterminate:l,value:i})),o().createElement("div",{className:f.optionBody,"data-testid":cr.pages.Dashboard.SubMenu.submenuItemValueDropDownOptionTexts(null!=(c=t.label)?c:String(t.value))},o().createElement("span",null,e)));var g,v};Ur.displayName="SelectMenuOptions";const Wr=e=>({checkbox:(0,p.css)({marginRight:e.spacing(2)})});function Hr(e){return e.state.isMulti?o().createElement(zr,{model:e}):o().createElement(Br,{model:e})}class Gr{constructor(e){this._sceneObject=e}getKey(){return`var-${this._sceneObject.state.name}`}getKeys(){return this._sceneObject.state.skipUrlSync?[]:[this.getKey()]}getUrlState(){return this._sceneObject.state.skipUrlSync?{}:{[this.getKey()]:qr(this._sceneObject.state.value,this._sceneObject.state.text)}}updateFromUrl(e){let t=e[this.getKey()];if(null!=t){this._sceneObject.isActive||(this._sceneObject.skipNextValidation=!0);const{values:e,texts:n}=(r=t,(r=Array.isArray(r)?r:[r]).reduce(((e,t)=>{const[r,n]=(null!=t?t:"").split(",");return e.values.push(Yl(r)),e.texts.push(Yl(null!=n?n:r)),e}),{values:[],texts:[]}));this._sceneObject.changeValueTo(e,n)}var r}}function qr(e,t){return e=Array.isArray(e)?e:[e],t=Array.isArray(t)?t:[t],e.map(((e,r)=>{if(null==e)return"";e=String(e);let n=t[r];return n=null==n?e:String(n),Kl(e,n)}))}function Qr(e){const t=e.getRoot();return"enrichFiltersRequest"in t?t.enrichFiltersRequest(e):null}var Xr,Yr=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};class Kr{constructor(e){((e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)})(this,Xr,void 0),this.text="__sceneObject",this.valueOf=()=>{return Yr(e=this,t=Xr,"read from private field"),r?r.call(e):t.get(e);var e,t,r},((e,t,r,n)=>{Yr(e,t,"write to private field"),n?n.call(e,r):t.set(e,r)})(this,Xr,e)}toString(){}get value(){return this}}function Zr(e){return function(e){const t=e.match(/^(\d+)\.(\d+)\.(\d+)/);if(!t)return!1;const r=parseInt(t[1],10),n=parseInt(t[2],10),a=parseInt(t[3],10);return 11===r?0===n&&a>=4||1===n&&a>=2||n>1:10===r?4===n&&a>=8||n>=5:r>11}(i.config.buildInfo.version)?new Kr(e):{value:e,text:"__sceneObject"}}Xr=new WeakMap;var Jr=Object.defineProperty,en=Object.defineProperties,tn=Object.getOwnPropertyDescriptors,rn=Object.getOwnPropertySymbols,nn=Object.prototype.hasOwnProperty,an=Object.prototype.propertyIsEnumerable,on=(e,t,r)=>t in e?Jr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,sn=(e,t)=>{for(var r in t||(t={}))nn.call(t,r)&&on(e,r,t[r]);if(rn)for(var r of rn(t))an.call(t,r)&&on(e,r,t[r]);return e};class ln extends ut{constructor(e){var t;super((t=sn({isMulti:!0,name:"",value:[],text:[],options:[],datasource:null,baseFilters:[],applyMode:"auto",layout:"horizontal",type:"groupby"},e),en(t,tn({noValueOnClear:!0})))),this.isLazy=!0,this._urlSync=new Gr(this),this._getKeys=async e=>{var t,r,n,a;const o=await(null==(r=(t=this.state).getTagKeysProvider)?void 0:r.call(t,this,null));if(o&&o.replace)return o.values;if(this.state.defaultOptions)return this.state.defaultOptions.concat(Zl(null!=(n=null==o?void 0:o.values)?n:[]));if(!e.getTagKeys)return[];const i=Gl(this),s=this.state.baseFilters||[],l=qu.getTimeRange(this).state.value,u=await e.getTagKeys(sn({filters:s,queries:i,timeRange:l,scopes:null==(a=this._scopesBridge)?void 0:a.getValue()},Qr(this)));Jl(u)&&this.setState({error:u.error.message});let c=Zl(u);o&&(c=c.concat(Zl(o.values)));const d=this.state.tagKeyRegexFilter;return d&&(c=c.filter((e=>e.text.match(d)))),c},"auto"===this.state.applyMode&&this.addActivationHandler((()=>(tr.add(this),()=>tr.delete(this))))}validateAndUpdate(){return this.getValueOptions({}).pipe((0,x.map)((e=>(this._updateValueGivenNewOptions(e),{}))))}_updateValueGivenNewOptions(e){const{value:t,text:r}=this.state,n={options:e,loading:!1,value:null!=t?t:[],text:null!=r?r:[]};this.setState(n)}getValueOptions(e){return this.state.defaultOptions?(0,x.of)(this.state.defaultOptions.map((e=>({label:e.text,value:String(e.value),group:e.group})))):(this.setState({loading:!0,error:null}),(0,x.from)(Tt(this.state.datasource,{__sceneObject:Zr(this)})).pipe((0,x.mergeMap)((e=>(0,x.from)(this._getKeys(e)).pipe((0,x.tap)((e=>{Jl(e)&&this.setState({error:e.error.message})})),(0,x.map)((e=>Zl(e))),(0,x.take)(1),(0,x.mergeMap)((e=>{const t=e.map((e=>({label:e.text,value:e.value?String(e.value):e.text,group:e.group})));return(0,x.of)(t)})))))))}getDefaultMultiState(e){return{value:[],text:[]}}}ln.Component=function({model:e}){const{value:t,text:r,key:a,isMulti:i=!0,maxVisibleValues:l,noValueOnClear:u,options:c,includeAll:d,allowCustomValue:p=!0}=e.useState(),h=(0,n.useMemo)((()=>{const e=(0,te.isArray)(t)?t:[t],n=(0,te.isArray)(r)?r:[r];return e.map(((e,t)=>{var r;return{value:e,label:String(null!=(r=n[t])?r:e)}}))}),[t,r]),[f,m]=(0,n.useState)(!1),[g,v]=(0,n.useState)(!1),[b,y]=(0,n.useState)(""),[w,S]=(0,n.useState)(h),E=(0,n.useMemo)((()=>Tr(c,d)),[c,d]);(0,n.useEffect)((()=>{S(h)}),[h]);const O=(t,{action:r})=>"input-change"===r?(y(t),e.onSearchChange&&e.onSearchChange(t),t):"input-blur"===r?(y(""),""):b,R=(0,n.useMemo)((()=>eu(E(b).map(cn))),[E,b]);return i?o().createElement(s.MultiSelect,{"aria-label":"Group by selector","data-testid":`GroupBySelect-${a}`,id:a,placeholder:"Select value",width:"auto",allowCustomValue:p,inputValue:b,value:w,noMultiValueWrap:!0,maxVisibleValues:null!=l?l:5,tabSelectsValue:!1,virtualized:!0,options:R,filterOption:un,closeMenuOnSelect:!1,isOpen:g,isClearable:!0,hideSelectedOptions:!1,isLoading:f,components:{Option:Ur},onInputChange:O,onBlur:()=>{e.changeValueTo(w.map((e=>e.value)),w.map((e=>e.label)),!0)},onChange:(t,r)=>{"clear"===r.action&&u&&e.changeValueTo([],void 0,!0),S(t)},onOpenMenu:async()=>{m(!0),await(0,x.lastValueFrom)(e.validateAndUpdate()),m(!1),v(!0)},onCloseMenu:()=>{v(!1)}}):o().createElement(s.Select,{"aria-label":"Group by selector","data-testid":`GroupBySelect-${a}`,id:a,placeholder:"Select value",width:"auto",inputValue:b,value:w,allowCustomValue:p,noMultiValueWrap:!0,maxVisibleValues:null!=l?l:5,tabSelectsValue:!1,virtualized:!0,options:R,filterOption:un,closeMenuOnSelect:!0,isOpen:g,isClearable:!0,hideSelectedOptions:!1,noValueOnClear:!0,isLoading:f,onInputChange:O,onChange:(t,r)=>{if("clear"===r.action)return S([]),void(u&&e.changeValueTo([]));(null==t?void 0:t.value)&&(S([t]),e.changeValueTo([t.value],t.label?[t.label]:void 0))},onOpenMenu:async()=>{m(!0),await(0,x.lastValueFrom)(e.validateAndUpdate()),m(!1),v(!0)},onCloseMenu:()=>{v(!1)}})};const un=()=>!0;function cn(e){const{label:t,value:r,group:n}=e,a={label:t,value:r};return n&&(a.group=n),a}function dn(e){return o().createElement(s.Tooltip,{content:"Cancel query"},o().createElement(s.Icon,{className:"spin-clockwise",name:"sync",size:"xs",role:"button",onMouseDown:t=>{e.onCancel(t)}}))}function pn(e){const t=(0,s.useStyles2)(hn),r=(0,s.useTheme2)(),n="vertical"===e.layout,a=Boolean(e.isLoading)?o().createElement("div",{style:{marginLeft:r.spacing(1),marginTop:"-1px"},"aria-label":cr.components.LoadingIndicator.icon},o().createElement(dn,{onCancel:t=>{var r;t.preventDefault(),t.stopPropagation(),null==(r=e.onCancel)||r.call(e)}})):null;let i=null;e.error&&(i=o().createElement(s.Tooltip,{content:e.error,placement:"bottom"},o().createElement(s.Icon,{className:t.errorIcon,name:"exclamation-triangle"})));let l=null;e.description&&(l=o().createElement(s.Tooltip,{content:e.description,placement:n?"top":"bottom"},o().createElement(s.Icon,{className:t.normalIcon,name:"info-circle"})));const u="string"==typeof e.label?cr.pages.Dashboard.SubMenu.submenuItemLabels(e.label):"";let c;return c=n?o().createElement("label",{className:t.verticalLabel,"data-testid":u,htmlFor:e.htmlFor},e.label,l,i,e.icon&&o().createElement(s.Icon,{name:e.icon,className:t.normalIcon}),a,e.onRemove&&o().createElement(s.IconButton,{variant:"secondary",size:"xs",name:"times",onClick:e.onRemove,tooltip:"Remove"})):o().createElement("label",{className:t.horizontalLabel,"data-testid":u,htmlFor:e.htmlFor},i,e.icon&&o().createElement(s.Icon,{name:e.icon,className:t.normalIcon}),e.label,l,a),c}const hn=e=>({horizontalLabel:(0,p.css)({background:e.isDark?e.colors.background.primary:e.colors.background.secondary,display:"flex",alignItems:"center",padding:e.spacing(0,1),fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.bodySmall.fontSize,height:e.spacing(e.components.height.md),lineHeight:e.spacing(e.components.height.md),borderRadius:`${e.shape.radius.default} 0 0 ${e.shape.radius.default}`,border:`1px solid ${e.components.input.borderColor}`,position:"relative",right:-1,whiteSpace:"nowrap",gap:e.spacing(.5)}),verticalLabel:(0,p.css)({display:"flex",alignItems:"center",fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.bodySmall.fontSize,lineHeight:e.typography.bodySmall.lineHeight,whiteSpace:"nowrap",marginBottom:e.spacing(.5),gap:e.spacing(1)}),errorIcon:(0,p.css)({color:e.colors.error.text}),normalIcon:(0,p.css)({color:e.colors.text.secondary})});function fn(e){const t=e.map((e=>{var t;return null!=(t=e.label)?t:String(e.value)}));return r=>Ir(e,t,r)}var mn=Object.defineProperty,gn=Object.getOwnPropertySymbols,vn=Object.prototype.hasOwnProperty,bn=Object.prototype.propertyIsEnumerable,yn=(e,t,r)=>t in e?mn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function wn(e,t){return""!==e?{value:e,label:t||e}:null}const Sn=()=>!0;function En({filter:e,model:t}){var r,a,i,l,u;const c=(0,s.useStyles2)(On),[d,h]=(0,n.useState)([]),[f,m]=(0,n.useState)([]),[g,v]=(0,n.useState)(!1),[b,y]=(0,n.useState)(!1),[w,S]=(0,n.useState)(!1),[E,O]=(0,n.useState)(!1),[x,R]=(0,n.useState)(!1),[_,C]=(0,n.useState)(""),[P,I]=(0,n.useState)(!1),[T,D]=(0,n.useState)(e.values?e.values.map(((t,r)=>{var n;return wn(t,null==(n=e.valueLabels)?void 0:n[r])})):[]),A=xl(e.operator),k=wn(e.key,e.keyLabel),j=wn(e.value,null==(r=e.valueLabels)?void 0:r[0]),L=(0,n.useMemo)((()=>fn(f)),[f]),M=t.state.onAddCustomValue,N=(0,n.useMemo)((()=>eu(L(_))),[L,_]),$={isMulti:!0,value:T,components:{Option:Ur},hideSelectedOptions:!1,closeMenuOnSelect:!1,openMenuOnFocus:!1,onChange:e=>{D(e),e.some((e=>e.__isNew__))&&C("")},onBlur:()=>{var r,n;t._updateFilter(e,{value:null!=(n=null==(r=T[0])?void 0:r.value)?n:"",values:T.map((e=>e.value)),valueLabels:T.map((e=>e.label))})}},V=o().createElement(s.Select,((e,t)=>{for(var r in t||(t={}))vn.call(t,r)&&yn(e,r,t[r]);if(gn)for(var r of gn(t))bn.call(t,r)&&yn(e,r,t[r]);return e})({virtualized:!0,allowCustomValue:null==(a=t.state.allowCustomValue)||a,isValidNewOption:e=>e.trim().length>0,allowCreateWhileLoading:!0,formatCreateLabel:e=>`Use custom value: ${e}`,disabled:t.state.readOnly,className:(0,p.cx)(c.value,E?c.widthWhenOpen:void 0),width:"auto",value:j,filterOption:Sn,placeholder:"Select value",options:N,inputValue:_,onInputChange:(e,{action:t})=>("input-change"===t&&C(e),e),onChange:r=>{M&&r.__isNew__?t._updateFilter(e,M(r,e)):t._updateFilter(e,{value:r.value,valueLabels:r.label?[r.label]:[r.value]}),P!==r.__isNew__&&I(r.__isNew__)},isOpen:E&&!b,isLoading:b,openMenuOnFocus:!0,onOpenMenu:async()=>{var r;y(!0),O(!0);const n=await t._getValuesFor(e);y(!1),m(n),P&&C(null!=(r=null==j?void 0:j.label)?r:"")},onCloseMenu:()=>{O(!1),C("")}},A&&$)),F=o().createElement(s.Select,{key:""+(b?"loading":"loaded"),disabled:t.state.readOnly,className:(0,p.cx)(c.key,w?c.widthWhenOpen:void 0),width:"auto",allowCustomValue:null==(i=t.state.allowCustomValue)||i,value:k,placeholder:"Select label",options:eu(d),onChange:r=>{t._updateFilter(e,{key:r.value,keyLabel:r.label,value:"",valueLabels:[""],values:void 0}),D([])},autoFocus:""===e.key,isOpen:w&&!g,isLoading:g,onOpenMenu:async()=>{S(!0),v(!0);const r=await t._getKeys(e.key);v(!1),h(r)},onCloseMenu:()=>{S(!1)},onBlur:()=>{""===e.key&&t._removeFilter(e)},openMenuOnFocus:!0}),B=o().createElement(s.Select,{className:(0,p.cx)(c.operator,{[c.widthWhenOpen]:x}),value:e.operator,disabled:t.state.readOnly,options:t._getOperators(),onChange:r=>{var n,a;const o=e.operator,i=r.value,s={operator:i};xl(o)&&!xl(i)?(s.value="",s.valueLabels=[""],s.values=void 0,D([])):!xl(o)&&xl(i)&&e.value&&(s.values=[e.value],D([{value:e.value,label:null!=(a=null==(n=e.valueLabels)?void 0:n[0])?a:e.value}])),t._updateFilter(e,s)},onOpenMenu:()=>{R(!0)},onCloseMenu:()=>{R(!1)}});if("vertical"===t.state.layout){if(e.key){const r=o().createElement(pn,{layout:"vertical",label:null!=(l=e.key)?l:"",onRemove:()=>t._removeFilter(e)});return o().createElement(s.Field,{label:r,"data-testid":`AdHocFilter-${e.key}`,className:c.field},o().createElement("div",{className:c.wrapper},B,V))}return o().createElement(s.Field,{label:"Select label","data-testid":`AdHocFilter-${e.key}`,className:c.field},F)}return o().createElement("div",{className:c.wrapper,"data-testid":`AdHocFilter-${e.key}`},F,B,V,o().createElement(s.Button,{variant:"secondary","aria-label":"Remove filter",title:"Remove filter",className:c.removeButton,icon:"times","data-testid":`AdHocFilter-remove-${null!=(u=e.key)?u:""}`,onClick:()=>t._removeFilter(e)}))}const On=e=>({field:(0,p.css)({marginBottom:0}),wrapper:(0,p.css)({display:"flex","> *":{"&:not(:first-child)":{marginLeft:-1},"&:first-child":{borderTopRightRadius:0,borderBottomRightRadius:0},"&:last-child":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:first-child):not(:last-child)":{borderRadius:0},position:"relative",zIndex:0,"&:hover":{zIndex:1},"&:focus-within":{zIndex:2}}}),widthWhenOpen:(0,p.css)({minWidth:e.spacing(16)}),value:(0,p.css)({flexBasis:"content",flexShrink:1,minWidth:"90px"}),key:(0,p.css)({flexBasis:"content",minWidth:"90px",flexShrink:1}),operator:(0,p.css)({flexShrink:0,flexBasis:"content"}),removeButton:(0,p.css)({paddingLeft:e.spacing(1.5),paddingRight:e.spacing(1.5),borderLeft:"none",width:e.spacing(3),marginRight:e.spacing(1),boxSizing:"border-box",position:"relative",left:"1px"})});function xn({model:e,addFilterButtonText:t}){const{_wip:r}=e.useState();return r?o().createElement(En,{filter:r,model:e}):o().createElement(s.Button,{variant:"secondary",icon:"plus",title:"Add filter","aria-label":"Add filter","data-testid":"AdHocFilter-add",onClick:()=>e._addWip()},t)}class Rn{constructor(e){this._variable=e}getKey(){return`var-${this._variable.state.name}`}getKeys(){return[this.getKey()]}getUrlState(){const e=this._variable.state.filters,t=this._variable.state.baseFilters;let r=[];return 0===e.length&&0===(null==t?void 0:t.length)?{[this.getKey()]:[""]}:(e.length&&r.push(...e.filter(Ol).filter((e=>!e.hidden)).map((e=>_n(e).map(ql).join("|")))),(null==t?void 0:t.length)&&r.push(...null==t?void 0:t.filter(Ol).filter((e=>!e.hidden&&e.origin&&e.originalValue)).map((e=>{var t,r;return _n(e).map(Xl).join("|").concat(`#${null!=(r=null==(t=e.originalValue)?void 0:t.map(Xl).join("|"))?r:""}#${e.origin}`)}))),{[this.getKey()]:r.length?r:[""]})}updateFromUrl(e){const t=e[this.getKey()];if(null!=t&&t){const e=function(e){if(Array.isArray(e)){return e.map(Cn).filter(Pn)}const t=Cn(e);return null===t?[]:[t]}(t);this._variable.setState({filters:e.filter((e=>!e.origin)),baseFilters:e.filter((e=>e.origin))})}}}function _n(e){var t;const r=[Kl(e.key,e.keyLabel),e.operator];return xl(e.operator)?e.values.forEach(((t,n)=>{var a;r.push(Kl(t,null==(a=e.valueLabels)?void 0:a[n]))})):r.push(Kl(e.value,null==(t=e.valueLabels)?void 0:t[0])),r}function Cn(e){var t;if("string"!=typeof e||0===e.length)return null;const[r,n,a]=e.split("#"),[o,i,s,l,...u]=r.split("|").reduce(((e,t)=>{const[r,n]=t.split(",");return e.push(r,null!=n?n:r),e}),[]).map(Yl);return{key:o,keyLabel:i,operator:s,value:u[0],values:xl(s)?u.filter(((e,t)=>t%2==0)):void 0,valueLabels:u.filter(((e,t)=>t%2==1)),condition:"",origin:(c=a,c===vl.Scopes||c===vl.Dashboards?a:void 0),originalValue:n&&n.length?null!=(t=n.split("|"))?t:[n]:void 0};var c}function Pn(e){return null!==e&&"string"==typeof e.key&&"string"==typeof e.value}function In(){return"undefined"!=typeof window}function Tn(e){return kn(e)?(e.nodeName||"").toLowerCase():"#document"}function Dn(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function An(e){var t;return null==(t=(kn(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function kn(e){return!!In()&&(e instanceof Node||e instanceof Dn(e).Node)}function jn(e){return!!In()&&(e instanceof Element||e instanceof Dn(e).Element)}function Ln(e){return!!In()&&(e instanceof HTMLElement||e instanceof Dn(e).HTMLElement)}function Mn(e){return!(!In()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof Dn(e).ShadowRoot)}function Nn(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=Un(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function $n(e){return["table","td","th"].includes(Tn(e))}function Vn(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(e){return!1}}))}function Fn(e){const t=Bn(),r=jn(e)?Un(e):e;return["transform","translate","scale","rotate","perspective"].some((e=>!!r[e]&&"none"!==r[e]))||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||["transform","translate","scale","rotate","perspective","filter"].some((e=>(r.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(r.contain||"").includes(e)))}function Bn(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function zn(e){return["html","body","#document"].includes(Tn(e))}function Un(e){return Dn(e).getComputedStyle(e)}function Wn(e){return jn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Hn(e){if("html"===Tn(e))return e;const t=e.assignedSlot||e.parentNode||Mn(e)&&e.host||An(e);return Mn(t)?t.host:t}function Gn(e){const t=Hn(e);return zn(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ln(t)&&Nn(t)?t:Gn(t)}function qn(e,t,r){var n;void 0===t&&(t=[]),void 0===r&&(r=!0);const a=Gn(e),o=a===(null==(n=e.ownerDocument)?void 0:n.body),i=Dn(a);if(o){const e=Qn(i);return t.concat(i,i.visualViewport||[],Nn(a)?a:[],e&&r?qn(e):[])}return t.concat(a,qn(a,[],r))}function Qn(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Xn(e){let t=e.activeElement;for(;null!=(null==(r=t)||null==(r=r.shadowRoot)?void 0:r.activeElement);){var r;t=t.shadowRoot.activeElement}return t}function Yn(e,t){if(!e||!t)return!1;const r=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(r&&Mn(r)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function Kn(){const e=navigator.userAgentData;return null!=e&&e.platform?e.platform:navigator.platform}function Zn(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map((e=>{let{brand:t,version:r}=e;return t+"/"+r})).join(" "):navigator.userAgent}function Jn(e){return!(0!==e.mozInputSource||!e.isTrusted)||(ra()&&e.pointerType?"click"===e.type&&1===e.buttons:0===e.detail&&!e.pointerType)}function ea(e){return!Zn().includes("jsdom/")&&(!ra()&&0===e.width&&0===e.height||ra()&&1===e.width&&1===e.height&&0===e.pressure&&0===e.detail&&"mouse"===e.pointerType||e.width<1&&e.height<1&&0===e.pressure&&0===e.detail&&"touch"===e.pointerType)}function ta(){return/apple/i.test(navigator.vendor)}function ra(){const e=/android/i;return e.test(Kn())||e.test(Zn())}function na(e){return(null==e?void 0:e.ownerDocument)||document}function aa(e,t){if(null==t)return!1;if("composedPath"in e)return e.composedPath().includes(t);const r=e;return null!=r.target&&t.contains(r.target)}function oa(e){return"composedPath"in e?e.composedPath()[0]:e.target}function ia(e){e.preventDefault(),e.stopPropagation()}function sa(e){return!!e&&("combobox"===e.getAttribute("role")&&function(e){return Ln(e)&&e.matches("input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])")}(e))}const la=Math.min,ua=Math.max,ca=Math.round,da=Math.floor,pa=e=>({x:e,y:e}),ha={left:"right",right:"left",bottom:"top",top:"bottom"},fa={start:"end",end:"start"};function ma(e,t){return"function"==typeof e?e(t):e}function ga(e){return e.split("-")[0]}function va(e){return e.split("-")[1]}function ba(e){return"y"===e?"height":"width"}function ya(e){return["top","bottom"].includes(ga(e))?"y":"x"}function wa(e){return"x"===ya(e)?"y":"x"}function Sa(e){return e.replace(/start|end/g,(e=>fa[e]))}function Ea(e){return e.replace(/left|right|bottom|top/g,(e=>ha[e]))}function Oa(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}var xa=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Ra=xa.join(","),_a="undefined"==typeof Element,Ca=_a?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Pa=!_a&&Element.prototype.getRootNode?function(e){var t;return null==e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}:function(e){return null==e?void 0:e.ownerDocument},Ia=function e(t,r){var n;void 0===r&&(r=!0);var a=null==t||null===(n=t.getAttribute)||void 0===n?void 0:n.call(t,"inert");return""===a||"true"===a||r&&t&&e(t.parentNode)},Ta=function(e,t,r){if(Ia(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(Ra));return t&&Ca.call(e,Ra)&&n.unshift(e),n=n.filter(r)},Da=function e(t,r,n){for(var a=[],o=Array.from(t);o.length;){var i=o.shift();if(!Ia(i,!1))if("SLOT"===i.tagName){var s=i.assignedElements(),l=e(s.length?s:i.children,!0,n);n.flatten?a.push.apply(a,l):a.push({scopeParent:i,candidates:l})}else{Ca.call(i,Ra)&&n.filter(i)&&(r||!t.includes(i))&&a.push(i);var u=i.shadowRoot||"function"==typeof n.getShadowRoot&&n.getShadowRoot(i),c=!Ia(u,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(i));if(u&&c){var d=e(!0===u?i.children:u.children,!0,n);n.flatten?a.push.apply(a,d):a.push({scopeParent:i,candidates:d})}else o.unshift.apply(o,i.children)}}return a},Aa=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},ka=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||function(e){var t,r=null==e||null===(t=e.getAttribute)||void 0===t?void 0:t.call(e,"contenteditable");return""===r||"true"===r}(e))&&!Aa(e)?0:e.tabIndex},ja=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},La=function(e){return"INPUT"===e.tagName},Ma=function(e){return function(e){return La(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t,r=e.form||Pa(e),n=function(e){return r.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)t=n(window.CSS.escape(e.name));else try{t=n(e.name)}catch(e){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",e.message),!1}var a=function(e,t){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===t)return e[r]}(t,e.form);return!a||a===e}(e)},Na=function(e){var t=e.getBoundingClientRect(),r=t.width,n=t.height;return 0===r&&0===n},$a=function(e,t){var r=t.displayCheck,n=t.getShadowRoot;if("hidden"===getComputedStyle(e).visibility)return!0;var a=Ca.call(e,"details>summary:first-of-type")?e.parentElement:e;if(Ca.call(a,"details:not([open]) *"))return!0;if(r&&"full"!==r&&"legacy-full"!==r){if("non-zero-area"===r)return Na(e)}else{if("function"==typeof n){for(var o=e;e;){var i=e.parentElement,s=Pa(e);if(i&&!i.shadowRoot&&!0===n(i))return Na(e);e=e.assignedSlot?e.assignedSlot:i||s===e.ownerDocument?i:s.host}e=o}if(function(e){var t,r,n,a,o=e&&Pa(e),i=null===(t=o)||void 0===t?void 0:t.host,s=!1;if(o&&o!==e)for(s=!!(null!==(r=i)&&void 0!==r&&null!==(n=r.ownerDocument)&&void 0!==n&&n.contains(i)||null!=e&&null!==(a=e.ownerDocument)&&void 0!==a&&a.contains(e));!s&&i;){var l,u,c;s=!(null===(u=i=null===(l=o=Pa(i))||void 0===l?void 0:l.host)||void 0===u||null===(c=u.ownerDocument)||void 0===c||!c.contains(i))}return s}(e))return!e.getClientRects().length;if("legacy-full"!==r)return!0}return!1},Va=function(e,t){return!(t.disabled||Ia(t)||function(e){return La(e)&&"hidden"===e.type}(t)||$a(t,e)||function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some((function(e){return"SUMMARY"===e.tagName}))}(t)||function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var r=0;r<t.children.length;r++){var n=t.children.item(r);if("LEGEND"===n.tagName)return!!Ca.call(t,"fieldset[disabled] *")||!n.contains(e)}return!0}t=t.parentElement}return!1}(t))},Fa=function(e,t){return!(Ma(t)||ka(t)<0||!Va(e,t))},Ba=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},za=function e(t){var r=[],n=[];return t.forEach((function(t,a){var o=!!t.scopeParent,i=o?t.scopeParent:t,s=function(e,t){var r=ka(e);return r<0&&t&&!Aa(e)?0:r}(i,o),l=o?e(t.candidates):i;0===s?o?r.push.apply(r,l):r.push(i):n.push({documentOrder:a,tabIndex:s,item:t,isScope:o,content:l})})),n.sort(ja).reduce((function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e}),[]).concat(r)},Ua=function(e,t){var r;return r=(t=t||{}).getShadowRoot?Da([e],t.includeContainer,{filter:Fa.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:Ba}):Ta(e,t.includeContainer,Fa.bind(null,t)),za(r)},Wa=f(8398);function Ha(e,t,r){let{reference:n,floating:a}=e;const o=ya(t),i=wa(t),s=ba(i),l=ga(t),u="y"===o,c=n.x+n.width/2-a.width/2,d=n.y+n.height/2-a.height/2,p=n[s]/2-a[s]/2;let h;switch(l){case"top":h={x:c,y:n.y-a.height};break;case"bottom":h={x:c,y:n.y+n.height};break;case"right":h={x:n.x+n.width,y:d};break;case"left":h={x:n.x-a.width,y:d};break;default:h={x:n.x,y:n.y}}switch(va(t)){case"start":h[i]-=p*(r&&u?-1:1);break;case"end":h[i]+=p*(r&&u?-1:1)}return h}async function Ga(e,t){var r;void 0===t&&(t={});const{x:n,y:a,platform:o,rects:i,elements:s,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:p=!1,padding:h=0}=ma(t,e),f=function(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}(h),m=s[p?"floating"===d?"reference":"floating":d],g=Oa(await o.getClippingRect({element:null==(r=await(null==o.isElement?void 0:o.isElement(m)))||r?m:m.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(s.floating)),boundary:u,rootBoundary:c,strategy:l})),v="floating"===d?{x:n,y:a,width:i.floating.width,height:i.floating.height}:i.reference,b=await(null==o.getOffsetParent?void 0:o.getOffsetParent(s.floating)),y=await(null==o.isElement?void 0:o.isElement(b))&&await(null==o.getScale?void 0:o.getScale(b))||{x:1,y:1},w=Oa(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:v,offsetParent:b,strategy:l}):v);return{top:(g.top-w.top+f.top)/y.y,bottom:(w.bottom-g.bottom+f.bottom)/y.y,left:(g.left-w.left+f.left)/y.x,right:(w.right-g.right+f.right)/y.x}}function qa(e){const t=Un(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=Ln(e),o=a?e.offsetWidth:r,i=a?e.offsetHeight:n,s=ca(r)!==o||ca(n)!==i;return s&&(r=o,n=i),{width:r,height:n,$:s}}function Qa(e){return jn(e)?e:e.contextElement}function Xa(e){const t=Qa(e);if(!Ln(t))return pa(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:o}=qa(t);let i=(o?ca(r.width):r.width)/n,s=(o?ca(r.height):r.height)/a;return i&&Number.isFinite(i)||(i=1),s&&Number.isFinite(s)||(s=1),{x:i,y:s}}const Ya=pa(0);function Ka(e){const t=Dn(e);return Bn()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Ya}function Za(e,t,r,n){void 0===t&&(t=!1),void 0===r&&(r=!1);const a=e.getBoundingClientRect(),o=Qa(e);let i=pa(1);t&&(n?jn(n)&&(i=Xa(n)):i=Xa(e));const s=function(e,t,r){return void 0===t&&(t=!1),!(!r||t&&r!==Dn(e))&&t}(o,r,n)?Ka(o):pa(0);let l=(a.left+s.x)/i.x,u=(a.top+s.y)/i.y,c=a.width/i.x,d=a.height/i.y;if(o){const e=Dn(o),t=n&&jn(n)?Dn(n):n;let r=e,a=Qn(r);for(;a&&n&&t!==r;){const e=Xa(a),t=a.getBoundingClientRect(),n=Un(a),o=t.left+(a.clientLeft+parseFloat(n.paddingLeft))*e.x,i=t.top+(a.clientTop+parseFloat(n.paddingTop))*e.y;l*=e.x,u*=e.y,c*=e.x,d*=e.y,l+=o,u+=i,r=Dn(a),a=Qn(r)}}return Oa({width:c,height:d,x:l,y:u})}function Ja(e,t){const r=Wn(e).scrollLeft;return t?t.left+r:Za(An(e)).left+r}function eo(e,t,r){void 0===r&&(r=!1);const n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-(r?0:Ja(e,n)),y:n.top+t.scrollTop}}function to(e,t,r){let n;if("viewport"===t)n=function(e,t){const r=Dn(e),n=An(e),a=r.visualViewport;let o=n.clientWidth,i=n.clientHeight,s=0,l=0;if(a){o=a.width,i=a.height;const e=Bn();(!e||e&&"fixed"===t)&&(s=a.offsetLeft,l=a.offsetTop)}return{width:o,height:i,x:s,y:l}}(e,r);else if("document"===t)n=function(e){const t=An(e),r=Wn(e),n=e.ownerDocument.body,a=ua(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=ua(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let i=-r.scrollLeft+Ja(e);const s=-r.scrollTop;return"rtl"===Un(n).direction&&(i+=ua(t.clientWidth,n.clientWidth)-a),{width:a,height:o,x:i,y:s}}(An(e));else if(jn(t))n=function(e,t){const r=Za(e,!0,"fixed"===t),n=r.top+e.clientTop,a=r.left+e.clientLeft,o=Ln(e)?Xa(e):pa(1);return{width:e.clientWidth*o.x,height:e.clientHeight*o.y,x:a*o.x,y:n*o.y}}(t,r);else{const r=Ka(e);n={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return Oa(n)}function ro(e,t){const r=Hn(e);return!(r===t||!jn(r)||zn(r))&&("fixed"===Un(r).position||ro(r,t))}function no(e,t,r){const n=Ln(t),a=An(t),o="fixed"===r,i=Za(e,!0,o,t);let s={scrollLeft:0,scrollTop:0};const l=pa(0);if(n||!n&&!o)if(("body"!==Tn(t)||Nn(a))&&(s=Wn(t)),n){const e=Za(t,!0,o,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else a&&(l.x=Ja(a));const u=!a||n||o?pa(0):eo(a,s);return{x:i.left+s.scrollLeft-l.x-u.x,y:i.top+s.scrollTop-l.y-u.y,width:i.width,height:i.height}}function ao(e){return"static"===Un(e).position}function oo(e,t){if(!Ln(e)||"fixed"===Un(e).position)return null;if(t)return t(e);let r=e.offsetParent;return An(e)===r&&(r=r.ownerDocument.body),r}function io(e,t){const r=Dn(e);if(Vn(e))return r;if(!Ln(e)){let t=Hn(e);for(;t&&!zn(t);){if(jn(t)&&!ao(t))return t;t=Hn(t)}return r}let n=oo(e,t);for(;n&&$n(n)&&ao(n);)n=oo(n,t);return n&&zn(n)&&ao(n)&&!Fn(n)?r:n||function(e){let t=Hn(e);for(;Ln(t)&&!zn(t);){if(Fn(t))return t;if(Vn(t))return null;t=Hn(t)}return null}(e)||r}const so={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const o="fixed"===a,i=An(n),s=!!t&&Vn(t.floating);if(n===i||s&&o)return r;let l={scrollLeft:0,scrollTop:0},u=pa(1);const c=pa(0),d=Ln(n);if((d||!d&&!o)&&(("body"!==Tn(n)||Nn(i))&&(l=Wn(n)),Ln(n))){const e=Za(n);u=Xa(n),c.x=e.x+n.clientLeft,c.y=e.y+n.clientTop}const p=!i||d||o?pa(0):eo(i,l,!0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-l.scrollLeft*u.x+c.x+p.x,y:r.y*u.y-l.scrollTop*u.y+c.y+p.y}},getDocumentElement:An,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const o=[..."clippingAncestors"===r?Vn(t)?[]:function(e,t){const r=t.get(e);if(r)return r;let n=qn(e,[],!1).filter((e=>jn(e)&&"body"!==Tn(e))),a=null;const o="fixed"===Un(e).position;let i=o?Hn(e):e;for(;jn(i)&&!zn(i);){const t=Un(i),r=Fn(i);r||"fixed"!==t.position||(a=null),(o?!r&&!a:!r&&"static"===t.position&&a&&["absolute","fixed"].includes(a.position)||Nn(i)&&!r&&ro(e,i))?n=n.filter((e=>e!==i)):a=t,i=Hn(i)}return t.set(e,n),n}(t,this._c):[].concat(r),n],i=o[0],s=o.reduce(((e,r)=>{const n=to(t,r,a);return e.top=ua(n.top,e.top),e.right=la(n.right,e.right),e.bottom=la(n.bottom,e.bottom),e.left=ua(n.left,e.left),e}),to(t,i,a));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},getOffsetParent:io,getElementRects:async function(e){const t=this.getOffsetParent||io,r=this.getDimensions,n=await r(e.floating);return{reference:no(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:r}=qa(e);return{width:t,height:r}},getScale:Xa,isElement:jn,isRTL:function(e){return"rtl"===Un(e).direction}};function lo(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function uo(e,t,r,n){void 0===n&&(n={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:i="function"==typeof ResizeObserver,layoutShift:s="function"==typeof IntersectionObserver,animationFrame:l=!1}=n,u=Qa(e),c=a||o?[...u?qn(u):[],...qn(t)]:[];c.forEach((e=>{a&&e.addEventListener("scroll",r,{passive:!0}),o&&e.addEventListener("resize",r)}));const d=u&&s?function(e,t){let r,n=null;const a=An(e);function o(){var e;clearTimeout(r),null==(e=n)||e.disconnect(),n=null}return function i(s,l){void 0===s&&(s=!1),void 0===l&&(l=1),o();const u=e.getBoundingClientRect(),{left:c,top:d,width:p,height:h}=u;if(s||t(),!p||!h)return;const f={rootMargin:-da(d)+"px "+-da(a.clientWidth-(c+p))+"px "+-da(a.clientHeight-(d+h))+"px "+-da(c)+"px",threshold:ua(0,la(1,l))||1};let m=!0;function g(t){const n=t[0].intersectionRatio;if(n!==l){if(!m)return i();n?i(!1,n):r=setTimeout((()=>{i(!1,1e-7)}),1e3)}1!==n||lo(u,e.getBoundingClientRect())||i(),m=!1}try{n=new IntersectionObserver(g,{...f,root:a.ownerDocument})}catch(e){n=new IntersectionObserver(g,f)}n.observe(e)}(!0),o}(u,r):null;let p,h=-1,f=null;i&&(f=new ResizeObserver((e=>{let[n]=e;n&&n.target===u&&f&&(f.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame((()=>{var e;null==(e=f)||e.observe(t)}))),r()})),u&&!l&&f.observe(u),f.observe(t));let m=l?Za(e):null;return l&&function t(){const n=Za(e);m&&!lo(m,n)&&r();m=n,p=requestAnimationFrame(t)}(),r(),()=>{var e;c.forEach((e=>{a&&e.removeEventListener("scroll",r),o&&e.removeEventListener("resize",r)})),null==d||d(),null==(e=f)||e.disconnect(),f=null,l&&cancelAnimationFrame(p)}}const co=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:o,placement:i,middlewareData:s}=t,l=await async function(e,t){const{placement:r,platform:n,elements:a}=e,o=await(null==n.isRTL?void 0:n.isRTL(a.floating)),i=ga(r),s=va(r),l="y"===ya(r),u=["left","top"].includes(i)?-1:1,c=o&&l?-1:1,d=ma(t,e);let{mainAxis:p,crossAxis:h,alignmentAxis:f}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return s&&"number"==typeof f&&(h="end"===s?-1*f:f),l?{x:h*c,y:p*u}:{x:p*u,y:h*c}}(t,e);return i===(null==(r=s.offset)?void 0:r.placement)&&null!=(n=s.arrow)&&n.alignmentOffset?{}:{x:a+l.x,y:o+l.y,data:{...l,placement:i}}}}},po=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:o,rects:i,initialPlacement:s,platform:l,elements:u}=t,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:p,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:m=!0,...g}=ma(e,t);if(null!=(r=o.arrow)&&r.alignmentOffset)return{};const v=ga(a),b=ya(s),y=ga(s)===s,w=await(null==l.isRTL?void 0:l.isRTL(u.floating)),S=p||(y||!m?[Ea(s)]:function(e){const t=Ea(e);return[Sa(e),t,Sa(t)]}(s)),E="none"!==f;!p&&E&&S.push(...function(e,t,r,n){const a=va(e);let o=function(e,t,r){const n=["left","right"],a=["right","left"],o=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return r?t?a:n:t?n:a;case"left":case"right":return t?o:i;default:return[]}}(ga(e),"start"===r,n);return a&&(o=o.map((e=>e+"-"+a)),t&&(o=o.concat(o.map(Sa)))),o}(s,m,f,w));const O=[s,...S],x=await Ga(t,g),R=[];let _=(null==(n=o.flip)?void 0:n.overflows)||[];if(c&&R.push(x[v]),d){const e=function(e,t,r){void 0===r&&(r=!1);const n=va(e),a=wa(e),o=ba(a);let i="x"===a?n===(r?"end":"start")?"right":"left":"start"===n?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=Ea(i)),[i,Ea(i)]}(a,i,w);R.push(x[e[0]],x[e[1]])}if(_=[..._,{placement:a,overflows:R}],!R.every((e=>e<=0))){var C,P;const e=((null==(C=o.flip)?void 0:C.index)||0)+1,t=O[e];if(t)return{data:{index:e,overflows:_},reset:{placement:t}};let r=null==(P=_.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:P.placement;if(!r)switch(h){case"bestFit":{var I;const e=null==(I=_.filter((e=>{if(E){const t=ya(e.placement);return t===b||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:I[0];e&&(r=e);break}case"initialPlacement":r=s}if(a!==r)return{reset:{placement:r}}}return{}}}},ho=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:o,platform:i,elements:s}=t,{apply:l=()=>{},...u}=ma(e,t),c=await Ga(t,u),d=ga(a),p=va(a),h="y"===ya(a),{width:f,height:m}=o.floating;let g,v;"top"===d||"bottom"===d?(g=d,v=p===(await(null==i.isRTL?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(v=d,g="end"===p?"top":"bottom");const b=m-c.top-c.bottom,y=f-c.left-c.right,w=la(m-c[g],b),S=la(f-c[v],y),E=!t.middlewareData.shift;let O=w,x=S;if(null!=(r=t.middlewareData.shift)&&r.enabled.x&&(x=y),null!=(n=t.middlewareData.shift)&&n.enabled.y&&(O=b),E&&!p){const e=ua(c.left,0),t=ua(c.right,0),r=ua(c.top,0),n=ua(c.bottom,0);h?x=f-2*(0!==e||0!==t?e+t:ua(c.left,c.right)):O=m-2*(0!==r||0!==n?r+n:ua(c.top,c.bottom))}await l({...t,availableWidth:x,availableHeight:O});const R=await i.getDimensions(s.floating);return f!==R.width||m!==R.height?{reset:{rects:!0}}:{}}}},fo=(e,t,r)=>{const n=new Map,a={platform:so,...r},o={...a.platform,_c:n};return(async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:o=[],platform:i}=r,s=o.filter(Boolean),l=await(null==i.isRTL?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:a}),{x:c,y:d}=Ha(u,n,l),p=n,h={},f=0;for(let r=0;r<s.length;r++){const{name:o,fn:m}=s[r],{x:g,y:v,data:b,reset:y}=await m({x:c,y:d,initialPlacement:n,placement:p,strategy:a,middlewareData:h,rects:u,platform:i,elements:{reference:e,floating:t}});c=null!=g?g:c,d=null!=v?v:d,h={...h,[o]:{...h[o],...b}},y&&f<=50&&(f++,"object"==typeof y&&(y.placement&&(p=y.placement),y.rects&&(u=!0===y.rects?await i.getElementRects({reference:e,floating:t,strategy:a}):y.rects),({x:c,y:d}=Ha(u,p,l))),r=-1)}return{x:c,y:d,placement:p,strategy:a,middlewareData:h}})(e,t,{...a,platform:o})};var mo="undefined"!=typeof document?n.useLayoutEffect:n.useEffect;function go(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;0!=n--;)if(!go(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;0!=n--;){const r=a[n];if(("_owner"!==r||!e.$$typeof)&&!go(e[r],t[r]))return!1}return!0}return e!=e&&t!=t}function vo(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function bo(e,t){const r=vo(e);return Math.round(t*r)/r}function yo(e){const t=n.useRef(e);return mo((()=>{t.current=e})),t}const wo=(e,t)=>({...po(e),options:[e,t]}),So=(e,t)=>({...ho(e),options:[e,t]});const Eo={...a},Oo=Eo.useInsertionEffect||(e=>e());function xo(e){const t=n.useRef((()=>{0}));return Oo((()=>{t.current=e})),n.useCallback((function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return null==t.current?void 0:t.current(...r)}),[])}const Ro="ArrowUp",_o="ArrowDown",Co="ArrowLeft",Po="ArrowRight";function Io(e,t,r){return Math.floor(e/t)!==r}function To(e,t){return t<0||t>=e.current.length}function Do(e,t){return ko(e,{disabledIndices:t})}function Ao(e,t){return ko(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}function ko(e,t){let{startingIndex:r=-1,decrement:n=!1,disabledIndices:a,amount:o=1}=void 0===t?{}:t;const i=e.current;let s=r;do{s+=n?-o:o}while(s>=0&&s<=i.length-1&&$o(i,s,a));return s}function jo(e,t){let{event:r,orientation:n,loop:a,cols:o,disabledIndices:i,minIndex:s,maxIndex:l,prevIndex:u,stopEvent:c=!1}=t,d=u;if(r.key===Ro){if(c&&ia(r),-1===u)d=l;else if(d=ko(e,{startingIndex:d,amount:o,decrement:!0,disabledIndices:i}),a&&(u-o<s||d<0)){const e=u%o,t=l%o,r=l-(t-e);d=t===e?l:t>e?r:r-o}To(e,d)&&(d=u)}if(r.key===_o&&(c&&ia(r),-1===u?d=s:(d=ko(e,{startingIndex:u,amount:o,disabledIndices:i}),a&&u+o>l&&(d=ko(e,{startingIndex:u%o-o,amount:o,disabledIndices:i}))),To(e,d)&&(d=u)),"both"===n){const t=da(u/o);r.key===Po&&(c&&ia(r),u%o!=o-1?(d=ko(e,{startingIndex:u,disabledIndices:i}),a&&Io(d,o,t)&&(d=ko(e,{startingIndex:u-u%o-1,disabledIndices:i}))):a&&(d=ko(e,{startingIndex:u-u%o-1,disabledIndices:i})),Io(d,o,t)&&(d=u)),r.key===Co&&(c&&ia(r),u%o!=0?(d=ko(e,{startingIndex:u,decrement:!0,disabledIndices:i}),a&&Io(d,o,t)&&(d=ko(e,{startingIndex:u+(o-u%o),decrement:!0,disabledIndices:i}))):a&&(d=ko(e,{startingIndex:u+(o-u%o),decrement:!0,disabledIndices:i})),Io(d,o,t)&&(d=u));const n=da(l/o)===t;To(e,d)&&(d=a&&n?r.key===Co?l:ko(e,{startingIndex:u-u%o-1,disabledIndices:i}):u)}return d}function Lo(e,t,r){const n=[];let a=0;return e.forEach(((e,o)=>{let{width:i,height:s}=e,l=!1;for(r&&(a=0);!l;){const e=[];for(let r=0;r<i;r++)for(let n=0;n<s;n++)e.push(a+r+n*t);a%t+i<=t&&e.every((e=>null==n[e]))?(e.forEach((e=>{n[e]=o})),l=!0):a++}})),[...n]}function Mo(e,t,r,n,a){if(-1===e)return-1;const o=r.indexOf(e),i=t[e];switch(a){case"tl":return o;case"tr":return i?o+i.width-1:o;case"bl":return i?o+(i.height-1)*n:o;case"br":return r.lastIndexOf(e)}}function No(e,t){return t.flatMap(((t,r)=>e.includes(t)?[r]:[]))}function $o(e,t,r){if(r)return r.includes(t);const n=e[t];return null==n||n.hasAttribute("disabled")||"true"===n.getAttribute("aria-disabled")}let Vo=0;function Fo(e,t){void 0===t&&(t={});const{preventScroll:r=!1,cancelPrevious:n=!0,sync:a=!1}=t;n&&cancelAnimationFrame(Vo);const o=()=>null==e?void 0:e.focus({preventScroll:r});a?o():Vo=requestAnimationFrame(o)}var Bo="undefined"!=typeof document?n.useLayoutEffect:n.useEffect;const zo=[Co,Po],Uo=[Ro,_o];function Wo(){return Wo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wo.apply(this,arguments)}let Ho=!1,Go=0;const qo=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Go++;const Qo=Eo.useId||function(){const[e,t]=n.useState((()=>Ho?qo():void 0));return Bo((()=>{null==e&&t(qo())}),[]),n.useEffect((()=>{Ho=!0}),[]),e};function Xo(){const e=new Map;return{emit(t,r){var n;null==(n=e.get(t))||n.forEach((e=>e(r)))},on(t,r){e.set(t,[...e.get(t)||[],r])},off(t,r){var n;e.set(t,(null==(n=e.get(t))?void 0:n.filter((e=>e!==r)))||[])}}}const Yo=n.createContext(null),Ko=n.createContext(null),Zo=()=>{var e;return(null==(e=n.useContext(Yo))?void 0:e.id)||null},Jo=()=>n.useContext(Ko);function ei(e){return"data-floating-ui-"+e}function ti(e){const t=(0,n.useRef)(e);return Bo((()=>{t.current=e})),t}function ri(e,t){let r=e.filter((e=>{var r;return e.parentId===t&&(null==(r=e.context)?void 0:r.open)})),n=r;for(;n.length;)n=e.filter((e=>{var t;return null==(t=n)?void 0:t.some((t=>{var r;return e.parentId===t.id&&(null==(r=e.context)?void 0:r.open)}))})),r=r.concat(n);return r}let ni=new WeakMap,ai=new WeakSet,oi={},ii=0;const si=e=>e&&(e.host||si(e.parentNode));function li(e,t,r,n){const a="data-floating-ui-inert",o=n?"inert":r?"aria-hidden":null,i=(s=t,e.map((e=>{if(s.contains(e))return e;const t=si(e);return s.contains(t)?t:null})).filter((e=>null!=e)));var s;const l=new Set,u=new Set(i),c=[];oi[a]||(oi[a]=new WeakMap);const d=oi[a];return i.forEach((function e(t){if(!t||l.has(t))return;l.add(t),t.parentNode&&e(t.parentNode)})),function e(t){if(!t||u.has(t))return;[].forEach.call(t.children,(t=>{if("script"!==Tn(t))if(l.has(t))e(t);else{const e=o?t.getAttribute(o):null,r=null!==e&&"false"!==e,n=(ni.get(t)||0)+1,i=(d.get(t)||0)+1;ni.set(t,n),d.set(t,i),c.push(t),1===n&&r&&ai.add(t),1===i&&t.setAttribute(a,""),!r&&o&&t.setAttribute(o,"true")}}))}(t),l.clear(),ii++,()=>{c.forEach((e=>{const t=(ni.get(e)||0)-1,r=(d.get(e)||0)-1;ni.set(e,t),d.set(e,r),t||(!ai.has(e)&&o&&e.removeAttribute(o),ai.delete(e)),r||e.removeAttribute(a)})),ii--,ii||(ni=new WeakMap,ni=new WeakMap,ai=new WeakSet,oi={})}}function ui(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);const n=na(e[0]).body;return li(e.concat(Array.from(n.querySelectorAll("[aria-live]"))),n,t,r)}const ci=()=>({getShadowRoot:!0,displayCheck:"function"==typeof ResizeObserver&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function di(e,t){const r=Ua(e,ci());"prev"===t&&r.reverse();const n=r.indexOf(Xn(na(e)));return r.slice(n+1)[0]}function pi(){return di(document.body,"next")}function hi(){return di(document.body,"prev")}function fi(e,t){const r=t||e.currentTarget,n=e.relatedTarget;return!n||!Yn(r,n)}function mi(e){Ua(e,ci()).forEach((e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")}))}function gi(e){e.querySelectorAll("[data-tabindex]").forEach((e=>{const t=e.dataset.tabindex;delete e.dataset.tabindex,t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")}))}const vi={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};function bi(e){"Tab"===e.key&&(e.target,clearTimeout(undefined))}const yi=n.forwardRef((function(e,t){const[r,a]=n.useState();Bo((()=>(ta()&&a("button"),document.addEventListener("keydown",bi),()=>{document.removeEventListener("keydown",bi)})),[]);const o={ref:t,tabIndex:0,role:r,"aria-hidden":!r||void 0,[ei("focus-guard")]:"",style:vi};return n.createElement("span",Wo({},e,o))})),wi=n.createContext(null),Si=ei("portal");function Ei(e){const{children:t,id:r,root:a=null,preserveTabOrder:o=!0}=e,i=function(e){void 0===e&&(e={});const{id:t,root:r}=e,a=Qo(),o=Oi(),[i,s]=n.useState(null),l=n.useRef(null);return Bo((()=>()=>{null==i||i.remove(),queueMicrotask((()=>{l.current=null}))}),[i]),Bo((()=>{if(!a)return;if(l.current)return;const e=t?document.getElementById(t):null;if(!e)return;const r=document.createElement("div");r.id=a,r.setAttribute(Si,""),e.appendChild(r),l.current=r,s(r)}),[t,a]),Bo((()=>{if(!a)return;if(l.current)return;let e=r||(null==o?void 0:o.portalNode);e&&!jn(e)&&(e=e.current),e=e||document.body;let n=null;t&&(n=document.createElement("div"),n.id=t,e.appendChild(n));const i=document.createElement("div");i.id=a,i.setAttribute(Si,""),e=n||e,e.appendChild(i),l.current=i,s(i)}),[t,r,a,o]),i}({id:r,root:a}),[s,l]=n.useState(null),u=n.useRef(null),c=n.useRef(null),d=n.useRef(null),p=n.useRef(null),h=null==s?void 0:s.modal,f=null==s?void 0:s.open,m=!!s&&!s.modal&&s.open&&o&&!(!a&&!i);return n.useEffect((()=>{if(i&&o&&!h)return i.addEventListener("focusin",e,!0),i.addEventListener("focusout",e,!0),()=>{i.removeEventListener("focusin",e,!0),i.removeEventListener("focusout",e,!0)};function e(e){if(i&&fi(e)){("focusin"===e.type?gi:mi)(i)}}}),[i,o,h]),n.useEffect((()=>{i&&(f||gi(i))}),[f,i]),n.createElement(wi.Provider,{value:n.useMemo((()=>({preserveTabOrder:o,beforeOutsideRef:u,afterOutsideRef:c,beforeInsideRef:d,afterInsideRef:p,portalNode:i,setFocusManagerState:l})),[o,i])},m&&i&&n.createElement(yi,{"data-type":"outside",ref:u,onFocus:e=>{if(fi(e,i)){var t;null==(t=d.current)||t.focus()}else{const e=hi()||(null==s?void 0:s.refs.domReference.current);null==e||e.focus()}}}),m&&i&&n.createElement("span",{"aria-owns":i.id,style:vi}),i&&Wa.createPortal(t,i),m&&i&&n.createElement(yi,{"data-type":"outside",ref:c,onFocus:e=>{if(fi(e,i)){var t;null==(t=p.current)||t.focus()}else{const t=pi()||(null==s?void 0:s.refs.domReference.current);null==t||t.focus(),(null==s?void 0:s.closeOnFocusOut)&&(null==s||s.onOpenChange(!1,e.nativeEvent,"focus-out"))}}}))}const Oi=()=>n.useContext(wi),xi="data-floating-ui-focusable";function Ri(e){return e?e.hasAttribute(xi)?e:e.querySelector("["+xi+"]")||e:null}let _i=[];function Ci(e){_i=_i.filter((e=>e.isConnected));let t=e;if(t&&"body"!==Tn(t)){if(!function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==Ca.call(e,Ra)&&Fa(t,e)}(t,ci())){const e=Ua(t,ci())[0];e&&(t=e)}_i.push(t),_i.length>20&&(_i=_i.slice(-20))}}function Pi(){return _i.slice().reverse().find((e=>e.isConnected))}const Ii=n.forwardRef((function(e,t){return n.createElement("button",Wo({},e,{type:"button",ref:t,tabIndex:-1,style:vi}))}));function Ti(e){const{context:t,children:r,disabled:a=!1,order:o=["content"],guards:i=!0,initialFocus:s=0,returnFocus:l=!0,restoreFocus:u=!1,modal:c=!0,visuallyHiddenDismiss:d=!1,closeOnFocusOut:p=!0}=e,{open:h,refs:f,nodeId:m,onOpenChange:g,events:v,dataRef:b,floatingId:y,elements:{domReference:w,floating:S}}=t,E="number"==typeof s&&s<0,O=sa(w)&&E,x="undefined"==typeof HTMLElement||!("inert"in HTMLElement.prototype)||i,R=ti(o),_=ti(s),C=ti(l),P=Jo(),I=Oi(),T=n.useRef(null),D=n.useRef(null),A=n.useRef(!1),k=n.useRef(!1),j=n.useRef(-1),L=null!=I,M=Ri(S),N=xo((function(e){return void 0===e&&(e=M),e?Ua(e,ci()):[]})),$=xo((e=>{const t=N(e);return R.current.map((e=>w&&"reference"===e?w:M&&"floating"===e?M:t)).filter(Boolean).flat()}));function V(e){return!a&&d&&c?n.createElement(Ii,{ref:"start"===e?T:D,onClick:e=>g(!1,e.nativeEvent)},"string"==typeof d?d:"Dismiss"):null}n.useEffect((()=>{A.current=!1}),[a]),n.useEffect((()=>{if(a)return;if(!c)return;function e(e){if("Tab"===e.key){Yn(M,Xn(na(M)))&&0===N().length&&!O&&ia(e);const t=$(),r=oa(e);"reference"===R.current[0]&&r===w&&(ia(e),e.shiftKey?Fo(t[t.length-1]):Fo(t[1])),"floating"===R.current[1]&&r===M&&e.shiftKey&&(ia(e),Fo(t[0]))}}const t=na(M);return t.addEventListener("keydown",e),()=>{t.removeEventListener("keydown",e)}}),[a,w,M,c,R,O,N,$]),n.useEffect((()=>{if(!a&&S)return S.addEventListener("focusin",e),()=>{S.removeEventListener("focusin",e)};function e(e){const t=oa(e),r=N().indexOf(t);-1!==r&&(j.current=r)}}),[a,S,N]),n.useEffect((()=>{if(!a&&p)return S&&Ln(w)?(w.addEventListener("focusout",t),w.addEventListener("pointerdown",e),S.addEventListener("focusout",t),()=>{w.removeEventListener("focusout",t),w.removeEventListener("pointerdown",e),S.removeEventListener("focusout",t)}):void 0;function e(){k.current=!0,setTimeout((()=>{k.current=!1}))}function t(e){const t=e.relatedTarget;queueMicrotask((()=>{const r=!(Yn(w,t)||Yn(S,t)||Yn(t,S)||Yn(null==I?void 0:I.portalNode,t)||null!=t&&t.hasAttribute(ei("focus-guard"))||P&&(ri(P.nodesRef.current,m).find((e=>{var r,n;return Yn(null==(r=e.context)?void 0:r.elements.floating,t)||Yn(null==(n=e.context)?void 0:n.elements.domReference,t)}))||function(e,t){var r;let n=[],a=null==(r=e.find((e=>e.id===t)))?void 0:r.parentId;for(;a;){const t=e.find((e=>e.id===a));a=null==t?void 0:t.parentId,t&&(n=n.concat(t))}return n}(P.nodesRef.current,m).find((e=>{var r,n;return(null==(r=e.context)?void 0:r.elements.floating)===t||(null==(n=e.context)?void 0:n.elements.domReference)===t}))));if(u&&r&&Xn(na(M))===na(M).body){Ln(M)&&M.focus();const e=j.current,t=N(),r=t[e]||t[t.length-1]||M;Ln(r)&&r.focus()}!O&&c||!t||!r||k.current||t===Pi()||(A.current=!0,g(!1,e,"focus-out"))}))}}),[a,w,S,M,c,m,P,I,g,p,u,N,O]),n.useEffect((()=>{var e;if(a)return;const t=Array.from((null==I||null==(e=I.portalNode)?void 0:e.querySelectorAll("["+ei("portal")+"]"))||[]);if(S){const e=[S,...t,T.current,D.current,R.current.includes("reference")||O?w:null].filter((e=>null!=e)),r=c||O?ui(e,x,!x):ui(e);return()=>{r()}}}),[a,w,S,c,R,I,O,x]),Bo((()=>{if(a||!Ln(M))return;const e=Xn(na(M));queueMicrotask((()=>{const t=$(M),r=_.current,n=("number"==typeof r?t[r]:r.current)||M,a=Yn(M,e);E||a||!h||Fo(n,{preventScroll:n===M})}))}),[a,h,M,E,$,_]),Bo((()=>{if(a||!M)return;let e=!1;const t=na(M),r=Xn(t);let n=b.current.openEvent;function o(t){let{open:r,reason:a,event:o,nested:i}=t;r&&(n=o),"escape-key"===a&&f.domReference.current&&Ci(f.domReference.current),"hover"===a&&"mouseleave"===o.type&&(A.current=!0),"outside-press"===a&&(i?(A.current=!1,e=!0):A.current=!(Jn(o)||ea(o)))}Ci(r),v.on("openchange",o);const i=t.createElement("span");return i.setAttribute("tabindex","-1"),i.setAttribute("aria-hidden","true"),Object.assign(i.style,vi),L&&w&&w.insertAdjacentElement("afterend",i),()=>{v.off("openchange",o);const r=Xn(t),a=Yn(S,r)||P&&ri(P.nodesRef.current,m).some((e=>{var t;return Yn(null==(t=e.context)?void 0:t.elements.floating,r)}));(a||n&&["click","mousedown"].includes(n.type))&&f.domReference.current&&Ci(f.domReference.current);const s=Pi()||i;queueMicrotask((()=>{C.current&&!A.current&&Ln(s)&&(s===r||r===t.body||a)&&s.focus({preventScroll:e}),i.remove()}))}}),[a,S,M,C,b,f,v,P,m,L,w]),Bo((()=>{if(!a&&I)return I.setFocusManagerState({modal:c,closeOnFocusOut:p,open:h,onOpenChange:g,refs:f}),()=>{I.setFocusManagerState(null)}}),[a,I,c,h,g,f,p]),Bo((()=>{if(a)return;if(!M)return;if("function"!=typeof MutationObserver)return;if(E)return;const e=()=>{const e=M.getAttribute("tabindex"),t=N(),r=Xn(na(S)),n=t.indexOf(r);-1!==n&&(j.current=n),R.current.includes("floating")||r!==f.domReference.current&&0===t.length?"0"!==e&&M.setAttribute("tabindex","0"):"-1"!==e&&M.setAttribute("tabindex","-1")};e();const t=new MutationObserver(e);return t.observe(M,{childList:!0,subtree:!0,attributes:!0}),()=>{t.disconnect()}}),[a,S,M,f,R,N,E]);const F=!a&&x&&(!c||!O)&&(L||c);return n.createElement(n.Fragment,null,F&&n.createElement(yi,{"data-type":"inside",ref:null==I?void 0:I.beforeInsideRef,onFocus:e=>{if(c){const e=$();Fo("reference"===o[0]?e[0]:e[e.length-1])}else if(null!=I&&I.preserveTabOrder&&I.portalNode)if(A.current=!1,fi(e,I.portalNode)){const e=pi()||w;null==e||e.focus()}else{var t;null==(t=I.beforeOutsideRef.current)||t.focus()}}}),!O&&V("start"),r,V("end"),F&&n.createElement(yi,{"data-type":"inside",ref:null==I?void 0:I.afterInsideRef,onFocus:e=>{if(c)Fo($()[0]);else if(null!=I&&I.preserveTabOrder&&I.portalNode)if(p&&(A.current=!0),fi(e,I.portalNode)){const e=hi()||w;null==e||e.focus()}else{var t;null==(t=I.afterOutsideRef.current)||t.focus()}}}))}const Di={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Ai={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},ki=e=>{var t,r;return{escapeKey:"boolean"==typeof e?e:null!=(t=null==e?void 0:e.escapeKey)&&t,outsidePress:"boolean"==typeof e?e:null==(r=null==e?void 0:e.outsidePress)||r}};function ji(e){void 0===e&&(e={});const{nodeId:t}=e,r=function(e){const{open:t=!1,onOpenChange:r,elements:a}=e,o=Qo(),i=n.useRef({}),[s]=n.useState((()=>Xo())),l=null!=Zo(),[u,c]=n.useState(a.reference),d=xo(((e,t,n)=>{i.current.openEvent=e?t:void 0,s.emit("openchange",{open:e,event:t,reason:n,nested:l}),null==r||r(e,t,n)})),p=n.useMemo((()=>({setPositionReference:c})),[]),h=n.useMemo((()=>({reference:u||a.reference||null,floating:a.floating||null,domReference:a.reference})),[u,a.reference,a.floating]);return n.useMemo((()=>({dataRef:i,open:t,onOpenChange:d,elements:h,events:s,floatingId:o,refs:p})),[t,d,h,s,o,p])}({...e,elements:{reference:null,floating:null,...e.elements}}),a=e.rootContext||r,o=a.elements,[i,s]=n.useState(null),[l,u]=n.useState(null),c=(null==o?void 0:o.reference)||i,d=n.useRef(null),p=Jo();Bo((()=>{c&&(d.current=c)}),[c]);const h=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:a=[],platform:o,elements:{reference:i,floating:s}={},transform:l=!0,whileElementsMounted:u,open:c}=e,[d,p]=n.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,f]=n.useState(a);go(h,a)||f(a);const[m,g]=n.useState(null),[v,b]=n.useState(null),y=n.useCallback((e=>{e!==O.current&&(O.current=e,g(e))}),[]),w=n.useCallback((e=>{e!==x.current&&(x.current=e,b(e))}),[]),S=i||m,E=s||v,O=n.useRef(null),x=n.useRef(null),R=n.useRef(d),_=null!=u,C=yo(u),P=yo(o),I=yo(c),T=n.useCallback((()=>{if(!O.current||!x.current)return;const e={placement:t,strategy:r,middleware:h};P.current&&(e.platform=P.current),fo(O.current,x.current,e).then((e=>{const t={...e,isPositioned:!1!==I.current};D.current&&!go(R.current,t)&&(R.current=t,Wa.flushSync((()=>{p(t)})))}))}),[h,t,r,P,I]);mo((()=>{!1===c&&R.current.isPositioned&&(R.current.isPositioned=!1,p((e=>({...e,isPositioned:!1}))))}),[c]);const D=n.useRef(!1);mo((()=>(D.current=!0,()=>{D.current=!1})),[]),mo((()=>{if(S&&(O.current=S),E&&(x.current=E),S&&E){if(C.current)return C.current(S,E,T);T()}}),[S,E,T,C,_]);const A=n.useMemo((()=>({reference:O,floating:x,setReference:y,setFloating:w})),[y,w]),k=n.useMemo((()=>({reference:S,floating:E})),[S,E]),j=n.useMemo((()=>{const e={position:r,left:0,top:0};if(!k.floating)return e;const t=bo(k.floating,d.x),n=bo(k.floating,d.y);return l?{...e,transform:"translate("+t+"px, "+n+"px)",...vo(k.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:t,top:n}}),[r,l,k.floating,d.x,d.y]);return n.useMemo((()=>({...d,update:T,refs:A,elements:k,floatingStyles:j})),[d,T,A,k,j])}({...e,elements:{...o,...l&&{reference:l}}}),f=n.useCallback((e=>{const t=jn(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;u(t),h.refs.setReference(t)}),[h.refs]),m=n.useCallback((e=>{(jn(e)||null===e)&&(d.current=e,s(e)),(jn(h.refs.reference.current)||null===h.refs.reference.current||null!==e&&!jn(e))&&h.refs.setReference(e)}),[h.refs]),g=n.useMemo((()=>({...h.refs,setReference:m,setPositionReference:f,domReference:d})),[h.refs,m,f]),v=n.useMemo((()=>({...h.elements,domReference:c})),[h.elements,c]),b=n.useMemo((()=>({...h,...a,refs:g,elements:v,nodeId:t})),[h,g,v,t,a]);return Bo((()=>{a.dataRef.current.floatingContext=b;const e=null==p?void 0:p.nodesRef.current.find((e=>e.id===t));e&&(e.context=b)})),n.useMemo((()=>({...h,context:b,refs:g,elements:v})),[h,g,v,b])}const Li="active",Mi="selected";function Ni(e,t,r){const n=new Map,a="item"===r;let o=e;if(a&&e){const{[Li]:t,[Mi]:r,...n}=e;o=n}return{..."floating"===r&&{tabIndex:-1,[xi]:""},...o,...t.map((t=>{const n=t?t[r]:null;return"function"==typeof n?e?n(e):null:n})).concat(e).reduce(((e,t)=>t?(Object.entries(t).forEach((t=>{let[r,o]=t;var i;a&&[Li,Mi].includes(r)||(0===r.indexOf("on")?(n.has(r)||n.set(r,[]),"function"==typeof o&&(null==(i=n.get(r))||i.push(o),e[r]=function(){for(var e,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return null==(e=n.get(r))?void 0:e.map((e=>e(...a))).find((e=>void 0!==e))})):e[r]=o)})),e):e),{})}}let $i=!1;function Vi(e,t,r){switch(e){case"vertical":return t;case"horizontal":return r;default:return t||r}}function Fi(e,t){return Vi(t,e===Ro||e===_o,e===Co||e===Po)}function Bi(e,t,r){return Vi(t,e===_o,r?e===Co:e===Po)||"Enter"===e||" "===e||""===e}function zi(e,t,r){return Vi(t,r?e===Po:e===Co,e===Ro)}function Ui(e,t){const{open:r,onOpenChange:a,elements:o}=e,{listRef:i,activeIndex:s,onNavigate:l=()=>{},enabled:u=!0,selectedIndex:c=null,allowEscape:d=!1,loop:p=!1,nested:h=!1,rtl:f=!1,virtual:m=!1,focusItemOnOpen:g="auto",focusItemOnHover:v=!0,openOnArrowKeyDown:b=!0,disabledIndices:y,orientation:w="vertical",cols:S=1,scrollItemIntoView:E=!0,virtualItemRef:O,itemSizes:x,dense:R=!1}=t;const _=ti(Ri(o.floating)),C=Zo(),P=Jo(),I=xo(l),T=n.useRef(g),D=n.useRef(null!=c?c:-1),A=n.useRef(null),k=n.useRef(!0),j=n.useRef(I),L=n.useRef(!!o.floating),M=n.useRef(r),N=n.useRef(!1),$=n.useRef(!1),V=ti(y),F=ti(r),B=ti(E),z=ti(c),[U,W]=n.useState(),[H,G]=n.useState(),q=xo((function(e,t,r){function n(e){m?(W(e.id),null==P||P.events.emit("virtualfocus",e),O&&(O.current=e)):Fo(e,{preventScroll:!0,sync:!(!Kn().toLowerCase().startsWith("mac")||navigator.maxTouchPoints||!ta())&&($i||N.current)})}void 0===r&&(r=!1);const a=e.current[t.current];a&&n(a),requestAnimationFrame((()=>{const o=e.current[t.current]||a;if(!o)return;a||n(o);const i=B.current;i&&X&&(r||!k.current)&&(null==o.scrollIntoView||o.scrollIntoView("boolean"==typeof i?{block:"nearest",inline:"nearest"}:i))}))}));Bo((()=>{document.createElement("div").focus({get preventScroll(){return $i=!0,!1}})}),[]),Bo((()=>{u&&(r&&o.floating?T.current&&null!=c&&($.current=!0,D.current=c,I(c)):L.current&&(D.current=-1,j.current(null)))}),[u,r,o.floating,c,I]),Bo((()=>{if(u&&r&&o.floating)if(null==s){if(N.current=!1,null!=z.current)return;if(L.current&&(D.current=-1,q(i,D)),(!M.current||!L.current)&&T.current&&(null!=A.current||!0===T.current&&null==A.current)){let e=0;const t=()=>{if(null==i.current[0]){if(e<2){(e?requestAnimationFrame:queueMicrotask)(t)}e++}else D.current=null==A.current||Bi(A.current,w,f)||h?Do(i,V.current):Ao(i,V.current),A.current=null,I(D.current)};t()}}else To(i,s)||(D.current=s,q(i,D,$.current),$.current=!1)}),[u,r,o.floating,s,z,h,i,w,f,I,q,V]),Bo((()=>{var e;if(!u||o.floating||!P||m||!L.current)return;const t=P.nodesRef.current,r=null==(e=t.find((e=>e.id===C)))||null==(e=e.context)?void 0:e.elements.floating,n=Xn(na(o.floating)),a=t.some((e=>e.context&&Yn(e.context.elements.floating,n)));r&&!a&&k.current&&r.focus({preventScroll:!0})}),[u,o.floating,P,C,m]),Bo((()=>{if(u&&P&&m&&!C)return P.events.on("virtualfocus",e),()=>{P.events.off("virtualfocus",e)};function e(e){G(e.id),O&&(O.current=e)}}),[u,P,m,C,O]),Bo((()=>{j.current=I,L.current=!!o.floating})),Bo((()=>{r||(A.current=null)}),[r]),Bo((()=>{M.current=r}),[r]);const Q=null!=s,X=n.useMemo((()=>{function e(e){if(!r)return;const t=i.current.indexOf(e);-1!==t&&I(t)}return{onFocus(t){let{currentTarget:r}=t;e(r)},onClick:e=>{let{currentTarget:t}=e;return t.focus({preventScroll:!0})},...v&&{onMouseMove(t){let{currentTarget:r}=t;e(r)},onPointerLeave(e){let{pointerType:t}=e;k.current&&"touch"!==t&&(D.current=-1,q(i,D),I(null),m||Fo(_.current,{preventScroll:!0}))}}}}),[r,_,q,v,i,I,m]),Y=xo((e=>{if(k.current=!1,N.current=!0,!F.current&&e.currentTarget===_.current)return;if(h&&zi(e.key,w,f))return ia(e),a(!1,e.nativeEvent,"list-navigation"),void(Ln(o.domReference)&&!m&&o.domReference.focus());const t=D.current,n=Do(i,y),s=Ao(i,y);if("Home"===e.key&&(ia(e),D.current=n,I(D.current)),"End"===e.key&&(ia(e),D.current=s,I(D.current)),S>1){const t=x||Array.from({length:i.current.length},(()=>({width:1,height:1}))),r=Lo(t,S,R),a=r.findIndex((e=>null!=e&&!$o(i.current,e,y))),o=r.reduce(((e,t,r)=>null==t||$o(i.current,t,y)?e:r),-1),l=r[jo({current:r.map((e=>null!=e?i.current[e]:null))},{event:e,orientation:w,loop:p,cols:S,disabledIndices:No([...y||i.current.map(((e,t)=>$o(i.current,t)?t:void 0)),void 0],r),minIndex:a,maxIndex:o,prevIndex:Mo(D.current>s?n:D.current,t,r,S,e.key===_o?"bl":e.key===Po?"tr":"tl"),stopEvent:!0})];if(null!=l&&(D.current=l,I(D.current)),"both"===w)return}if(Fi(e.key,w)){if(ia(e),r&&!m&&Xn(e.currentTarget.ownerDocument)===e.currentTarget)return D.current=Bi(e.key,w,f)?n:s,void I(D.current);Bi(e.key,w,f)?D.current=p?t>=s?d&&t!==i.current.length?-1:n:ko(i,{startingIndex:t,disabledIndices:y}):Math.min(s,ko(i,{startingIndex:t,disabledIndices:y})):D.current=p?t<=n?d&&-1!==t?i.current.length:s:ko(i,{startingIndex:t,decrement:!0,disabledIndices:y}):Math.max(n,ko(i,{startingIndex:t,decrement:!0,disabledIndices:y})),To(i,D.current)?I(null):I(D.current)}})),K=n.useMemo((()=>m&&r&&Q&&{"aria-activedescendant":H||U}),[m,r,Q,H,U]),Z=n.useMemo((()=>({"aria-orientation":"both"===w?void 0:w,...!sa(o.domReference)&&K,onKeyDown:Y,onPointerMove(){k.current=!0}})),[K,Y,o.domReference,w]),J=n.useMemo((()=>{function e(e){"auto"===g&&Jn(e.nativeEvent)&&(T.current=!0)}return{...K,onKeyDown(e){k.current=!1;const t=0===e.key.indexOf("Arrow"),n=function(e,t,r){return Vi(t,r?e===Co:e===Po,e===_o)}(e.key,w,f),o=zi(e.key,w,f),s=Fi(e.key,w),l=(h?n:s)||"Enter"===e.key||""===e.key.trim();if(m&&r){const r=null==P?void 0:P.nodesRef.current.find((e=>null==e.parentId)),a=P&&r?function(e,t){let r,n=-1;return function t(a,o){o>n&&(r=a,n=o),ri(e,a).forEach((e=>{t(e.id,o+1)}))}(t,0),e.find((e=>e.id===r))}(P.nodesRef.current,r.id):null;if(t&&a&&O){const t=new KeyboardEvent("keydown",{key:e.key,bubbles:!0});if(n||o){var u,d;const r=(null==(u=a.context)?void 0:u.elements.domReference)===e.currentTarget,s=o&&!r?null==(d=a.context)?void 0:d.elements.domReference:n?i.current.find((e=>(null==e?void 0:e.id)===U)):null;s&&(ia(e),s.dispatchEvent(t),G(void 0))}var p;if(s&&a.context)if(a.context.open&&a.parentId&&e.currentTarget!==a.context.elements.domReference)return ia(e),void(null==(p=a.context.elements.domReference)||p.dispatchEvent(t))}return Y(e)}(r||b||!t)&&(l&&(A.current=h&&s?null:e.key),h?n&&(ia(e),r?(D.current=Do(i,V.current),I(D.current)):a(!0,e.nativeEvent,"list-navigation")):s&&(null!=c&&(D.current=c),ia(e),!r&&b?a(!0,e.nativeEvent,"list-navigation"):Y(e),r&&I(D.current)))},onFocus(){r&&!m&&I(null)},onPointerDown:function(e){T.current=g,"auto"===g&&ea(e.nativeEvent)&&(T.current=!0)},onMouseDown:e,onClick:e}}),[U,K,Y,V,g,i,h,I,a,r,b,w,f,c,P,m,O]);return n.useMemo((()=>u?{reference:J,floating:Z,item:X}:{}),[u,J,Z,X])}const Wi=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Hi(e,t,r){let n,a=r.initialDeps??[];function o(){var o,i,s,l;let u;r.key&&(null==(o=r.debug)?void 0:o.call(r))&&(u=Date.now());const c=e();if(!(c.length!==a.length||c.some(((e,t)=>a[t]!==e))))return n;let d;if(a=c,r.key&&(null==(i=r.debug)?void 0:i.call(r))&&(d=Date.now()),n=t(...c),r.key&&(null==(s=r.debug)?void 0:s.call(r))){Math.round(100*(Date.now()-u)),Math.round(100*(Date.now()-d))}return null==(l=null==r?void 0:r.onChange)||l.call(r,n),n}return o.updateDeps=e=>{a=e},o}function Gi(e,t){if(void 0===e)throw new Error("Unexpected undefined"+(t?`: ${t}`:""));return e}const qi=(e,t,r)=>{let n;return function(...a){e.clearTimeout(n),n=e.setTimeout((()=>t.apply(this,a)),r)}},Qi=e=>e,Xi=e=>{const t=Math.max(e.startIndex-e.overscan,0),r=Math.min(e.endIndex+e.overscan,e.count-1),n=[];for(let e=t;e<=r;e++)n.push(e);return n},Yi=(e,t)=>{const r=e.scrollElement;if(!r)return;const n=e.targetWindow;if(!n)return;const a=e=>{const{width:r,height:n}=e;t({width:Math.round(r),height:Math.round(n)})};if(a(r.getBoundingClientRect()),!n.ResizeObserver)return()=>{};const o=new n.ResizeObserver((t=>{const n=()=>{const e=t[0];if(null==e?void 0:e.borderBoxSize){const t=e.borderBoxSize[0];if(t)return void a({width:t.inlineSize,height:t.blockSize})}a(r.getBoundingClientRect())};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(n):n()}));return o.observe(r,{box:"border-box"}),()=>{o.unobserve(r)}},Ki={passive:!0},Zi="undefined"==typeof window||"onscrollend"in window,Ji=(e,t)=>{const r=e.scrollElement;if(!r)return;const n=e.targetWindow;if(!n)return;let a=0;const o=e.options.useScrollendEvent&&Zi?()=>{}:qi(n,(()=>{t(a,!1)}),e.options.isScrollingResetDelay),i=n=>()=>{const{horizontal:i,isRtl:s}=e.options;a=i?r.scrollLeft*(s?-1:1):r.scrollTop,o(),t(a,n)},s=i(!0),l=i(!1);l(),r.addEventListener("scroll",s,Ki);const u=e.options.useScrollendEvent&&Zi;return u&&r.addEventListener("scrollend",l,Ki),()=>{r.removeEventListener("scroll",s),u&&r.removeEventListener("scrollend",l)}},es=(e,t,r)=>{if(null==t?void 0:t.borderBoxSize){const e=t.borderBoxSize[0];if(e){return Math.round(e[r.options.horizontal?"inlineSize":"blockSize"])}}return Math.round(e.getBoundingClientRect()[r.options.horizontal?"width":"height"])},ts=(e,{adjustments:t=0,behavior:r},n)=>{var a,o;const i=e+t;null==(o=null==(a=n.scrollElement)?void 0:a.scrollTo)||o.call(a,{[n.options.horizontal?"left":"top"]:i,behavior:r})};class rs{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null;const t=()=>e||(this.targetWindow&&this.targetWindow.ResizeObserver?e=new this.targetWindow.ResizeObserver((e=>{e.forEach((e=>{const t=()=>{this._measureElement(e.target,e)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(t):t()}))})):null);return{disconnect:()=>{var r;null==(r=t())||r.disconnect(),e=null},observe:e=>{var r;return null==(r=t())?void 0:r.observe(e,{box:"border-box"})},unobserve:e=>{var r;return null==(r=t())?void 0:r.unobserve(e)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach((([t,r])=>{void 0===r&&delete e[t]})),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Qi,rangeExtractor:Xi,onChange:()=>{},measureElement:es,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...e}},this.notify=e=>{var t,r;null==(r=(t=this.options).onChange)||r.call(t,this,e)},this.maybeNotify=Hi((()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null])),(e=>{this.notify(e)}),{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach((e=>e())),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;const t=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==t){if(this.cleanup(),!t)return void this.maybeNotify();this.scrollElement=t,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=(null==(e=this.scrollElement)?void 0:e.window)??null,this.elementsCache.forEach((e=>{this.observer.observe(e)})),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,(e=>{this.scrollRect=e,this.maybeNotify()}))),this.unsubs.push(this.options.observeElementOffset(this,((e,t)=>{this.scrollAdjustments=0,this.scrollDirection=t?this.getScrollOffset()<e?"forward":"backward":null,this.scrollOffset=e,this.isScrolling=t,this.maybeNotify()})))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??("function"==typeof this.options.initialOffset?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,t)=>{const r=new Map,n=new Map;for(let a=t-1;a>=0;a--){const t=e[a];if(r.has(t.lane))continue;const o=n.get(t.lane);if(null==o||t.end>o.end?n.set(t.lane,t):t.end<o.end&&r.set(t.lane,!0),r.size===this.options.lanes)break}return n.size===this.options.lanes?Array.from(n.values()).sort(((e,t)=>e.end===t.end?e.index-t.index:e.end-t.end))[0]:void 0},this.getMeasurementOptions=Hi((()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled]),((e,t,r,n,a)=>(this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:t,scrollMargin:r,getItemKey:n,enabled:a})),{key:!1}),this.getMeasurements=Hi((()=>[this.getMeasurementOptions(),this.itemSizeCache]),(({count:e,paddingStart:t,scrollMargin:r,getItemKey:n,enabled:a},o)=>{if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),[];0===this.measurementsCache.length&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach((e=>{this.itemSizeCache.set(e.key,e.size)})));const i=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const s=this.measurementsCache.slice(0,i);for(let a=i;a<e;a++){const e=n(a),i=1===this.options.lanes?s[a-1]:this.getFurthestMeasurement(s,a),l=i?i.end+this.options.gap:t+r,u=o.get(e),c="number"==typeof u?u:this.options.estimateSize(a),d=l+c,p=i?i.lane:a%this.options.lanes;s[a]={index:a,start:l,size:c,end:d,key:e,lane:p}}return this.measurementsCache=s,s}),{key:!1,debug:()=>this.options.debug}),this.calculateRange=Hi((()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes]),((e,t,r,n)=>this.range=e.length>0&&t>0?function({measurements:e,outerSize:t,scrollOffset:r,lanes:n}){const a=e.length-1,o=t=>e[t].start;if(e.length<=n)return{startIndex:0,endIndex:a};let i=ns(0,a,o,r),s=i;if(1===n)for(;s<a&&e[s].end<r+t;)s++;else if(n>1){const o=Array(n).fill(0);for(;s<a&&o.some((e=>e<r+t));){const t=e[s];o[t.lane]=t.end,s++}const l=Array(n).fill(r+t);for(;i>0&&l.some((e=>e>=r));){const t=e[i];l[t.lane]=t.start,i--}i=Math.max(0,i-i%n),s=Math.min(a,s+(n-1-s%n))}return{startIndex:i,endIndex:s}}({measurements:e,outerSize:t,scrollOffset:r,lanes:n}):null),{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Hi((()=>{let e=null,t=null;const r=this.calculateRange();return r&&(e=r.startIndex,t=r.endIndex),this.maybeNotify.updateDeps([this.isScrolling,e,t]),[this.options.rangeExtractor,this.options.overscan,this.options.count,e,t]}),((e,t,r,n,a)=>null===n||null===a?[]:e({startIndex:n,endIndex:a,overscan:t,count:r})),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const t=this.options.indexAttribute,r=e.getAttribute(t);return r?parseInt(r,10):(console.warn(`Missing attribute name '${t}={index}' on measured element.`),-1)},this._measureElement=(e,t)=>{const r=this.indexFromElement(e),n=this.measurementsCache[r];if(!n)return;const a=n.key,o=this.elementsCache.get(a);o!==e&&(o&&this.observer.unobserve(o),this.observer.observe(e),this.elementsCache.set(a,e)),e.isConnected&&this.resizeItem(r,this.options.measureElement(e,t,this))},this.resizeItem=(e,t)=>{const r=this.measurementsCache[e];if(!r)return;const n=t-(this.itemSizeCache.get(r.key)??r.size);0!==n&&((void 0!==this.shouldAdjustScrollPositionOnItemSizeChange?this.shouldAdjustScrollPositionOnItemSizeChange(r,n,this):r.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=n,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(r.index),this.itemSizeCache=new Map(this.itemSizeCache.set(r.key,t)),this.notify(!1))},this.measureElement=e=>{e?this._measureElement(e,void 0):this.elementsCache.forEach(((e,t)=>{e.isConnected||(this.observer.unobserve(e),this.elementsCache.delete(t))}))},this.getVirtualItems=Hi((()=>[this.getVirtualIndexes(),this.getMeasurements()]),((e,t)=>{const r=[];for(let n=0,a=e.length;n<a;n++){const a=t[e[n]];r.push(a)}return r}),{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const t=this.getMeasurements();if(0!==t.length)return Gi(t[ns(0,t.length-1,(e=>Gi(t[e]).start),e)])},this.getOffsetForAlignment=(e,t,r=0)=>{const n=this.getSize(),a=this.getScrollOffset();"auto"===t&&(t=e>=a+n?"end":"start"),"center"===t?e+=(r-n)/2:"end"===t&&(e-=n);const o=this.options.horizontal?"scrollWidth":"scrollHeight",i=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[o]:this.scrollElement[o]:0)-n;return Math.max(Math.min(i,e),0)},this.getOffsetForIndex=(e,t="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const r=this.measurementsCache[e];if(!r)return;const n=this.getSize(),a=this.getScrollOffset();if("auto"===t)if(r.end>=a+n-this.options.scrollPaddingEnd)t="end";else{if(!(r.start<=a+this.options.scrollPaddingStart))return[a,t];t="start"}const o="end"===t?r.end+this.options.scrollPaddingEnd:r.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,t,r.size),t]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{null!==this.scrollToIndexTimeoutId&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(e,{align:t="start",behavior:r}={})=>{this.cancelScrollToIndex(),"smooth"===r&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,t),{adjustments:void 0,behavior:r})},this.scrollToIndex=(e,{align:t="auto",behavior:r}={})=>{e=Math.max(0,Math.min(e,this.options.count-1)),this.cancelScrollToIndex(),"smooth"===r&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const n=this.getOffsetForIndex(e,t);if(!n)return;const[a,o]=n;this._scrollToOffset(a,{adjustments:void 0,behavior:r}),"smooth"!==r&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout((()=>{this.scrollToIndexTimeoutId=null;if(this.elementsCache.has(this.options.getItemKey(e))){const[a]=Gi(this.getOffsetForIndex(e,o));t=a,n=this.getScrollOffset(),Math.abs(t-n)<1||this.scrollToIndex(e,{align:o,behavior:r})}else this.scrollToIndex(e,{align:o,behavior:r});var t,n})))},this.scrollBy=(e,{behavior:t}={})=>{this.cancelScrollToIndex(),"smooth"===t&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:t})},this.getTotalSize=()=>{var e;const t=this.getMeasurements();let r;if(0===t.length)r=this.options.paddingStart;else if(1===this.options.lanes)r=(null==(e=t[t.length-1])?void 0:e.end)??0;else{const e=Array(this.options.lanes).fill(null);let n=t.length-1;for(;n>0&&e.some((e=>null===e));){const r=t[n];null===e[r.lane]&&(e[r.lane]=r.end),n--}r=Math.max(...e.filter((e=>null!==e)))}return Math.max(r-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:t,behavior:r})=>{this.options.scrollToFn(e,{behavior:r,adjustments:t},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(e)}}const ns=(e,t,r,n)=>{for(;e<=t;){const a=(e+t)/2|0,o=r(a);if(o<n)e=a+1;else{if(!(o>n))return a;t=a-1}}return e>0?e-1:0};const as="undefined"!=typeof document?n.useLayoutEffect:n.useEffect;function os(e){const t=n.useReducer((()=>({})),{})[1],r={...e,onChange:(r,n)=>{var a;n?(0,Wa.flushSync)(t):t(),null==(a=e.onChange)||a.call(e,r,n)}},[a]=n.useState((()=>new rs(r)));return a.setOptions(r),as((()=>a._didMount()),[]),as((()=>a._willUpdate())),a}var is=Object.defineProperty,ss=Object.getOwnPropertySymbols,ls=Object.prototype.hasOwnProperty,us=Object.prototype.propertyIsEnumerable,cs=(e,t,r)=>t in e?is(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const ds=(0,n.forwardRef)((function(e,t){var r=e,{children:a,active:i,addGroupBottomBorder:l,isMultiValueEdit:u,checked:c}=r,d=((e,t)=>{var r={};for(var n in e)ls.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&ss)for(var n of ss(e))t.indexOf(n)<0&&us.call(e,n)&&(r[n]=e[n]);return r})(r,["children","active","addGroupBottomBorder","isMultiValueEdit","checked"]);const h=(0,s.useStyles2)(ps),f=(0,n.useId)();return o().createElement("div",((e,t)=>{for(var r in t||(t={}))ls.call(t,r)&&cs(e,r,t[r]);if(ss)for(var r of ss(t))us.call(t,r)&&cs(e,r,t[r]);return e})({ref:t,role:"option",id:f,"aria-selected":i,className:(0,p.cx)(h.option,i&&h.optionFocused,l&&h.groupBottomBorder)},d),o().createElement("div",{className:h.optionBody,"data-testid":`data-testid ad hoc filter option value ${a}`},o().createElement("span",null,u?o().createElement(s.Checkbox,{tabIndex:-1,checked:c,className:h.checkbox}):null,a)))})),ps=e=>({option:(0,p.css)({label:"grafana-select-option",top:0,left:0,width:"100%",position:"absolute",padding:e.spacing(1),display:"flex",alignItems:"center",flexDirection:"row",flexShrink:0,whiteSpace:"nowrap",cursor:"pointer","&:hover":{background:e.colors.action.hover,"@media (forced-colors: active), (prefers-contrast: more)":{border:`1px solid ${e.colors.primary.border}`}}}),optionFocused:(0,p.css)({label:"grafana-select-option-focused",background:e.colors.action.focus,"@media (forced-colors: active), (prefers-contrast: more)":{border:`1px solid ${e.colors.primary.border}`}}),optionBody:(0,p.css)({label:"grafana-select-option-body",display:"flex",fontWeight:e.typography.fontWeightMedium,flexDirection:"column",flexGrow:1}),groupBottomBorder:(0,p.css)({borderBottom:`1px solid ${e.colors.border.weak}`}),checkbox:(0,p.css)({paddingRight:e.spacing(.5)}),multiValueApplyWrapper:(0,p.css)({position:"fixed",top:0,left:0,display:"flex",backgroundColor:e.colors.background.primary,color:e.colors.text.primary,boxShadow:e.shadows.z2,overflowY:"auto",zIndex:e.zIndex.dropdown,gap:e.spacing(1.5),padding:`${e.spacing(1.5)} ${e.spacing(1)}`})}),hs=()=>o().createElement(ds,{onClick:e=>e.stopPropagation()},"Loading options..."),fs=()=>o().createElement(ds,{onClick:e=>e.stopPropagation()},"No options found"),ms=({handleFetchOptions:e})=>o().createElement(ds,{onClick:e},"An error has occurred fetching labels. Click to retry"),gs=({onApply:e,floatingElement:t,maxOptionWidth:r,menuHeight:n})=>{const a=(0,s.useStyles2)(ps),i=null==t?void 0:t.getBoundingClientRect();return o().createElement("div",{className:a.multiValueApplyWrapper,style:{width:`${r}px`,transform:`translate(${null==i?void 0:i.left}px,${i?i.top+n:0}px)`}},o().createElement(s.Button,{onClick:e,size:"sm",tabIndex:-1},"Apply"))},vs={key:"operator",operator:"value",value:"key"},bs=(e,t,r,n,a)=>ys(vs[e],t,"value"===e?r:void 0,n,a),ys=(e,t,r,n,a)=>{t(e),null==r||r(void 0,a),setTimeout((()=>null==n?void 0:n.focus()))},ws=({filterInputType:e,item:t,filter:r,setFilterMultiValues:n,onAddCustomValue:a})=>{var o,i,s,l,u;if("key"===e)return{key:t.value,keyLabel:t.label?t.label:t.value,meta:null==t?void 0:t.meta};if("value"===e)return t.isCustom&&a?a(t,r):{value:t.value,valueLabels:[t.label?t.label:t.value]};if("operator"===e){if(xl(r.operator)&&!xl(t.value))return n([]),{operator:t.value,valueLabels:[(null==(o=r.valueLabels)?void 0:o[0])||(null==(i=r.values)?void 0:i[0])||r.value],values:void 0};if(xl(t.value)&&!xl(r.operator)){const e=[(null==(s=r.valueLabels)?void 0:s[0])||(null==(l=r.values)?void 0:l[0])||r.value],a=[r.value];return a[0]&&n([{value:a[0],label:null!=(u=null==e?void 0:e[0])?u:a[0]}]),{operator:t.value,valueLabels:e,values:a}}}return{[e]:t.value}},Ss="Filter by label values",Es=(e,t,r,n)=>{var a;return"key"===t?Ss:"value"===t?r?"Edit values":(null==(a=e.valueLabels)?void 0:a[0])||"":e[t]&&!n?`${e[t]}`:Ss},Os=({populateInputOnEdit:e,item:t,filterInputType:r,setInputValue:n,filter:a})=>{var o,i,s;e&&!xl(t.value||"")&&"value"===vs[r]?n(null!=(s=null!=(i=null==(o=null==a?void 0:a.valueLabels)?void 0:o[0])?i:null==a?void 0:a.value)?s:""):n("")},xs=({open:e,onOpenChange:t,activeIndex:r,setActiveIndex:a,outsidePressIdsToIgnore:o,listRef:i,disabledIndicesRef:s})=>{const{refs:l,floatingStyles:u,context:c}=ji({whileElementsMounted:uo,open:e,onOpenChange:t,placement:"bottom-start",middleware:[(d=10,{...co(d),options:[d,p]}),wo({padding:10}),So({apply({availableHeight:e,availableWidth:t,elements:r}){r.floating.style.maxHeight=`${Math.min(300,e)}px`,r.floating.style.maxWidth=`${t}px`},padding:10})],strategy:"fixed"});var d,p;const h=function(e,t){var r;void 0===t&&(t={});const{open:a,floatingId:o}=e,{enabled:i=!0,role:s="dialog"}=t,l=null!=(r=Wi.get(s))?r:s,u=Qo(),c=null!=Zo(),d=n.useMemo((()=>"tooltip"===l||"label"===s?{["aria-"+("label"===s?"labelledby":"describedby")]:a?o:void 0}:{"aria-expanded":a?"true":"false","aria-haspopup":"alertdialog"===l?"dialog":l,"aria-controls":a?o:void 0,..."listbox"===l&&{role:"combobox"},..."menu"===l&&{id:u},..."menu"===l&&c&&{role:"menuitem"},..."select"===s&&{"aria-autocomplete":"none"},..."combobox"===s&&{"aria-autocomplete":"list"}}),[l,o,c,a,u,s]),p=n.useMemo((()=>{const e={id:o,...l&&{role:l}};return"tooltip"===l||"label"===s?e:{...e,..."menu"===l&&{"aria-labelledby":u}}}),[l,o,u,s]),h=n.useCallback((e=>{let{active:t,selected:r}=e;const n={role:"option",...t&&{id:o+"-option"}};switch(s){case"select":return{...n,"aria-selected":t&&r};case"combobox":return{...n,...t&&{"aria-selected":!0}}}return{}}),[o,s]);return n.useMemo((()=>i?{reference:d,floating:p,item:h}:{}),[i,d,p,h])}(c,{role:"listbox"}),f=function(e,t){void 0===t&&(t={});const{open:r,onOpenChange:a,elements:o,dataRef:i}=e,{enabled:s=!0,escapeKey:l=!0,outsidePress:u=!0,outsidePressEvent:c="pointerdown",referencePress:d=!1,referencePressEvent:p="pointerdown",ancestorScroll:h=!1,bubbles:f,capture:m}=t,g=Jo(),v=xo("function"==typeof u?u:()=>!1),b="function"==typeof u?v:u,y=n.useRef(!1),w=n.useRef(!1),{escapeKey:S,outsidePress:E}=ki(f),{escapeKey:O,outsidePress:x}=ki(m),R=xo((e=>{var t;if(!r||!s||!l||"Escape"!==e.key)return;const n=null==(t=i.current.floatingContext)?void 0:t.nodeId,o=g?ri(g.nodesRef.current,n):[];if(!S&&(e.stopPropagation(),o.length>0)){let e=!0;if(o.forEach((t=>{var r;null==(r=t.context)||!r.open||t.context.dataRef.current.__escapeKeyBubbles||(e=!1)})),!e)return}a(!1,function(e){return"nativeEvent"in e}(e)?e.nativeEvent:e,"escape-key")})),_=xo((e=>{var t;const r=()=>{var t;R(e),null==(t=oa(e))||t.removeEventListener("keydown",r)};null==(t=oa(e))||t.addEventListener("keydown",r)})),C=xo((e=>{var t;const r=y.current;y.current=!1;const n=w.current;if(w.current=!1,"click"===c&&n)return;if(r)return;if("function"==typeof b&&!b(e))return;const s=oa(e),l="["+ei("inert")+"]",u=na(o.floating).querySelectorAll(l);let d=jn(s)?s:null;for(;d&&!zn(d);){const e=Hn(d);if(zn(e)||!jn(e))break;d=e}if(u.length&&jn(s)&&!s.matches("html,body")&&!Yn(s,o.floating)&&Array.from(u).every((e=>!Yn(d,e))))return;if(Ln(s)&&T){const t=s.clientWidth>0&&s.scrollWidth>s.clientWidth,r=s.clientHeight>0&&s.scrollHeight>s.clientHeight;let n=r&&e.offsetX>s.clientWidth;if(r&&"rtl"===Un(s).direction&&(n=e.offsetX<=s.offsetWidth-s.clientWidth),n||t&&e.offsetY>s.clientHeight)return}const p=null==(t=i.current.floatingContext)?void 0:t.nodeId,h=g&&ri(g.nodesRef.current,p).some((t=>{var r;return aa(e,null==(r=t.context)?void 0:r.elements.floating)}));if(aa(e,o.floating)||aa(e,o.domReference)||h)return;const f=g?ri(g.nodesRef.current,p):[];if(f.length>0){let e=!0;if(f.forEach((t=>{var r;null==(r=t.context)||!r.open||t.context.dataRef.current.__outsidePressBubbles||(e=!1)})),!e)return}a(!1,e,"outside-press")})),P=xo((e=>{var t;const r=()=>{var t;C(e),null==(t=oa(e))||t.removeEventListener(c,r)};null==(t=oa(e))||t.addEventListener(c,r)}));n.useEffect((()=>{if(!r||!s)return;function e(e){a(!1,e,"ancestor-scroll")}i.current.__escapeKeyBubbles=S,i.current.__outsidePressBubbles=E;const t=na(o.floating);l&&t.addEventListener("keydown",O?_:R,O),b&&t.addEventListener(c,x?P:C,x);let n=[];return h&&(jn(o.domReference)&&(n=qn(o.domReference)),jn(o.floating)&&(n=n.concat(qn(o.floating))),!jn(o.reference)&&o.reference&&o.reference.contextElement&&(n=n.concat(qn(o.reference.contextElement)))),n=n.filter((e=>{var r;return e!==(null==(r=t.defaultView)?void 0:r.visualViewport)})),n.forEach((t=>{t.addEventListener("scroll",e,{passive:!0})})),()=>{l&&t.removeEventListener("keydown",O?_:R,O),b&&t.removeEventListener(c,x?P:C,x),n.forEach((t=>{t.removeEventListener("scroll",e)}))}}),[i,o,l,b,c,r,a,h,s,S,E,R,O,_,C,x,P]),n.useEffect((()=>{y.current=!1}),[b,c]);const I=n.useMemo((()=>({onKeyDown:R,[Di[p]]:e=>{d&&a(!1,e.nativeEvent,"reference-press")}})),[R,a,d,p]),T=n.useMemo((()=>({onKeyDown:R,onMouseDown(){w.current=!0},onMouseUp(){w.current=!0},[Ai[c]]:()=>{y.current=!0}})),[R,c]);return n.useMemo((()=>s?{reference:I,floating:T}:{}),[s,I,T])}(c,{outsidePress:e=>{var t;if(e.currentTarget instanceof Element){const r=e.currentTarget;let n=r.id;if("path"===r.nodeName&&(n=(null==(t=r.parentElement)?void 0:t.id)||""),o.includes(n))return!1}return!0}}),m=Ui(c,{listRef:i,activeIndex:r,onNavigate:a,virtual:!0,loop:!0,disabledIndices:s.current}),{getReferenceProps:g,getFloatingProps:v,getItemProps:b}=function(e){void 0===e&&(e=[]);const t=e.map((e=>null==e?void 0:e.reference)),r=e.map((e=>null==e?void 0:e.floating)),a=e.map((e=>null==e?void 0:e.item)),o=n.useCallback((t=>Ni(t,e,"reference")),t),i=n.useCallback((t=>Ni(t,e,"floating")),r),s=n.useCallback((t=>Ni(t,e,"item")),a);return n.useMemo((()=>({getReferenceProps:o,getFloatingProps:i,getItemProps:s})),[o,i,s])}([h,f,m]);return{refs:l,floatingStyles:u,context:c,getReferenceProps:g,getFloatingProps:v,getItemProps:b}};var Rs=Object.defineProperty,_s=Object.defineProperties,Cs=Object.getOwnPropertyDescriptors,Ps=Object.getOwnPropertySymbols,Is=Object.prototype.hasOwnProperty,Ts=Object.prototype.propertyIsEnumerable,Ds=(e,t,r)=>t in e?Rs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,As=(e,t)=>{for(var r in t||(t={}))Is.call(t,r)&&Ds(e,r,t[r]);if(Ps)for(var r of Ps(t))Ts.call(t,r)&&Ds(e,r,t[r]);return e};const ks=({item:e,handleRemoveMultiValue:t,index:r,handleEditMultiValuePill:a})=>{var i,l;const u=(0,s.useStyles2)(js),c=(0,n.useCallback)((t=>{t.stopPropagation(),t.preventDefault(),a(e)}),[a,e]),d=(0,n.useCallback)((e=>{"Enter"===e.key&&c(e)}),[c]),h=(0,n.useCallback)((r=>{r.stopPropagation(),r.preventDefault(),t(e)}),[t,e]),f=(0,n.useCallback)((e=>{"Enter"===e.key&&h(e)}),[h]);return o().createElement("div",{className:(0,p.cx)(u.basePill,u.valuePill),onClick:c,onKeyDown:d,tabIndex:0,id:`${e.value}-${r}`},null!=(i=e.label)?i:e.value,o().createElement(s.Button,{onClick:h,onKeyDownCapture:f,fill:"text",size:"sm",variant:"secondary",className:u.removeButton,tooltip:`Remove filter value - ${null!=(l=e.label)?l:e.value}`},o().createElement(s.Icon,{name:"times",size:"md",id:`${e.value}-${r}-close-icon`})))},js=e=>{return{basePill:(0,p.css)((t=As({display:"flex",alignItems:"center",background:e.colors.action.disabledBackground,border:`1px solid ${e.colors.border.weak}`,padding:e.spacing(.125,1,.125,1),color:e.colors.text.primary,overflow:"hidden",whiteSpace:"nowrap",minHeight:e.spacing(2.75)},e.typography.bodySmall),r={cursor:"pointer"},_s(t,Cs(r)))),valuePill:(0,p.css)({background:e.colors.action.selected,padding:e.spacing(.125,0,.125,1)}),removeButton:(0,p.css)({marginInline:e.spacing(.5),height:"100%",padding:0,cursor:"pointer","&:hover":{color:e.colors.text.primary}})};var t,r};var Ls=Object.defineProperty,Ms=Object.defineProperties,Ns=Object.getOwnPropertyDescriptors,$s=Object.getOwnPropertySymbols,Vs=Object.prototype.hasOwnProperty,Fs=Object.prototype.propertyIsEnumerable,Bs=(e,t,r)=>t in e?Ls(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,zs=(e,t)=>{for(var r in t||(t={}))Vs.call(t,r)&&Bs(e,r,t[r]);if($s)for(var r of $s(t))Fs.call(t,r)&&Bs(e,r,t[r]);return e},Us=(e,t)=>Ms(e,Ns(t));const Ws=(0,n.forwardRef)((function({filter:e,model:t,isAlwaysWip:r,handleChangeViewMode:a,focusOnWipInputRef:i,populateInputOnEdit:l},u){var c,d,h,f;const[m,g]=(0,n.useState)(!1),[v,b]=(0,n.useState)([]),[y,w]=(0,n.useState)(!1),[S,E]=(0,n.useState)(!1),[O,x]=(0,n.useState)(""),[R,_]=(0,n.useState)(null),[C,P]=(0,n.useState)(r?"key":"value"),[I,T]=(0,n.useState)(!r&&"value"===C),D=(0,s.useStyles2)(Hs),[A,k]=(0,n.useState)([]),[j,L]=(0,n.useState)({}),M=null==(c=t.state.allowCustomValue)||c,N=(0,n.useRef)(null),$=xl((null==e?void 0:e.operator)||""),V=$&&"value"===C,F=(0,n.useId)(),B=(0,n.useRef)([]),z=(0,n.useRef)([]),U=(0,n.useRef)(r?"key":"value"),W=(0,n.useMemo)((()=>fn(v)),[v]),H=(0,n.useMemo)((()=>!r&&t.state.filters.at(-1)===e),[e,r,t.state.filters]),G=(0,n.useCallback)((()=>{r&&(t._addWip(),P("key"),x(""))}),[t,r]),q=(0,n.useCallback)(((e,t,r,n)=>{if(r.length){const n=[],a=[];r.forEach((e=>{var t;n.push(null!=(t=e.label)?t:e.value),a.push(e.value)})),e._updateFilter(t,{valueLabels:n,values:a,value:a[0]}),k([])}n||setTimeout((()=>{var e;return null==(e=K.domReference.current)?void 0:e.focus()}))}),[]),Q=(0,n.useCallback)((e=>{k((t=>t.some((t=>t.value===e.value))?t.filter((t=>t.value!==e.value)):[...t,e]))}),[]),X=(0,n.useCallback)(((r,n,o)=>{g(r),o&&["outside-press","escape-key"].includes(o)&&(V&&q(t,e,A),G(),null==a||a())}),[e,A,a,q,G,V,t]),Y=(0,n.useMemo)((()=>[F,...A.reduce(((e,t,r)=>[...e,`${t.value}-${r}`,`${t.value}-${r}-close-icon`]),[])]),[F,A]),{refs:K,floatingStyles:Z,context:J,getReferenceProps:ee,getFloatingProps:te,getItemProps:re}=xs({open:m,onOpenChange:X,activeIndex:R,setActiveIndex:_,outsidePressIdsToIgnore:Y,listRef:B,disabledIndicesRef:z});(0,n.useImperativeHandle)(u,(()=>()=>{var e;return null==(e=K.domReference.current)?void 0:e.focus()}),[K.domReference]);const ne=(0,n.useCallback)((e=>{k((t=>t.filter((t=>t.value!==e.value)))),setTimeout((()=>{var e;return null==(e=K.domReference.current)?void 0:e.focus()}))}),[K.domReference]),ae=(e=>e.flatMap((e=>e.options?[e,...e.options]:[e])))(eu(W(I?"":O)));M&&"operator"!==C&&O&&ae.push({value:O.trim(),label:O.trim(),isCustom:!0});const oe=t.state.onAddCustomValue,ie=((e,t,r)=>{var n,a,o,i;let s=182;const l=[],u=[];for(let t=0;t<e.length;t++){l.push(null),(null==(n=e[t])?void 0:n.options)&&u.push(t);let r=null!=(o=null!=(a=e[t].label)?a:e[t].value)?o:"",c=8;8*r.length<6*((null==(i=e[t].description)?void 0:i.length)||0)&&(r=e[t].description,c=6);const d=(e[t].isCustom?r.length+18:r.length)*c+16;d>s&&(s=d)}return t.current=[...l],r.current=[...u],s})(ae,B,z),se=(0,n.useCallback)((async r=>{var n;E(!1),w(!0),b([]);let a=[];try{if("key"===r?a=await t._getKeys(null):"operator"===r?a=t._getOperators():"value"===r&&(a=await t._getValuesFor(e)),U.current!==r)return;b(a),(null==(n=a[0])?void 0:n.group)?_(1):_(0)}catch(e){E(!0)}w(!1)}),[e,t]),le=function(e){return os({observeElementRect:Yi,observeElementOffset:Ji,scrollToFn:ts,...e})}({count:ae.length,getScrollElement:()=>K.floating.current,estimateSize:e=>ae[e].description?60:38,overscan:5}),ue=(0,n.useCallback)(((n,a)=>{if("Backspace"===n.key&&!O){if("value"===C){if(a&&A.length)return void k((e=>{const t=[...e];return t.splice(-1,1),t}));if(null==e?void 0:e.origin)return;return void P("operator")}null==i||i(),t._handleComboboxBackspace(e),r&&G()}}),[O,C,t,e,r,A.length,G,i]),ce=(0,n.useCallback)(((r,n)=>{var o;"Tab"!==r.key||r.shiftKey||(n&&(r.preventDefault(),q(t,e,A),null==(o=K.domReference.current)||o.focus()),null==a||a(),G())}),[e,A,a,q,G,t,K.domReference]),de=(0,n.useCallback)(((r,n)=>{"Tab"===r.key&&r.shiftKey&&(n&&(r.preventDefault(),q(t,e,A,!0)),null==a||a(),G())}),[e,A,a,q,G,t]),pe=(0,n.useCallback)(((r,n)=>{if("Enter"===r.key&&null!=R){if(!ae[R])return;const r=ae[R];n?(Q(r),x("")):(t._updateFilter(e,ws({filterInputType:C,item:r,filter:e,setFilterMultiValues:k,onAddCustomValue:oe})),Os({populateInputOnEdit:l,item:r,filterInputType:C,setInputValue:x,filter:e}),bs(C,P,a,K.domReference.current,!H&&void 0),_(null),H&&(null==i||i()))}}),[R,ae,Q,t,e,C,l,a,K.domReference,H,i,oe]),he=(0,n.useCallback)((e=>{var t;const r=e.label||e.value;k((t=>t.filter((t=>t.value!==e.value)))),T(!0),x(r),null==(t=K.domReference.current)||t.focus(),setTimeout((()=>{var e;null==(e=K.domReference.current)||e.select()}))}),[K.domReference]);(0,n.useEffect)((()=>{m&&se(C)}),[m,C]),(0,n.useEffect)((()=>{var t,n,a,o;if(!r){if($&&(null==(t=null==e?void 0:e.values)?void 0:t.length)){const t=e.values.reduce(((t,r,n)=>{var a;return[...t,{label:(null==(a=e.valueLabels)?void 0:a[n])||r,value:r}]}),[]);k(t)}!$&&l&&(x(null!=(a=null==(n=null==e?void 0:e.valueLabels)?void 0:n[0])?a:(null==e?void 0:e.value)||""),setTimeout((()=>{var e;null==(e=K.domReference.current)||e.select()}))),null==(o=K.domReference.current)||o.focus()}}),[]),(0,n.useEffect)((()=>{V&&A&&setTimeout((()=>L({})))}),[A,V]),(0,n.useLayoutEffect)((()=>{U.current&&(U.current=C)}),[C]),(0,n.useLayoutEffect)((()=>{var e,t;null!==R&&le.range&&(R>(null==(e=le.range)?void 0:e.endIndex)||R<(null==(t=le.range)?void 0:t.startIndex))&&le.scrollToIndex(R)}),[R,le]);const fe=null!=(d=null==e?void 0:e.keyLabel)?d:null==e?void 0:e.key;return o().createElement("div",{className:D.comboboxWrapper},e?o().createElement("div",{className:D.pillWrapper},(null==e?void 0:e.key)?o().createElement("div",{className:(0,p.cx)(D.basePill,D.keyPill)},fe):null,(null==e?void 0:e.key)&&(null==e?void 0:e.operator)&&"operator"!==C?o().createElement("div",zs({id:F,className:(0,p.cx)(D.basePill,!e.origin&&D.operatorPill,e.origin&&D.keyPill,F),"aria-label":"Edit filter operator",tabIndex:e.origin?-1:0,onClick:t=>{e.origin?null==a||a():(t.stopPropagation(),x(""),ys("operator",P,void 0,K.domReference.current))},onKeyDown:t=>{e.origin||(de(t,$),"Enter"===t.key&&(x(""),ys("operator",P,void 0,K.domReference.current)))}},!e.origin&&{role:"button"}),e.operator):null,o().createElement("div",{ref:N}),V?A.map(((e,t)=>o().createElement(ks,{key:`${e.value}-${t}`,item:e,index:t,handleRemoveMultiValue:ne,handleEditMultiValuePill:he}))):null):null,o().createElement("input",Us(zs({},ee({ref:K.setReference,onChange:function(e){const t=e.target.value;x(t),_(0),I&&T(!1)},value:O,placeholder:Es(e,C,V,r),"aria-autocomplete":"list",onKeyDown(e){m?("operator"===C&&de(e),ue(e,V),ce(e,V),pe(e,V)):g(!0)}})),{className:(0,p.cx)(D.inputStyle,{[D.loadingInputPadding]:!y}),onClick:e=>{e.stopPropagation(),g(!0)},onFocus:()=>{g(!0)}})),y?o().createElement(s.Spinner,{className:D.loadingIndicator,inline:!0}):null,o().createElement(Ei,null,m&&o().createElement(Ti,{context:J,initialFocus:-1,visuallyHiddenDismiss:!0,modal:!1},o().createElement(o().Fragment,null,o().createElement("div",{style:Us(zs({},Z),{width:`${S?366:ie}px`,transform:V?`translate(${(null==(h=N.current)?void 0:h.getBoundingClientRect().left)||0}px, ${((null==(f=K.domReference.current)?void 0:f.getBoundingClientRect().bottom)||0)+10}px )`:Z.transform}),ref:K.setFloating,className:D.dropdownWrapper,tabIndex:-1},o().createElement("div",Us(zs({style:{height:`${le.getTotalSize()||38}px`}},te()),{tabIndex:-1}),y?o().createElement(hs,null):S?o().createElement(ms,{handleFetchOptions:()=>se(C)}):ae.length||M&&"operator"!==C&&O?le.getVirtualItems().map((r=>{var n;const i=ae[r.index],u=r.index;if(i.options)return o().createElement("div",{key:`${i.label}+${u}`,className:(0,p.cx)(D.optionGroupLabel,D.groupTopBorder),style:{height:`${r.size}px`,transform:`translateY(${r.start}px)`}},o().createElement(s.Text,{weight:"bold",variant:"bodySmall",color:"secondary"},i.label));const c=ae[r.index+1],d=c&&!c.group&&!c.options&&i.group;return o().createElement(ds,Us(zs({},re({key:`${i.value}-${u}`,ref(e){B.current[u]=e},onClick(r){var n;"value"!==C&&r.stopPropagation(),V?(r.preventDefault(),r.stopPropagation(),Q(i),x(""),null==(n=K.domReference.current)||n.focus()):(t._updateFilter(e,ws({filterInputType:C,item:i,filter:e,setFilterMultiValues:k,onAddCustomValue:oe})),Os({populateInputOnEdit:l,item:i,filterInputType:C,setInputValue:x,filter:e}),bs(C,P,a,K.domReference.current,!1))}})),{active:R===u,addGroupBottomBorder:d,style:{height:`${r.size}px`,transform:`translateY(${r.start}px)`},"aria-setsize":ae.length,"aria-posinset":r.index+1,isMultiValueEdit:V,checked:A.some((e=>e.value===i.value))}),o().createElement("span",null,i.isCustom?"Use custom value: ":""," ",null!=(n=i.label)?n:i.value),i.description?o().createElement("div",{className:D.descriptionText},i.description):null)})):o().createElement(fs,null))),V&&!y&&!S&&ae.length?o().createElement(gs,{onApply:()=>{q(t,e,A)},floatingElement:K.floating.current,maxOptionWidth:ie,menuHeight:Math.min(le.getTotalSize(),300)}):null))))})),Hs=e=>({comboboxWrapper:(0,p.css)({display:"flex",flexWrap:"wrap"}),pillWrapper:(0,p.css)({display:"flex",alignItems:"center",flexWrap:"wrap"}),basePill:(0,p.css)(Us(zs({display:"flex",alignItems:"center",background:e.colors.action.disabledBackground,border:`1px solid ${e.colors.border.weak}`,padding:e.spacing(.125,1,.125,1),color:e.colors.text.primary,overflow:"hidden",whiteSpace:"nowrap",minHeight:e.spacing(2.75)},e.typography.bodySmall),{cursor:"pointer"})),keyPill:(0,p.css)({fontWeight:e.typography.fontWeightBold,cursor:"default"}),operatorPill:(0,p.css)({"&:hover":{background:e.colors.action.hover}}),dropdownWrapper:(0,p.css)({backgroundColor:e.colors.background.primary,color:e.colors.text.primary,boxShadow:e.shadows.z2,overflowY:"auto",zIndex:e.zIndex.dropdown}),inputStyle:(0,p.css)({paddingBlock:0,"&:focus":{outline:"none"}}),loadingIndicator:(0,p.css)({color:e.colors.text.secondary,marginLeft:e.spacing(.5)}),loadingInputPadding:(0,p.css)({paddingRight:e.spacing(2.5)}),optionGroupLabel:(0,p.css)({padding:e.spacing(1),position:"absolute",top:0,left:0,width:"100%"}),groupTopBorder:(0,p.css)({"&:not(:first-child)":{borderTop:`1px solid ${e.colors.border.weak}`}}),descriptionText:(0,p.css)(Us(zs({},e.typography.bodySmall),{color:e.colors.text.secondary,paddingTop:e.spacing(.5)}))});var Gs=Object.defineProperty,qs=Object.defineProperties,Qs=Object.getOwnPropertyDescriptors,Xs=Object.getOwnPropertySymbols,Ys=Object.prototype.hasOwnProperty,Ks=Object.prototype.propertyIsEnumerable,Zs=(e,t,r)=>t in e?Gs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Js=(e,t)=>{for(var r in t||(t={}))Ys.call(t,r)&&Zs(e,r,t[r]);if(Xs)for(var r of Xs(t))Ks.call(t,r)&&Zs(e,r,t[r]);return e};function el({filter:e,model:t,readOnly:r,focusOnWipInputRef:a}){var i,l,u;const c=(0,s.useStyles2)(tl),[d,h]=(0,n.useState)(!0),[f,m]=(0,n.useState)(!1),g=(0,n.useRef)(null),[v,b]=(0,n.useState)(!1),y=null!=(i=e.keyLabel)?i:e.key,w=(null==(l=e.valueLabels)?void 0:l.join(", "))||(null==(u=e.values)?void 0:u.join(", "))||e.value,S=(0,n.useCallback)(((e,t)=>{null==e||e.stopPropagation(),r||(m(null!=t?t:!d),h(!d))}),[r,d]);if((0,n.useEffect)((()=>{var e;f&&(null==(e=g.current)||e.focus(),m(!1))}),[f]),(0,n.useEffect)((()=>{e.forceEdit&&d&&(h(!1),t._updateFilter(e,{forceEdit:void 0}))}),[e,t,d]),(0,n.useEffect)((()=>{d&&b((e=>!e&&e))}),[d]),d){const n=o().createElement("span",{className:c.pillText},y," ",e.operator," ",w);return o().createElement("div",{className:(0,p.cx)(c.combinedFilterPill,r&&c.readOnlyCombinedFilter),onClick:e=>{e.stopPropagation(),b(!0),S()},onKeyDown:e=>{"Enter"===e.key&&(b(!0),S())},role:"button","aria-label":`Edit filter with key ${y}`,tabIndex:0,ref:g},w.length<20?n:o().createElement(s.Tooltip,{content:o().createElement("div",{className:c.tooltipText},w),placement:"top"},n),r||e.origin?null:o().createElement(s.IconButton,{onClick:r=>{r.stopPropagation(),t._removeFilter(e),setTimeout((()=>null==a?void 0:a()))},onKeyDownCapture:r=>{"Enter"===r.key&&(r.preventDefault(),r.stopPropagation(),t._removeFilter(e),setTimeout((()=>null==a?void 0:a())))},name:"times",size:"md",className:c.pillIcon,tooltip:`Remove filter with key ${y}`}),e.origin&&!e.originalValue&&o().createElement(s.IconButton,{name:"info-circle",size:"md",className:c.pillIcon,tooltip:`This is a ${e.origin} injected filter`}),e.origin&&e.originalValue&&o().createElement(s.IconButton,{onClick:r=>{r.stopPropagation(),t.restoreOriginalFilter(e)},onKeyDownCapture:r=>{"Enter"===r.key&&(r.preventDefault(),r.stopPropagation(),t.restoreOriginalFilter(e))},name:"history",size:"md",className:c.pillIcon,tooltip:"Restore filter to its original value"}))}return o().createElement(Ws,{filter:e,model:t,handleChangeViewMode:S,focusOnWipInputRef:a,populateInputOnEdit:v})}const tl=e=>{return{combinedFilterPill:(0,p.css)((t=Js({display:"flex",alignItems:"center",background:e.colors.action.selected,borderRadius:e.shape.radius.default,border:`1px solid ${e.colors.border.weak}`,padding:e.spacing(.125,0,.125,1),color:e.colors.text.primary,overflow:"hidden",whiteSpace:"nowrap",minHeight:e.spacing(2.75)},e.typography.bodySmall),r={fontWeight:e.typography.fontWeightBold,cursor:"pointer","&:hover":{background:e.colors.action.hover}},qs(t,Qs(r)))),readOnlyCombinedFilter:(0,p.css)({paddingRight:e.spacing(1),cursor:"text","&:hover":{background:e.colors.action.selected}}),pillIcon:(0,p.css)({marginInline:e.spacing(.5),cursor:"pointer","&:hover":{color:e.colors.text.primary}}),pillText:(0,p.css)({maxWidth:"200px",width:"100%",textOverflow:"ellipsis",overflow:"hidden"}),tooltipText:(0,p.css)({textAlign:"center"})};var t,r},rl=(0,n.forwardRef)((function({model:e},t){const{_wip:r}=e.useState();return(0,n.useLayoutEffect)((()=>{r||e._addWip()}),[r]),o().createElement(Ws,{model:e,filter:r,isAlwaysWip:!0,ref:t})})),nl=(0,n.memo)((function({model:e}){const{baseFilters:t,filters:r,readOnly:a}=e.useState(),i=(0,s.useStyles2)(al),l=(0,n.useRef)();return o().createElement("div",{className:(0,p.cx)(i.comboboxWrapper,{[i.comboboxFocusOutline]:!a}),onClick:()=>{var e;null==(e=l.current)||e.call(l)}},o().createElement(s.Icon,{name:"filter",className:i.filterIcon,size:"lg"}),null==t?void 0:t.map(((t,r)=>t.origin?o().createElement(el,{key:`${r}-${t.key}`,filter:t,model:e,focusOnWipInputRef:l.current}):null)),r.map(((t,r)=>o().createElement(el,{key:`${r}-${t.key}`,filter:t,model:e,readOnly:a||t.readOnly,focusOnWipInputRef:l.current}))),a?null:o().createElement(rl,{model:e,ref:l}))})),al=e=>({comboboxWrapper:(0,p.css)({display:"flex",flexWrap:"wrap",alignItems:"center",columnGap:e.spacing(1),rowGap:e.spacing(.5),minHeight:e.spacing(4),backgroundColor:e.components.input.background,border:`1px solid ${e.colors.border.strong}`,borderRadius:e.shape.radius.default,paddingInline:e.spacing(1),paddingBlock:e.spacing(.5),flexGrow:1}),comboboxFocusOutline:(0,p.css)({"&:focus-within":{outline:"2px dotted transparent",outlineOffset:"2px",boxShadow:`0 0 0 2px ${e.colors.background.canvas}, 0 0 0px 4px ${e.colors.primary.main}`,transitionTimingFunction:"cubic-bezier(0.19, 1, 0.22, 1)",transitionDuration:"0.2s",transitionProperty:"outline, outline-offset, box-shadow",zIndex:2}}),filterIcon:(0,p.css)({color:e.colors.text.secondary,alignSelf:"center"})}),ol=Object.fromEntries(Object.entries(r.scopeFilterOperatorMap).map((([e,t])=>[t,e])));function il(e){return new Set(["equals","not-equals","one-of","not-one-of"]).has(e)}function sl(e,t,n){var a,o;const i=e.get(n.key);i&&function(e,t){const n=r.scopeFilterOperatorMap[e];if(!il(n)||!il(t))return!1;if(n.includes("not")&&!t.includes("not")||!n.includes("not")&&t.includes("not"))return!1;return!0}(i.operator,n.operator)?function(e,t){var r,n,a,o;const i=null!=(r=t.values)?r:[t.value];for(const t of i)(null==(n=e.values)?void 0:n.includes(t))||null==(a=e.values)||a.push(t);if(1===(null==(o=e.values)?void 0:o.length))return;"equals"===t.operator&&e.operator===ol.equals?e.operator=ol["one-of"]:"not-equals"===t.operator&&e.operator===ol["not-equals"]&&(e.operator=ol["not-one-of"])}(i,n):i?t.push({key:n.key,operator:ol[n.operator],value:n.value,values:null!=(o=n.values)?o:[n.value],origin:vl.Scopes}):e.set(n.key,{key:n.key,operator:ol[n.operator],value:n.value,values:null!=(a=n.values)?a:[n.value],origin:vl.Scopes})}var ll=Object.defineProperty,ul=Object.defineProperties,cl=Object.getOwnPropertyDescriptors,dl=Object.getOwnPropertySymbols,pl=Object.prototype.hasOwnProperty,hl=Object.prototype.propertyIsEnumerable,fl=(e,t,r)=>t in e?ll(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ml=(e,t)=>{for(var r in t||(t={}))pl.call(t,r)&&fl(e,r,t[r]);if(dl)for(var r of dl(t))hl.call(t,r)&&fl(e,r,t[r]);return e},gl=(e,t)=>ul(e,cl(t)),vl=(e=>(e.Scopes="scopes",e.Dashboards="dashboards",e))(vl||{});const bl=[{value:"=",description:"Equals"},{value:"!=",description:"Not equal"},{value:"=|",description:"One of. Use to filter on multiple values.",isMulti:!0},{value:"!=|",description:"Not one of. Use to exclude multiple values.",isMulti:!0},{value:"=~",description:"Matches regex",isRegex:!0},{value:"!~",description:"Does not match regex",isRegex:!0},{value:"<",description:"Less than"},{value:">",description:"Greater than"}];class yl extends Z{constructor(e){var t,r,n,a,o;super(ml({type:"adhoc",name:null!=(t=e.name)?t:"Filters",filters:[],datasource:null,applyMode:"auto",filterExpression:null!=(o=e.filterExpression)?o:wl(e.expressionBuilder,[...null!=(n=null==(r=e.baseFilters)?void 0:r.filter((e=>e.origin)))?n:[],...null!=(a=e.filters)?a:[]])},e)),this._scopedVars={__sceneObject:Zr(this)},this._dataSourceSrv=(0,i.getDataSourceSrv)(),this._urlSync=new Rn(this),this._activationHandler=()=>{var e,t;this._scopesBridge=qu.getScopesBridge(this);const r=null==(e=this._scopesBridge)?void 0:e.getValue();r&&this._updateScopesFilters(r);const n=null==(t=this._scopesBridge)?void 0:t.subscribeToValue(((e,t)=>{var r;this._updateScopesFilters(e,null==(r=this._scopesBridge)?void 0:r.isLoading())}));return()=>{null==n||n.unsubscribe()}},this._updateScopesFilters=(e,t)=>{var r,n;if(!e.length)return void this.setState({baseFilters:null==(r=this.state.baseFilters)?void 0:r.filter((e=>"scopes"!==e.origin))});const a=function(e){const t=new Map,r=[],n=e.flatMap((e=>e.spec.filters));for(const e of n)sl(t,r,e);return[...t.values(),...r]}(e);if(!a.length)return void(this._overwriteScopes=t);let o=a;const i=[],s=[];if(null==(n=this.state.baseFilters)||n.forEach((e=>{"scopes"===e.origin?i.push(e):s.push(e)})),!this._overwriteScopes){const e=i.filter((e=>{var t;return null==(t=e.originalValue)?void 0:t.length})),t=e.map((e=>e.key)),r=a.map((e=>e.key));o=[...e.filter((e=>r.includes(e.key))),...a.filter((e=>!t.includes(e.key)))],this._overwriteScopes=!1}const l=[...s,...o];this.setState({baseFilters:l})},"auto"===this.state.applyMode&&function(e){if(e.addActivationHandler((()=>(er.add(e),()=>er.delete(e)))),Jt)return;const t=(0,i.getTemplateSrv)();(null==t?void 0:t.getAdhocFilters)&&(Jt=t.getAdhocFilters,t.getAdhocFilters=function(e){var r;if(0===er.size)return Jt.call(t,e);const n=(0,i.getDataSourceSrv)().getInstanceSettings(e);if(!n)return[];for(const e of er.values())if((null==(r=e.state.datasource)?void 0:r.uid)===n.uid)return e.state.filters;return[]}.bind(t))}(this),this.addActivationHandler(this._activationHandler)}setState(e){var t,r,n;let a=!1;if((e.filters&&e.filters!==this.state.filters||e.baseFilters&&e.baseFilters!==this.state.baseFilters)&&!e.filterExpression){const o=null!=(t=e.filters)?t:this.state.filters,i=null!=(r=e.baseFilters)?r:this.state.baseFilters;e.filterExpression=wl(this.state.expressionBuilder,[...null!=(n=null==i?void 0:i.filter((e=>e.origin)))?n:[],...null!=o?o:[]]),a=e.filterExpression!==this.state.filterExpression}super.setState(e),a&&this.publishEvent(new Ve(this),!0)}updateFilters(e,t){var r,n;let a,o=!1;e&&e!==this.state.filters&&(a=wl(this.state.expressionBuilder,[...null!=(n=null==(r=this.state.baseFilters)?void 0:r.filter((e=>e.origin)))?n:[],...e]),o=a!==this.state.filterExpression),super.setState({filters:e,filterExpression:a}),(o&&!0!==(null==t?void 0:t.skipPublish)||(null==t?void 0:t.forcePublish))&&this.publishEvent(new Ve(this),!0)}restoreOriginalFilter(e){var t;const r={originalValue:void 0};(null==(t=e.originalValue)?void 0:t.length)&&(r.value=e.originalValue[0],r.values=e.originalValue,r.valueLabels=e.originalValue),this._updateFilter(e,r)}getValue(){return this.state.filterExpression}_updateFilter(e,t){var r;const{baseFilters:n,filters:a,_wip:o}=this.state;if(e.origin){const a=e.values?e.values:[e.value],o=t.values||(t.value?[t.value]:void 0),i=t.hasOwnProperty("originalValue");i||!o||e.originalValue||(0,te.isEqual)(a,o)||(t.originalValue=a),!i&&(0,te.isEqual)(o,e.originalValue)&&(t.originalValue=void 0);const s=null!=(r=null==n?void 0:n.map((r=>r===e?ml(ml({},r),t):r)))?r:[];return void this.setState({baseFilters:s})}if(e===o)return void("value"in t&&""!==t.value?this.setState({filters:[...a,ml(ml({},o),t)],_wip:void 0}):this.setState({_wip:ml(ml({},e),t)}));const i=this.state.filters.map((r=>r===e?ml(ml({},r),t):r));this.setState({filters:i})}_removeFilter(e){e!==this.state._wip?this.setState({filters:this.state.filters.filter((t=>t!==e))}):this.setState({_wip:void 0})}_removeLastFilter(){const e=this.state.filters.at(-1);e&&this._removeFilter(e)}_handleComboboxBackspace(e){var t;if(this.state.filters.length){let t=this.state.filters.length-1;e!==this.state._wip&&(t=-1),this.setState({filters:this.state.filters.reduce(((r,n,a)=>a===t?[...r,gl(ml({},n),{forceEdit:!0})]:n===e?r:[...r,n]),[])})}else if(null==(t=this.state.baseFilters)?void 0:t.length){let t=this.state.baseFilters.length-1;e!==this.state._wip&&(t=-1),this.setState({baseFilters:this.state.baseFilters.reduce(((r,n,a)=>a===t?[...r,gl(ml({},n),{forceEdit:!0})]:n===e?r:[...r,n]),[])})}}async _getKeys(e){var t,r,n,a;const o=await(null==(r=(t=this.state).getTagKeysProvider)?void 0:r.call(t,this,e));if(o&&o.replace)return Zl(o.values).map(El);if(this.state.defaultKeys)return this.state.defaultKeys.map(El);const i=await this._dataSourceSrv.get(this.state.datasource,this._scopedVars);if(!i||!i.getTagKeys)return[];const s=this.state.filters.filter((t=>t.key!==e)).concat(null!=(n=this.state.baseFilters)?n:[]),l=qu.getTimeRange(this).state.value,u=this.state.useQueriesAsFilterForOptions?Gl(this):void 0,c=await i.getTagKeys(ml({filters:s,queries:u,timeRange:l,scopes:null==(a=this._scopesBridge)?void 0:a.getValue()},Qr(this)));Jl(c)&&this.setState({error:c.error.message});let d=Zl(c);o&&(d=d.concat(Zl(o.values)));const p=this.state.tagKeyRegexFilter;return p&&(d=d.filter((e=>e.text.match(p)))),d.map(El)}async _getValuesFor(e){var t,r,n,a,o;const i=await(null==(r=(t=this.state).getTagValuesProvider)?void 0:r.call(t,this,e));if(i&&i.replace)return Zl(i.values).map(El);const s=await this._dataSourceSrv.get(this.state.datasource,this._scopedVars);if(!s||!s.getTagValues)return[];const l=null!=(a=null==(n=this.state.baseFilters)?void 0:n.filter((t=>t.origin&&t.key!==e.key)))?a:[],u=this.state.filters.filter((t=>t.key!==e.key)).concat(l),c=qu.getTimeRange(this).state.value,d=this.state.useQueriesAsFilterForOptions?Gl(this):void 0;let p=null==(o=this._scopesBridge)?void 0:o.getValue();"scopes"===e.origin&&(p=null==p?void 0:p.map((t=>gl(ml({},t),{spec:gl(ml({},t.spec),{filters:t.spec.filters.filter((t=>t.key!==e.key))})}))));const h=await s.getTagValues(ml({key:e.key,filters:u,timeRange:c,queries:d,scopes:p},Qr(this)));Jl(h)&&this.setState({error:h.error.message});let f=Zl(h);return i&&(f=f.concat(Zl(i.values))),f.map(El)}_addWip(){this.setState({_wip:{key:"",value:"",operator:"=",condition:""}})}_getOperators(){const{supportsMultiValueOperators:e,allowCustomValue:t=!0}=this.state;return bl.filter((({isMulti:r,isRegex:n})=>!(!e&&r)&&!(!t&&n))).map((({value:e,description:t})=>({label:e,value:e,description:t})))}}function wl(e,t){return(null!=e?e:zl)(null!=t?t:[])}yl.Component=function({model:e}){const{filters:t,readOnly:r,addFilterButtonText:n}=e.useState(),a=(0,s.useStyles2)(Sl);if("combobox"===e.state.layout)return o().createElement(nl,{model:e});return o().createElement("div",{className:a.wrapper},t.filter((e=>!e.hidden)).map(((t,r)=>o().createElement(o().Fragment,{key:r},o().createElement(En,{filter:t,model:e})))),!r&&o().createElement(xn,{model:e,key:"'builder",addFilterButtonText:n}))};const Sl=e=>({wrapper:(0,p.css)({display:"flex",flexWrap:"wrap",alignItems:"flex-end",columnGap:e.spacing(2),rowGap:e.spacing(1)})});function El(e){const{text:t,value:r}=e,n={label:String(t),value:String(null!=r?r:t)};return"group"in e&&(n.group=e.group),"meta"in e&&(n.meta=e.meta),n}function Ol(e){return""!==e.key&&""!==e.operator&&""!==e.value}function xl(e){const t=bl.find((t=>t.value===e));return!!t&&Boolean(t.isMulti)}class Rl{constructor(){this._resultsMap=new Map,this._prevLayers=[]}getMergedStream(e){(function(e,t){if(e.length!==t.length)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!0;return!1})(e,this._prevLayers)&&(this._resultsMap=new Map,this._prevLayers=e);const t=e.map((e=>e.getResultsStream())),r=[];for(const t of e)r.push(t.activate());return(0,x.merge)(t).pipe((0,x.mergeAll)(),(0,x.filter)((e=>this._resultsMap.get(e.origin.state.key)!==e)),(0,x.map)((e=>(this._resultsMap.set(e.origin.state.key,e),this._resultsMap.values()))),(0,x.finalize)((()=>{r.forEach((e=>e()))})))}}var _l=Object.defineProperty,Cl=Object.defineProperties,Pl=Object.getOwnPropertyDescriptors,Il=Object.getOwnPropertySymbols,Tl=Object.prototype.hasOwnProperty,Dl=Object.prototype.propertyIsEnumerable,Al=(e,t,r)=>t in e?_l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,kl=(e,t)=>{for(var r in t||(t={}))Tl.call(t,r)&&Al(e,r,t[r]);if(Il)for(var r of Il(t))Dl.call(t,r)&&Al(e,r,t[r]);return e},jl=(e,t)=>Cl(e,Pl(t));let Ll=100;function Ml(){return"SQR"+Ll++}class Nl extends Z{constructor(e){super(e),this._dataLayersMerger=new Rl,this._variableValueRecorder=new Dt,this._results=new x.ReplaySubject(1),this._scopedVars={__sceneObject:Zr(this)},this._variableDependency=new uu(this,{statePaths:["queries","datasource","minInterval"],onVariableUpdateCompleted:this.onVariableUpdatesCompleted.bind(this),onAnyVariableChanged:this.onAnyVariableChanged.bind(this)}),this.onDataReceived=e=>{const t=(0,r.preProcessPanelData)(e,this.state.data);this._resultAnnotations=e.annotations;const n=this._combineDataLayers(t);let a=this.state._hasFetchedData;a||t.state===ge.Loading||(a=!0),this.setState({data:n,_hasFetchedData:a}),this._results.next({origin:this,data:n})},this.addActivationHandler((()=>this._onActivate()))}getResultsStream(){return this._results}_onActivate(){if(this.isQueryModeAuto()){const e=qu.getTimeRange(this),t=qu.getScopesBridge(this),r=this.getClosestExtraQueryProviders();for(const e of r)this._subs.add(e.subscribeToState(((t,r)=>{e.shouldRerun(r,t,this.state.queries)&&this.runQueries()})));this.subscribeToScopesChanges(t),this.subscribeToTimeRangeChanges(e),this.shouldRunQueriesOnActivate()&&this.runQueries()}return this._dataLayersSub||this._handleDataLayers(),()=>this._onDeactivate()}_handleDataLayers(){const e=qu.getDataLayers(this);0!==e.length&&(this._dataLayersSub=this._dataLayersMerger.getMergedStream(e).subscribe(this._onLayersReceived.bind(this)))}_onLayersReceived(e){var t,n,a,o,i;const s=qu.getTimeRange(this),{dataLayerFilter:l}=this.state;let u,c=[],d=[];for(const a of e)for(let e of a.data.series)(null==(t=e.meta)?void 0:t.dataTopic)===r.DataTopic.Annotations&&(c=c.concat(e)),(null==(n=e.meta)?void 0:n.dataTopic)===r.DataTopic.AlertStates&&(d=d.concat(e));if((null==l?void 0:l.panelId)&&(c.length>0&&(c=function(e,t){var r;if(!Array.isArray(e)||0===e.length)return e;const n=Array.from({length:e.length},(()=>new Set));let a=0;for(const o of e){for(let e=0;e<o.length;e++){if(n[a].has(e))continue;let i=!0;const s=o.fields.find((e=>"panelId"===e.name)),l=o.fields.find((e=>"source"===e.name));if(l){s&&"dashboard"===l.values[e].type&&(i=[t.panelId,Kt].includes(s.values[e]));const n=l.values[e].filter;if(n){const e=[...null!=(r=n.ids)?r:[],Kt].includes(t.panelId);n.exclude?e&&(i=!1):e||(i=!1)}}i&&n[a].add(e)}a++}const o=[];a=0;for(const t of e){const e=n[a].size,r=[];for(const e of t.fields){const o=[];for(let r=0;r<t.length;r++)n[a].has(r)&&o.push(e.values[r]);r.push(Yt(Xt({},e),{values:o}))}o.push(Yt(Xt({},t),{fields:r,length:e})),a++}return o}(c,l)),d.length>0))for(const e of d){const t=new r.DataFrameView(e);for(const e of t)if(e.panelId===l.panelId){u=e;break}}if(Vl(c)&&Vl(this._layerAnnotations)&&(0,te.isEqual)(u,null==(a=this.state.data)?void 0:a.alertState))return;this._layerAnnotations=c;const p=this.state.data?this.state.data:jl(kl({},Ee),{timeRange:s.state.value});this.setState({data:jl(kl({},p),{annotations:[...null!=(o=this._resultAnnotations)?o:[],...c],alertState:null!=u?u:null==(i=this.state.data)?void 0:i.alertState})})}onVariableUpdatesCompleted(){this.isQueryModeAuto()&&this.runQueries()}onAnyVariableChanged(e){this._adhocFiltersVar!==e&&this._groupByVar!==e&&this.isQueryModeAuto()&&(e instanceof yl&&this._isRelevantAutoVariable(e)&&this.runQueries(),e instanceof ln&&this._isRelevantAutoVariable(e)&&this.runQueries())}_isRelevantAutoVariable(e){var t,r;const n=null!=(t=this.state.datasource)?t:$l(this.state.queries);return"auto"===e.state.applyMode&&(null==n?void 0:n.uid)===(null==(r=e.state.datasource)?void 0:r.uid)}shouldRunQueriesOnActivate(){return this._variableValueRecorder.hasDependenciesChanged(this)?(pe(),!0):!this.state.data||!!this._isDataTimeRangeStale(this.state.data)}_isDataTimeRangeStale(e){const t=qu.getTimeRange(this).state.value,r=e.timeRange;return(t.from.unix()!==r.from.unix()||t.to.unix()!==r.to.unix())&&(pe(),!0)}_onDeactivate(){var e;this._querySub&&(this._querySub.unsubscribe(),this._querySub=void 0),this._dataLayersSub&&(this._dataLayersSub.unsubscribe(),this._dataLayersSub=void 0),null==(e=this._timeSub)||e.unsubscribe(),this._timeSub=void 0,this._timeSubRange=void 0,this._adhocFiltersVar=void 0,this._groupByVar=void 0,this._variableValueRecorder.recordCurrentDependencyValuesForSceneObject(this)}setContainerWidth(e){!this._containerWidth&&e>0?(this._containerWidth=e,this.state.maxDataPointsFromWidth&&!this.state.maxDataPoints&&setTimeout((()=>{this.isActive&&!this.state._hasFetchedData&&this.runQueries()}),0)):e>0&&(this._containerWidth=e)}isDataReadyToDisplay(){return Boolean(this.state._hasFetchedData)}subscribeToScopesChanges(e){e&&this._scopesSubBridge!==e&&(this._scopesSub&&this._scopesSub.unsubscribe(),this._scopesSubBridge=e,this._scopesSub=e.subscribeToValue((()=>{this.runWithTimeRangeAndScopes(qu.getTimeRange(this),e)})))}subscribeToTimeRangeChanges(e){this._timeSubRange!==e&&(this._timeSub&&this._timeSub.unsubscribe(),this._timeSubRange=e,this._timeSub=e.subscribeToState((()=>{this.runWithTimeRangeAndScopes(e,qu.getScopesBridge(this))})))}runQueries(){const e=qu.getTimeRange(this),t=qu.getScopesBridge(this);this.isQueryModeAuto()&&(this.subscribeToTimeRangeChanges(e),this.subscribeToScopesChanges(t)),this.runWithTimeRangeAndScopes(e,t)}getMaxDataPoints(){var e;return this.state.maxDataPoints?this.state.maxDataPoints:this.state.maxDataPointsFromWidth&&null!=(e=this._containerWidth)?e:500}cancelQuery(){var e;null==(e=this._querySub)||e.unsubscribe(),this._dataLayersSub&&(this._dataLayersSub.unsubscribe(),this._dataLayersSub=void 0),this.setState({data:jl(kl({},this.state.data),{state:ge.Done})})}async runWithTimeRangeAndScopes(e,t){var r,n,a,o;if(!this.state.maxDataPoints&&this.state.maxDataPointsFromWidth&&!this._containerWidth)return;if(this._dataLayersSub||this._handleDataLayers(),null==(r=this._querySub)||r.unsubscribe(),this._variableDependency.hasDependencyInLoadingState())return pe(),void this.setState({data:jl(kl({},null!=(n=this.state.data)?n:Ee),{state:ge.Loading})});if((null==t?void 0:t.isLoading())&&(null==t?void 0:t.getValue().length))return pe(),void this.setState({data:jl(kl({},null!=(a=this.state.data)?a:Ee),{state:ge.Loading})});const{queries:s}=this.state;if(null==s?void 0:s.length)try{const r=null!=(o=this.state.datasource)?o:$l(s),n=await Tt(r,this._scopedVars);this.findAndSubscribeToAdHocFilters(n.uid);const a=(0,i.getRunRequest)(),{primary:l,secondaries:u,processors:c}=this.prepareRequests(e,n,t);pe(0,0,this.state.key);let d=a(n,l);if(u.length>0){const e=u.map((e=>a(n,e))),t=Bt(c);d=(0,x.forkJoin)([d,...e]).pipe(t)}d=d.pipe(Pt({type:"data",request:l,origin:this,cancel:()=>this.cancelQuery()})),this._querySub=d.subscribe(this.onDataReceived)}catch(e){console.error("PanelQueryRunner Error",e),this.onDataReceived(jl(kl(kl({},Ee),this.state.data),{state:ge.Error,errors:[(0,i.toDataQueryError)(e)]}))}else this._setNoDataState()}clone(e){var t;const r=super.clone(e);return this._resultAnnotations&&(r._resultAnnotations=this._resultAnnotations.map((e=>kl({},e)))),this._layerAnnotations&&(r._layerAnnotations=this._layerAnnotations.map((e=>kl({},e)))),r._variableValueRecorder=this._variableValueRecorder.cloneAndRecordCurrentValuesForSceneObject(this),r._containerWidth=this._containerWidth,r._results.next({origin:this,data:null!=(t=this.state.data)?t:Ee}),r}prepareRequests(e,t,n){var a,o;const{minInterval:s,queries:l}=this.state;let u=kl({app:"scenes",requestId:Ml(),timezone:e.getTimeZone(),range:e.state.value,interval:"1s",intervalMs:1e3,targets:(0,te.cloneDeep)(l),maxDataPoints:this.getMaxDataPoints(),scopedVars:this._scopedVars,startTime:Date.now(),liveStreaming:this.state.liveStreaming,rangeRaw:{from:e.state.from,to:e.state.to},cacheTimeout:this.state.cacheTimeout,queryCachingTTL:this.state.queryCachingTTL,scopes:null==n?void 0:n.getValue()},Zt(this));if(this._adhocFiltersVar){if(u.filters=[],null==(a=this._adhocFiltersVar.state.baseFilters)?void 0:a.length){const e=this._adhocFiltersVar.state.baseFilters.filter((e=>e.origin));u.filters=u.filters.concat(e)}u.filters=u.filters.concat(this._adhocFiltersVar.state.filters.filter(Ol))}this._groupByVar&&(u.groupByKeys=this._groupByVar.state.value),u.targets=u.targets.map((e=>{var r;return e.datasource&&(e.datasource.uid===t.uid||(null==(r=t.meta)?void 0:r.mixed)||!i.isExpressionReference||(0,i.isExpressionReference)(e.datasource))||(e.datasource=t.getRef()),e}));const c=s?Uu(this,s):t.interval,d=r.rangeUtil.calculateInterval(e.state.value,u.maxDataPoints,c);u.scopedVars=Object.assign({},u.scopedVars,{__interval:{text:d.interval,value:d.interval},__interval_ms:{text:d.intervalMs.toString(),value:d.intervalMs}}),u.interval=d.interval,u.intervalMs=d.intervalMs;const p=e.state.value;let h=[],f=new Map;for(const e of null!=(o=this.getClosestExtraQueryProviders())?o:[])for(const{req:t,processor:r}of e.getExtraQueries(u)){const e=Ml();h.push(jl(kl({},t),{requestId:e})),f.set(e,null!=r?r:Ft)}return u.range=p,{primary:u,secondaries:h,processors:f}}_combineDataLayers(e){return this._layerAnnotations&&this._layerAnnotations.length>0&&(e.annotations=(e.annotations||[]).concat(this._layerAnnotations)),this.state.data&&this.state.data.alertState&&(e.alertState=this.state.data.alertState),e}_setNoDataState(){this.state.data!==Ee&&this.setState({data:Ee})}getClosestExtraQueryProviders(){const e=new Map;return this.parent?(ue(this.parent,(t=>(At(t)&&!e.has(t.constructor)&&e.set(t.constructor,t),t.forEachChild((t=>{At(t)&&!e.has(t.constructor)&&e.set(t.constructor,t)})),null))),Array.from(e.values())):[]}findAndSubscribeToAdHocFilters(e){const t=function(e){var t;for(const r of er.values())if(Uu(r,null==(t=r.state.datasource)?void 0:t.uid)===e)return r}(e);this._adhocFiltersVar!==t&&(this._adhocFiltersVar=t,this._updateExplicitVariableDependencies());const r=function(e){var t;for(const r of tr.values())if(Uu(r,null==(t=r.state.datasource)?void 0:t.uid)===e)return r}(e);this._groupByVar!==r&&(this._groupByVar=r,this._updateExplicitVariableDependencies())}_updateExplicitVariableDependencies(){const e=[];this._adhocFiltersVar&&e.push(this._adhocFiltersVar.state.name),this._groupByVar&&e.push(this._groupByVar.state.name),this._variableDependency.setVariableNames(e)}isQueryModeAuto(){var e;return"auto"===(null!=(e=this.state.runQueriesMode)?e:"auto")}}function $l(e){var t,r;return null!=(r=null==(t=e.find((e=>null!==e.datasource)))?void 0:t.datasource)?r:void 0}function Vl(e){if(!e)return!0;for(let t=0;t<e.length;t++)if(e[t].length>0)return!1;return!0}function Fl(e,t){return e===t||(0,te.isEqual)(e,t)}function Bl(e){try{return JSON.stringify(e,(()=>{const e=new WeakSet;return(t,r)=>{if("object"==typeof r&&null!==r){if(e.has(r))return;e.add(r)}return r}})())}catch(e){console.error(e)}return""}function zl(e){return e.map((e=>function(e){var t,r;let n="",a=e.operator;"=|"===a?(a="=~",n=null==(t=e.values)?void 0:t.map(Wl).join("|")):"!=|"===a?(a="!~",n=null==(r=e.values)?void 0:r.map(Wl).join("|")):n="=~"===a||"!~"===a?Wl(e.value):Ul(e.value);return`${e.key}${a}"${n}"`}(e))).join(",")}function Ul(e){return e.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/"/g,'\\"')}function Wl(e){return Ul(e.replace(Hl,"\\$&"))}const Hl=/[*+?()|\\.\[\]{}^$]/g;function Gl(e){var t;const r=qu.findAllObjects(e.getRoot(),(e=>e instanceof Nl)),n=qu.interpolate(e,null==(t=e.state.datasource)?void 0:t.uid),a=function(e){const t={};for(const r of e)r.state.key&&(r.state.key in t||(t[r.state.key]=[]),t[r.state.key].push(r));return Object.values(t).flatMap((e=>{const t=e.filter((e=>e.isActive));return 0===t.length&&1===e.length?e:t}))}(r).filter((t=>{var r;return qu.interpolate(e,null==(r=t.state.datasource)?void 0:r.uid)===n}));if(0===a.length)return[];const o=[];return a.forEach((t=>{o.push(...t.state.queries.filter((t=>{if(!t.datasource||!t.datasource.uid)return!0;return qu.interpolate(e,t.datasource.uid)===n})))})),o}function ql(e){return null==e?"":/\|/g[Symbol.replace](e,"__gfp__")}function Ql(e){return null==e?"":/,/g[Symbol.replace](e,"__gfc__")}function Xl(e){return function(e){return null==e?"":/#/g[Symbol.replace](e,"__gfh__")}(ql(e))}function Yl(e){return null==e?"":(e=/__gfp__/g[Symbol.replace](e,"|"),e=/__gfc__/g[Symbol.replace](e,","),e=/__gfh__/g[Symbol.replace](e,"#"))}function Kl(e,t){return t&&e!==t?[e,t].map(Ql).join(","):Ql(e)}function Zl(e){return Array.isArray(e)?e:e.data}function Jl(e){return!Array.isArray(e)&&Boolean(e.error)}function eu(e){const t=[],r=new Map;for(const n of e){const e=n.group;if(e){let a=r.get(e);a||(a=[],r.set(e,a),t.push({label:e,options:a})),a.push(n)}else t.push(n)}return t}var tu=Object.defineProperty,ru=Object.defineProperties,nu=Object.getOwnPropertyDescriptors,au=Object.getOwnPropertySymbols,ou=Object.prototype.hasOwnProperty,iu=Object.prototype.propertyIsEnumerable,su=(e,t,r)=>t in e?tu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class lu extends Z{constructor(e){var t;super((t=((e,t)=>{for(var r in t||(t={}))ou.call(t,r)&&su(e,r,t[r]);if(au)for(var r of au(t))iu.call(t,r)&&su(e,r,t[r]);return e})({type:"constant",value:"",name:""},e),ru(t,nu({skipUrlSync:!0}))))}getValue(){return this.state.value}}class uu{constructor(e,t){this._sceneObject=e,this._options=t,this._dependencies=new Set,this._isWaitingForVariables=!1,this.scanCount=0,this._statePaths=t.statePaths,this._options.handleTimeMacros&&this.handleTimeMacros()}hasDependencyOn(e){return this.getNames().has(e)}variableUpdateCompleted(e,t){const n=this.getNames();let a=!1;(n.has(e.state.name)||n.has(r.DataLinkBuiltInVars.includeVars))&&t&&(a=!0),pe(0,0,e.state.name,this._isWaitingForVariables),this._options.onAnyVariableChanged&&this._options.onAnyVariableChanged(e),this._options.onVariableUpdateCompleted&&(this._isWaitingForVariables||a)&&this._options.onVariableUpdateCompleted(),a&&(this._options.onReferencedVariableValueChanged&&this._options.onReferencedVariableValueChanged(e),this._options.onReferencedVariableValueChanged||this._options.onVariableUpdateCompleted||this._sceneObject.forceRender())}hasDependencyInLoadingState(){return qu.hasVariableDependencyInLoadingState(this._sceneObject)?(this._isWaitingForVariables=!0,!0):(this._isWaitingForVariables=!1,!1)}getNames(){const e=this._state,t=this._state=this._sceneObject.state;if(!e)return this.scanStateForDependencies(this._state),this._dependencies;if(t!==e)if(this._statePaths){for(const r of this._statePaths)if("*"===r||t[r]!==e[r]){this.scanStateForDependencies(t);break}}else this.scanStateForDependencies(t);return this._dependencies}setVariableNames(e){this._options.variableNames=e,this.scanStateForDependencies(this._state)}setPaths(e){this._statePaths=e}scanStateForDependencies(e){if(this._dependencies.clear(),this.scanCount+=1,this._options.variableNames)for(const e of this._options.variableNames)this._dependencies.add(e);if(this._statePaths)for(const t of this._statePaths){if("*"===t){this.extractVariablesFrom(e);break}{const r=e[t];r&&this.extractVariablesFrom(r)}}}extractVariablesFrom(e){rt.lastIndex=0;const t=("string"!=typeof e?Bl(e):e).matchAll(rt);if(t)for(const e of t){const[,t,r,,n]=e,a=t||r||n;this._dependencies.add(a)}}handleTimeMacros(){this._sceneObject.addActivationHandler((()=>{const e=qu.getTimeRange(this._sceneObject).subscribeToState(((e,t)=>{const r=this.getNames(),n=r.has("__from"),a=r.has("__to"),o=r.has("__timezone");if(e.value!==t.value)if(n){const t=new lu({name:"__from",value:e.from});this.variableUpdateCompleted(t,!0)}else if(a){const t=new lu({name:"__to",value:e.to});this.variableUpdateCompleted(t,!0)}if(e.timeZone!==t.timeZone&&o){const t=new lu({name:"__timezone",value:e.timeZone});this.variableUpdateCompleted(t,!0)}}));return()=>e.unsubscribe()}))}}const cu=e=>Boolean(e.metricFindQuery)&&!Boolean(e.variables),du=e=>{if(!e.variables)return!1;if(e.variables.getType()!==r.VariableSupportType.Standard)return!1;const t=e.variables;return"toDataQuery"in t&&Boolean(t.toDataQuery)},pu=e=>{if(!e.variables)return!1;if(e.variables.getType()!==r.VariableSupportType.Custom)return!1;const t=e.variables;return"query"in t&&"editor"in t&&Boolean(t.query)&&Boolean(t.editor)},hu=e=>!!e.variables&&e.variables.getType()===r.VariableSupportType.Datasource;var fu=Object.defineProperty,mu=Object.defineProperties,gu=Object.getOwnPropertyDescriptors,vu=Object.getOwnPropertySymbols,bu=Object.prototype.hasOwnProperty,yu=Object.prototype.propertyIsEnumerable,wu=(e,t,r)=>t in e?fu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Su=(e,t)=>{for(var r in t||(t={}))bu.call(t,r)&&wu(e,r,t[r]);if(vu)for(var r of vu(t))yu.call(t,r)&&wu(e,r,t[r]);return e},Eu=(e,t)=>mu(e,gu(t));class Ou{constructor(e,t=(0,i.getRunRequest)()){this.datasource=e,this._runRequest=t}getTarget(e){if(du(this.datasource))return this.datasource.variables.toDataQuery(function(e){var t;const r=null!=(t=e.state.query)?t:"";if("string"==typeof r)return{query:r,refId:`variable-${e.state.name}`};if(null==r.refId)return Eu(Su({},r),{refId:`variable-${e.state.name}`});return e.state.query}(e));throw new Error("Couldn't create a target with supplied arguments.")}runRequest(e,t){return du(this.datasource)?this.datasource.variables.query?this._runRequest(this.datasource,t,this.datasource.variables.query.bind(this.datasource.variables)):this._runRequest(this.datasource,t):Cu()}}class xu{constructor(e){this.datasource=e}getTarget(e){if(cu(this.datasource))return e.state.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({variable:e,searchFilter:t},n){return cu(this.datasource)?(0,x.from)(this.datasource.metricFindQuery(e.state.query,Eu(Su({},n),{variable:{name:e.state.name,type:e.state.type},searchFilter:t}))).pipe((0,x.mergeMap)((e=>{if(!e||!e.length)return Cu();const t=e;return(0,x.of)({series:t,state:r.LoadingState.Done,timeRange:n.range})}))):Cu()}}class Ru{constructor(e,t=(0,i.getRunRequest)()){this.datasource=e,this._runRequest=t}getTarget(e){if(pu(this.datasource))return e.state.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest(e,t){return pu(this.datasource)?this.datasource.variables.query?this._runRequest(this.datasource,t,this.datasource.variables.query.bind(this.datasource.variables)):this._runRequest(this.datasource,t):Cu()}}class _u{constructor(e,t=(0,i.getRunRequest)()){this.datasource=e,this._runRequest=t}getTarget(e){var t;if(hu(this.datasource))return"string"==typeof e.state.query?e.state.query:Eu(Su({},e.state.query),{refId:null!=(t=e.state.query.refId)?t:"variable-query"});throw new Error("Couldn't create a target with supplied arguments.")}runRequest(e,t){return hu(this.datasource)?this._runRequest(this.datasource,t):Cu()}}function Cu(){return(0,x.of)({state:r.LoadingState.Done,series:[],timeRange:(0,r.getDefaultTimeRange)()})}let Pu=function(e){if(du(e))return new Ou(e,(0,i.getRunRequest)());if(cu(e))return new xu(e);if(pu(e))return new Ru(e);if(hu(e))return new _u(e);throw new Error(`Couldn't create a query runner for datasource ${e.type}`)};const Iu=(e,t)=>{const r=[];let n=null;t.lastIndex=0;do{n=t.exec(e),n&&r.push(n)}while(t.global&&n&&""!==n[0]&&void 0!==n[0]);return r},Tu=(e,t)=>{if(t===r.VariableSort.disabled)return e;switch(t){case r.VariableSort.alphabeticalAsc:e=(0,te.sortBy)(e,"label");break;case r.VariableSort.alphabeticalDesc:e=(0,te.sortBy)(e,"label").reverse();break;case r.VariableSort.numericalAsc:e=(0,te.sortBy)(e,Du);break;case r.VariableSort.numericalDesc:e=(e=(0,te.sortBy)(e,Du)).reverse();break;case r.VariableSort.alphabeticalCaseInsensitiveAsc:e=(0,te.sortBy)(e,(e=>(0,te.toLower)(e.label)));break;case r.VariableSort.alphabeticalCaseInsensitiveDesc:e=(e=(0,te.sortBy)(e,(e=>(0,te.toLower)(e.label)))).reverse();break;case r.VariableSort.naturalAsc||7:e=ku(e);break;case r.VariableSort.naturalDesc||8:e=(e=ku(e)).reverse()}return e};function Du(e){if(!e.label)return-1;const t=e.label.match(/.*?(\d+).*/);return!t||t.length<2?-1:parseInt(t[1],10)}const Au=new Intl.Collator(void 0,{sensitivity:"accent",numeric:!0});function ku(e){return e.slice().sort(((e,t)=>Au.compare(e.label,t.label)))}function ju(){return e=>e.pipe((0,x.map)((e=>{const t=e.series;if(!t||!t.length)return[];if(function(e){if(!e)return!1;if(!e.length)return!0;const t=e[0];if((0,r.isDataFrame)(t))return!1;for(const e in t){if(!t.hasOwnProperty(e))continue;if(null!==t[e]&&"string"!=typeof t[e]&&"number"!=typeof t[e])continue;const r=e.toLowerCase();if("text"===r||"value"===r)return!0}return!1}(t))return t;if(0===t[0].fields.length)return[];const n=(0,r.getProcessedDataFrames)(t),a=[];let o=-1,i=-1,s=-1,l=-1;for(const e of n)for(let n=0;n<e.fields.length;n++){const a=e.fields[n],u=(0,r.getFieldDisplayName)(a,e,t).toLowerCase();a.type===r.FieldType.string&&-1===s&&(s=n),"text"===u&&a.type===r.FieldType.string&&-1===i&&(i=n),"value"===u&&a.type===r.FieldType.string&&-1===o&&(o=n),"expandable"!==u||a.type!==r.FieldType.boolean&&a.type!==r.FieldType.number||-1!==l||(l=n)}if(-1===s)throw new Error("Couldn't find any field of type string in the results.");for(const e of t)for(let t=0;t<e.length;t++){const r=-1!==l?e.fields[l].values.get(t):void 0,n=e.fields[s].values.get(t),u=-1!==i?e.fields[i].values.get(t):"",c=-1!==o?e.fields[o].values.get(t):"";-1!==o||-1!==i?-1!==o||-1===i?-1===o||-1!==i?a.push({text:u,value:c,expandable:r}):a.push({text:c,value:c,expandable:r}):a.push({text:u,value:u,expandable:r}):a.push({text:n,value:n,expandable:r})}return a})))}var Lu=Object.defineProperty,Mu=Object.getOwnPropertySymbols,Nu=Object.prototype.hasOwnProperty,$u=Object.prototype.propertyIsEnumerable,Vu=(e,t,r)=>t in e?Lu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class Fu extends ut{constructor(e){super(((e,t)=>{for(var r in t||(t={}))Nu.call(t,r)&&Vu(e,r,t[r]);if(Mu)for(var r of Mu(t))$u.call(t,r)&&Vu(e,r,t[r]);return e})({type:"query",name:"",value:"",text:"",options:[],datasource:null,regex:"",query:"",refresh:r.VariableRefresh.onDashboardLoad,sort:r.VariableSort.disabled},e)),this._variableDependency=new uu(this,{statePaths:["regex","query","datasource"]}),this.onSearchChange=e=>{Bl(this.state.query).indexOf(nt)>-1&&this._updateOptionsBasedOnSearchFilter(e)},this._updateOptionsBasedOnSearchFilter=(0,te.debounce)((async e=>{const t=await(0,x.lastValueFrom)(this.getValueOptions({searchFilter:e}));this.setState({options:t,loading:!1})}),400)}getValueOptions(e){return this.state.query?(this.setState({loading:!0,error:null}),(0,x.from)(Tt(this.state.datasource,{__sceneObject:Zr(this)})).pipe((0,x.mergeMap)((t=>{const n=Pu(t),a=n.getTarget(this),o=this.getRequest(a,e.searchFilter);return n.runRequest({variable:this,searchFilter:e.searchFilter},o).pipe(Pt({type:"variable",request:o,origin:this}),(0,x.filter)((e=>e.state===r.LoadingState.Done||e.state===r.LoadingState.Error)),(0,x.take)(1),(0,x.mergeMap)((e=>e.state===r.LoadingState.Error?(0,x.throwError)((()=>e.error)):(0,x.of)(e))),ju(),(0,x.mergeMap)((e=>{let t="";return this.state.regex&&(t=qu.interpolate(this,this.state.regex,void 0,"regex")),(0,x.of)(function(e,t,n){var a,o,i,s,l,u,c,d,p,h;let f,m=[];e&&(f=(0,r.stringToJsRegex)(e));for(let e=0;e<n.length;e++){const t=n[e];let r=null!=(o=null!=(a=t.text)?a:t.value)?o:"",g=null!=(s=null!=(i=t.value)?i:t.text)?s:"";if((0,te.isNumber)(g)&&(g=g.toString()),(0,te.isNumber)(r)&&(r=r.toString()),f){const e=Iu(g,f);if(!e.length)continue;const t=e.find((e=>e.groups&&e.groups.value)),n=e.find((e=>e.groups&&e.groups.text)),a=e.find((e=>e.length>1)),o=e.length>1&&a;if(t||n)g=null!=(c=null==(l=null==t?void 0:t.groups)?void 0:l.value)?c:null==(u=null==n?void 0:n.groups)?void 0:u.text,r=null!=(h=null==(d=null==n?void 0:n.groups)?void 0:d.text)?h:null==(p=null==t?void 0:t.groups)?void 0:p.value;else{if(o){for(let t=0;t<e.length;t++){const r=e[t];m.push({label:r[1],value:r[1]})}continue}a&&(r=a[1],g=a[1])}}m.push({label:r,value:g})}return m=(0,te.uniqBy)(m,"value"),Tu(m,t)}(t,this.state.sort,e))})),(0,x.catchError)((e=>e.cancelled?(0,x.of)([]):(0,x.throwError)((()=>e)))))})))):(0,x.of)([])}getRequest(e,t){const n={__sceneObject:Zr(this)};t&&(n.__searchFilter={value:t,text:t});const a=qu.getTimeRange(this).state.value;return{app:r.CoreApp.Dashboard,requestId:D(),timezone:"",range:a,interval:"",intervalMs:0,targets:[e],scopedVars:n,startTime:Date.now()}}}Fu.Component=({model:e})=>Hr(e);class Bu extends Z{constructor(){super(...arguments),this._renderBeforeActivation=!0,this._contextSubject=new x.BehaviorSubject(void 0)}getValue(){var e,t;return null!=(t=null==(e=this.context)?void 0:e.state.value)?t:[]}subscribeToValue(e){return this.contextObservable.pipe((0,x.map)((e=>{var t;return null!=(t=null==e?void 0:e.state.value)?t:[]})),(0,x.pairwise)(),(0,x.filter)((([e,t])=>!(0,te.isEqual)(e,t)))).subscribe((([t,r])=>{e(r,t)}))}isLoading(){var e,t;return null!=(t=null==(e=this.context)?void 0:e.state.loading)&&t}subscribeToLoading(e){return this.contextObservable.pipe((0,x.filter)((e=>!!e)),(0,x.pairwise)(),(0,x.map)((([e,t])=>{var r,n;return[null!=(r=null==e?void 0:e.state.loading)&&r,null!=(n=null==t?void 0:t.state.loading)&&n]})),(0,x.filter)((([e,t])=>e!==t))).subscribe((([t,r])=>{e(r)}))}setEnabled(e){var t;null==(t=this.context)||t.setEnabled(e)}setReadOnly(e){var t;null==(t=this.context)||t.setReadOnly(e)}updateContext(e){var t;this.context===e&&(null==(t=this.context)?void 0:t.state)===(null==e?void 0:e.state)||this._contextSubject.next(e)}get context(){return this._contextSubject.getValue()}get contextObservable(){return this._contextSubject.asObservable()}}function zu(e){var t;return null!=(t=ue(e,(e=>e.state.$data)))?t:Le}function Uu(e,t,r,n,a){return""===t||null==t?"":xt(e,t,r,n,a)}function Wu(e,t,r,n){if(t(e))return e;let a=null;return e.forEachChild((e=>{if(e===r)return;let n=Wu(e,t);n&&(a=n)})),a||(n&&e.parent?Wu(e.parent,t,e,!0):null)}function Hu(e,t){return Wu(e,t,void 0,!0)}function Gu(e,t){const r=[];return e.forEachChild((e=>{t(e)&&r.push(e),r.push(...Gu(e,t))})),r}Bu.Component=function({model:e}){const t=(0,i.useScopes)();return(0,n.useEffect)((()=>{e.updateContext(t)}),[t,e]),null};const qu={getVariables:function(e){var t;return null!=(t=ue(e,(e=>e.state.$variables)))?t:Ne},getData:zu,getTimeRange:$e,getLayout:function(e){const t=ue(e,(e=>function(e){return"isDraggable"in e}(e)?e:void 0));return t||null},getDataLayers:function(e,t=!1){let r=e,n=[];for(;r;){const e=r.state.$data;if(e){if(Ct(e)?n=n.concat(e):e.state.$data&&Ct(e.state.$data)&&(n=n.concat(e.state.$data)),t&&n.length>0)break;r=r.parent}else r=r.parent}return n},interpolate:Uu,lookupVariable:de,hasVariableDependencyInLoadingState:function(e){if(!e.variableDependency)return!1;for(const t of e.variableDependency.getNames()){if(e instanceof Fu&&e.state.name===t){console.warn("Query variable is referencing itself");continue}const r=de(t,e);if(!r)continue;if(r.parent.isVariableLoadingOrWaitingToUpdate(r))return!0}return!1},findByKey:function(e,t){const r=Hu(e,(e=>e.state.key===t));if(!r)throw new Error("Unable to find scene with key "+t);return r},findByKeyAndType:function(e,t,r){const n=Hu(e,(e=>e.state.key===t));if(!n)throw new Error("Unable to find scene with key "+t);if(!(n instanceof r))throw new Error(`Found scene object with key ${t} does not match type ${r.name}`);return n},findObject:Hu,findAllObjects:Gu,getAncestor:function(e,t){let r=e;for(;r;){if(r instanceof t)return r;r=r.parent}if(!r)throw new Error("Unable to find parent of type "+t.name);return r},getQueryController:he,findDescendents:function(e,t){function r(e){return e instanceof t}return Gu(e,r).filter(r)},getScopesBridge:function(e){var t;return null!=(t=Hu(e,(e=>e instanceof Bu)))?t:void 0}};class Qu{constructor(){this.index=new Map}getUniqueKey(e,t){const r=this.index.get(e);if(!r)return this.index.set(e,[t]),e;let n=r.findIndex((e=>e===t));return-1===n&&(!function(e){for(const t of e)if(Xu(t)){const r=e.indexOf(t);e.splice(r,1)}}(r),r.push(t),n=r.length-1),n>0?`${e}-${n+1}`:e}clear(){this.index.clear()}}function Xu(e){const t=e.getRoot();return!qu.findObject(t,(t=>t===e))}function Yu(e){const t=new Qu,r={},n=e=>{if(e.urlSync){const n=e.urlSync.getUrlState();for(const[a,o]of Object.entries(n))if(null!=o){const n=t.getUniqueKey(a,e);r[n]=o}}e.forEachChild(n)};return n(e),r}function Ku(e,t,r,n){n||Zu(e,t,r),e.forEachChild((e=>{Zu(e,t,r)})),e.forEachChild((e=>Ku(e,t,r,!0)))}function Zu(e,t,r){if(e.urlSync){const n={},a=e.urlSync.getUrlState();for(const o of e.urlSync.getKeys()){const i=r.getUniqueKey(o,e),s=t.getAll(i),l=a[o];Ju(s,l)||(s.length>0?Array.isArray(l)?n[o]=s:n[o]=s[0]:n[o]=null)}Object.keys(n).length>0&&e.urlSync.updateFromUrl(n)}}function Ju(e,t){return 0===e.length&&null==t||(Array.isArray(t)||1!==(null==e?void 0:e.length)?0===(null==t?void 0:t.length)&&null===e||(0,te.isEqual)(e,t):t===e[0])}var ec=(e=>(e[e.never=0]="never",e[e.onDashboardLoad=1]="onDashboardLoad",e[e.onTimeRangeChanged=2]="onTimeRangeChanged",e))(ec||{});var tc=(e=>(e[e.Crosshair=1]="Crosshair",e[e.Off=0]="Off",e[e.Tooltip=2]="Tooltip",e))(tc||{});var rc=Object.defineProperty,nc=Object.defineProperties,ac=Object.getOwnPropertyDescriptors,oc=Object.getOwnPropertySymbols,ic=Object.prototype.hasOwnProperty,sc=Object.prototype.propertyIsEnumerable,lc=(e,t,r)=>t in e?rc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class uc extends Z{constructor(e){var t,r;super((t=((e,t)=>{for(var r in t||(t={}))ic.call(t,r)&&lc(e,r,t[r]);if(oc)for(var r of oc(t))sc.call(t,r)&&lc(e,r,t[r]);return e})({},e),r={sync:e.sync||tc.Off},nc(t,ac(r)))),this.getEventsBus=e=>{if(!this.parent)throw new Error("EnableCursorSync cannot be used as a standalone scene object");return new cc(this.parent,e)}}getEventsScope(){if(!this.parent)throw new Error("EnableCursorSync cannot be used as a standalone scene object");return this.state.key}}class cc{constructor(e,t){this._source=e,this._eventsOrigin=t}publish(e){e.origin=this,this._eventsOrigin.publishEvent(e,!0)}getStream(e){return new x.Observable((t=>{const r=this._source.subscribeToEvent(e,(e=>{t.next(e)}));return()=>r.unsubscribe()}))}subscribe(e,t){return this.getStream(e).pipe().subscribe(t)}removeAllListeners(){}newScopedBus(e,t){throw new Error("For internal use only")}}var dc=function(){};var pc="undefined"!=typeof window;const hc=pc?n.useLayoutEffect:n.useEffect;var fc={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};const mc=pc&&void 0!==window.ResizeObserver?function(){var e=(0,n.useState)(null),t=e[0],r=e[1],a=(0,n.useState)(fc),o=a[0],i=a[1],s=(0,n.useMemo)((function(){return new window.ResizeObserver((function(e){if(e[0]){var t=e[0].contentRect,r=t.x,n=t.y,a=t.width,o=t.height,s=t.top,l=t.left,u=t.bottom,c=t.right;i({x:r,y:n,width:a,height:o,top:s,left:l,bottom:u,right:c})}}))}),[]);return hc((function(){if(t)return s.observe(t),function(){s.disconnect()}}),[t]),[r,o]}:function(){return[dc,fc]};function gc({data:e,showAll:t,seriesLimit:r,onShowAllSeries:n}){const a=(0,s.useStyles2)(vc),i=null==e?void 0:e.series.length;if(void 0===i||i<r)return null;const l=t?"Restore limit":`Show all ${i}`;return o().createElement("div",{className:a.timeSeriesDisclaimer},!t&&o().createElement("span",{className:a.warningMessage},o().createElement(s.Icon,{title:`Showing only ${r} series`,name:"exclamation-triangle","aria-hidden":"true"})),o().createElement(s.Tooltip,{content:"Rendering too many series in a single panel may impact performance and make data harder to read."},o().createElement(s.Button,{variant:"secondary",size:"sm",onClick:n},l)))}const vc=e=>({timeSeriesDisclaimer:(0,p.css)({label:"time-series-disclaimer",display:"flex",alignItems:"center",gap:e.spacing(1)}),warningMessage:(0,p.css)({display:"flex",alignItems:"center",gap:e.spacing(.5),color:e.colors.warning.main,fontSize:e.typography.bodySmall.fontSize})});var bc=Object.defineProperty,yc=Object.defineProperties,wc=Object.getOwnPropertyDescriptors,Sc=Object.getOwnPropertySymbols,Ec=Object.prototype.hasOwnProperty,Oc=Object.prototype.propertyIsEnumerable,xc=(e,t,r)=>t in e?bc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Rc=(e,t)=>{for(var r in t||(t={}))Ec.call(t,r)&&xc(e,r,t[r]);if(Sc)for(var r of Sc(t))Oc.call(t,r)&&xc(e,r,t[r]);return e};function _c(e,t){if(t)return t;let r=e.error?e.error.message:void 0;return e.errors&&(r=e.errors.map((e=>e.message)).join(", ")),r}const Cc=(0,p.css)({position:"relative",width:"100%",height:"100%"}),Pc=(0,p.css)({position:"absolute",width:"100%",height:"100%"}),Ic=e=>({ok:(0,p.css)({color:e.colors.success.text}),pending:(0,p.css)({color:e.colors.warning.text}),alerting:(0,p.css)({color:e.colors.error.text})});var Tc=Object.defineProperty,Dc=Object.defineProperties,Ac=Object.getOwnPropertyDescriptors,kc=Object.getOwnPropertySymbols,jc=Object.prototype.hasOwnProperty,Lc=Object.prototype.propertyIsEnumerable,Mc=(e,t,r)=>t in e?Tc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Nc=(e,t)=>{for(var r in t||(t={}))jc.call(t,r)&&Mc(e,r,t[r]);if(kc)for(var r of kc(t))Lc.call(t,r)&&Mc(e,r,t[r]);return e},$c=(e,t)=>Dc(e,Ac(t));const Vc="hideSeriesFrom",Fc=(0,r.isSystemOverrideWithRef)(Vc);function Bc(e,t=r.ByNamesMatcherMode.exclude,n){return n=null!=n?n:{id:"custom.hideFrom",value:{viz:!0,legend:!1,tooltip:!1}},{__systemRef:Vc,matcher:{id:r.FieldMatcherID.byNames,options:{mode:t,names:e,prefix:t===r.ByNamesMatcherMode.exclude?"All except:":void 0,readOnly:!0}},properties:[$c(Nc({},n),{value:{viz:!0,legend:!1,tooltip:!1}})]}}const zc=(e,t,n=r.ByNamesMatcherMode.exclude)=>{const a=e.properties.find((e=>"custom.hideFrom"===e.id)),o=Uc(e),i=o.findIndex((e=>e===t));return i<0?o.push(t):o.splice(i,1),Bc(o,n,a)},Uc=e=>{var t;const r=null==(t=e.matcher.options)?void 0:t.names;return Array.isArray(r)?[...r]:[]},Wc=(e,t)=>Uc(e).length===Hc(t).length,Hc=(e,t)=>{const n=new Set;for(const a of e)for(const o of a.fields){if(o.type!==r.FieldType.number)continue;const i=(0,r.getFieldDisplayName)(o,a,e);i!==t&&n.add(i)}return Array.from(n)},Gc=(e,t)=>{var n;let a=[];for(const o of e){const e=o.properties.find((e=>"custom.hideFrom"===e.id));if(void 0!==e&&!0===(null==(n=e.value)?void 0:n.legend)){const e=r.fieldMatchers.get(o.matcher.id).get(o.matcher.options);for(const n of t)for(const o of n.fields){if(o.type!==r.FieldType.number)continue;const i=(0,r.getFieldDisplayName)(o,n,t);e(o,n,t)&&a.push(i)}}}return a};var qc=Object.defineProperty,Qc=Object.defineProperties,Xc=Object.getOwnPropertyDescriptors,Yc=Object.getOwnPropertySymbols,Kc=Object.prototype.hasOwnProperty,Zc=Object.prototype.propertyIsEnumerable,Jc=(e,t,r)=>t in e?qc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ed=(e,t)=>{for(var r in t||(t={}))Kc.call(t,r)&&Jc(e,r,t[r]);if(Yc)for(var r of Yc(t))Zc.call(t,r)&&Jc(e,r,t[r]);return e},td=(e,t)=>Qc(e,Xc(t));const rd=(e,t)=>({matcher:{id:r.FieldMatcherID.byName,options:e},properties:[nd(t)]}),nd=e=>({id:"color",value:{mode:r.FieldColorModeId.Fixed,fixedColor:e}});var ad=Object.defineProperty,od=Object.defineProperties,id=Object.getOwnPropertyDescriptors,sd=Object.getOwnPropertySymbols,ld=Object.prototype.hasOwnProperty,ud=Object.prototype.propertyIsEnumerable,cd=(e,t,r)=>t in e?ad(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,dd=(e,t)=>{for(var r in t||(t={}))ld.call(t,r)&&cd(e,r,t[r]);if(sd)for(var r of sd(t))ud.call(t,r)&&cd(e,r,t[r]);return e},pd=(e,t)=>od(e,id(t));class hd extends Z{constructor(e){var t;super(dd({options:{},fieldConfig:{defaults:{},overrides:[]},title:"Title",pluginId:"timeseries",_renderCounter:0},e)),this._variableDependency=new uu(this,{statePaths:["title","options","fieldConfig"]}),this._structureRev=0,this.onTimeRangeChange=e=>{qu.getTimeRange(this).onTimeRangeChange({raw:{from:(0,r.toUtc)(e.from),to:(0,r.toUtc)(e.to)},from:(0,r.toUtc)(e.from),to:(0,r.toUtc)(e.to)})},this.getTimeRange=e=>{const t=qu.findObject(this,(e=>e instanceof md)),r=qu.getTimeRange(this);if(t instanceof md&&t.isEnabled)return _e(r.state.from,r.state.to,r.getTimeZone(),r.state.fiscalYearStartMonth,r.state.UNSAFE_nowDelay,r.state.weekStart);const n=this.getPlugin();return n&&!n.meta.skipDataQuery&&e&&e.timeRange?e.timeRange:r.state.value},this.onTitleChange=e=>{this.setState({title:e})},this.onDescriptionChange=e=>{this.setState({description:e})},this.onDisplayModeChange=e=>{this.setState({displayMode:e})},this.onToggleCollapse=e=>{this.setState({collapsed:e})},this.onOptionsChange=(e,t=!1,n=!1)=>{var a;const{fieldConfig:o,options:i}=this.state,s=t?e:(0,te.mergeWith)((0,te.cloneDeep)(i),e,((e,t,r,n)=>{if((0,te.isArray)(t))return t;e===t||void 0!==t||(n[r]=t)})),l=(0,r.getPanelOptionsWithDefaults)({plugin:this._plugin,currentOptions:s,currentFieldConfig:o,isAfterPluginChange:n});this.setState({options:l.options,_renderCounter:(null!=(a=this.state._renderCounter)?a:0)+1})},this.onFieldConfigChange=(e,t)=>{const{fieldConfig:n,options:a}=this.state,o=t?e:(0,te.merge)((0,te.cloneDeep)(n),e),i=(0,r.getPanelOptionsWithDefaults)({plugin:this._plugin,currentOptions:a,currentFieldConfig:o,isAfterPluginChange:!1});this._dataWithFieldConfig=void 0,this.setState({fieldConfig:i.fieldConfig})},this.interpolate=(e,t,r)=>qu.interpolate(this,e,t,r),this.getDescription=()=>{this.publishEvent(new z({origin:this,interaction:"panel-description-shown"}),!0);const{description:e}=this.state;if(e){const t=this.interpolate(e);return(0,r.renderMarkdown)(t)}return""},this.onCancelQuery=()=>{var e;this.publishEvent(new z({origin:this,interaction:"panel-cancel-query-clicked"}),!0);const t=qu.getData(this);null==(e=t.cancelQuery)||e.call(t)},this.onStatusMessageClick=()=>{this.publishEvent(new z({origin:this,interaction:"panel-status-message-clicked"}),!0)},this._onSeriesColorChange=(e,t)=>{this.onFieldConfigChange(((e,t,n)=>{const{overrides:a}=n,o=n.overrides.findIndex((t=>t.matcher.id===r.FieldMatcherID.byName&&t.matcher.options===e));if(o<0)return td(ed({},n),{overrides:[...n.overrides,rd(e,t)]});const i=Array.from(a),s=i[o],l=s.properties.findIndex((e=>"color"===e.id));if(l<0)return i[o]=td(ed({},s),{properties:[...s.properties,nd(t)]}),td(ed({},n),{overrides:i});const u=Array.from(s.properties);return u[l]=nd(t),i[o]=td(ed({},s),{properties:u}),td(ed({},n),{overrides:i})})(e,t,this.state.fieldConfig))},this._onSeriesVisibilityChange=(e,t)=>{this._dataWithFieldConfig&&this.onFieldConfigChange(function(e,t,r,n){const{overrides:a}=r,o=e,i=a.findIndex(Fc);if(i<0){if(t===s.SeriesVisibilityChangeMode.ToggleSelection){const e=Bc([o,...Gc(a,n)]);return $c(Nc({},r),{overrides:[...r.overrides,e]})}const e=Bc(Hc(n,o));return $c(Nc({},r),{overrides:[...r.overrides,e]})}const l=Array.from(a),[u]=l.splice(i,1);if(t===s.SeriesVisibilityChangeMode.ToggleSelection){let e=Uc(u);const t=Gc(l,n);if(t.length>0&&(e=e.filter((e=>t.indexOf(e)<0))),e[0]===o&&1===e.length)return $c(Nc({},r),{overrides:l});const a=Bc([o,...t]);return $c(Nc({},r),{overrides:[...l,a]})}const c=zc(u,o);return Wc(c,n)?$c(Nc({},r),{overrides:l}):$c(Nc({},r),{overrides:[...l,c]})}(e,t,this.state.fieldConfig,this._dataWithFieldConfig.series),!0)},this._onInstanceStateChange=e=>{this._panelContext&&(this._panelContext=pd(dd({},this._panelContext),{instanceState:e})),this.setState({_pluginInstanceState:e})},this._onToggleLegendSort=e=>{const t=this.state.options.legend;if(!t)return;let r=t.sortDesc,n=t.sortBy;e!==n&&(r=void 0),!1===r?(n=void 0,r=void 0):(r=!r,n=e),this.onOptionsChange(pd(dd({},this.state.options),{legend:pd(dd({},t),{sortBy:n,sortDesc:r})}),!0)},this.addActivationHandler((()=>{this._onActivate()})),null==(t=e.menu)||t.addActivationHandler((()=>{this.publishEvent(new z({origin:this,interaction:"panel-menu-shown"}),!0)}))}_onActivate(){this._plugin||this._loadPlugin(this.state.pluginId)}forceRender(){var e;this.setState({_renderCounter:(null!=(e=this.state._renderCounter)?e:0)+1})}async _loadPlugin(e,t,n,a){const o=function(e){var t;const{getPanelPluginFromCache:r}=(0,i.getPluginImportUtils)();return null!=(t=r(e))?t:O.get(e)}(e);if(o)this._pluginLoaded(o,t,n,a);else{const{importPanelPlugin:o}=(0,i.getPluginImportUtils)();try{const r=o(e),i=qu.getQueryController(this);i&&i.state.enableProfiling&&It(r).pipe(Pt({type:"plugin",origin:this})).subscribe((()=>{}));const s=await r;this._pluginLoaded(s,t,n,a)}catch(t){this._pluginLoaded(function(e){const t=new r.PanelPlugin((()=>null));return t.meta={id:e,name:e,sort:100,type:r.PluginType.panel,module:"",baseUrl:"",info:{author:{name:""},description:"",links:[],logos:{large:"",small:"public/img/grafana_icon.svg"},screenshots:[],updated:"",version:""}},t}(e)),t instanceof Error&&this.setState({_pluginLoadError:t.message})}}}getLegacyPanelId(){var e,t;const r=null!=(t=null==(e=this.state.key)?void 0:e.split("/"))?t:[];if(0===r.length)return 0;const n=r[r.length-1],a=parseInt(n.replace("panel-",""),10);return isNaN(a)?0:a}async _pluginLoaded(e,t,n,a){const{options:o,fieldConfig:i,title:s,pluginVersion:l,_UNSAFE_customMigrationHandler:u}=this.state,c={title:s,options:o,fieldConfig:i,id:this.getLegacyPanelId(),type:e.meta.id,pluginVersion:l};t&&(c.options=t),n&&(c.fieldConfig=n);const d=this._getPluginVersion(e);null==u||u(c,e),e.onPanelMigration&&d!==l&&!a&&(c.options=await e.onPanelMigration(c));const p=(0,r.getPanelOptionsWithDefaults)({plugin:e,currentOptions:c.options,currentFieldConfig:c.fieldConfig,isAfterPluginChange:null!=a&&a});if(this._plugin=e,this.setState({options:p.options,fieldConfig:p.fieldConfig,pluginVersion:d,pluginId:e.meta.id}),e.meta.skipDataQuery){const e=qu.getTimeRange(this);this._subs.add(e.subscribeToState((()=>this.forceRender())))}}_getPluginVersion(e){return e&&e.meta.info.version?e.meta.info.version:i.config.buildInfo.version}getPlugin(){return this._plugin}getPanelContext(){return null!=this._panelContext||(this._panelContext=this.buildPanelContext()),this._panelContext}async changePluginType(e,t,r){var n,a;const{options:o,fieldConfig:i,pluginId:s}=this.state;this._dataWithFieldConfig=void 0;const l=this.state.pluginId!==e;await this._loadPlugin(e,null!=t?t:{},r,l);const u={title:this.state.title,options:this.state.options,fieldConfig:this.state.fieldConfig,id:1,type:e},c=null==(a=null==(n=this._plugin)?void 0:n.onPanelTypeChanged)?void 0:a.call(n,u,s,o,i);c&&!(0,te.isEmpty)(c)&&this.onOptionsChange(c,!0,!0)}clearFieldConfigCache(){this._dataWithFieldConfig=void 0}applyFieldConfig(e){var t,n,a,o;const s=this._plugin;if(!s||s.meta.skipDataQuery||!e)return Ee;if(this._prevData===e&&this._dataWithFieldConfig)return this._dataWithFieldConfig;const l=s.dataSupport||{alertStates:!1,annotations:!1},u=s.fieldConfigRegistry,c=null!=(n=null==(t=this._dataWithFieldConfig)?void 0:t.series)?n:[],d=(0,r.applyFieldOverrides)({data:e.series,fieldConfig:this.state.fieldConfig,fieldConfigRegistry:u,replaceVariables:this.interpolate,theme:i.config.theme2,timeZone:null==(a=e.request)?void 0:a.timezone});return(0,r.compareArrayValues)(d,c,r.compareDataFrameStructures)||this._structureRev++,this._dataWithFieldConfig=pd(dd({},e),{structureRev:this._structureRev,series:d}),this._dataWithFieldConfig.annotations&&(this._dataWithFieldConfig.annotations=(0,r.applyFieldOverrides)({data:this._dataWithFieldConfig.annotations,fieldConfig:{defaults:{},overrides:[]},fieldConfigRegistry:u,replaceVariables:this.interpolate,theme:i.config.theme2,timeZone:null==(o=e.request)?void 0:o.timezone})),l.alertStates||(this._dataWithFieldConfig.alertState=void 0),l.annotations||(this._dataWithFieldConfig.annotations=void 0),this._prevData=e,this._dataWithFieldConfig}buildPanelContext(){const e=(t=this,qu.findObject(t,(e=>e instanceof uc)));var t;const n={eventsScope:e?e.getEventsScope():"__global_",eventBus:e?e.getEventsBus(this):(0,i.getAppEvents)(),app:r.CoreApp.Unknown,sync:()=>e?e.state.sync:r.DashboardCursorSync.Off,onSeriesColorChange:this._onSeriesColorChange,onToggleSeriesVisibility:this._onSeriesVisibilityChange,onToggleLegendSort:this._onToggleLegendSort,onInstanceStateChange:this._onInstanceStateChange};return this.state.extendPanelContext&&this.state.extendPanelContext(this,n),n}}hd.Component=function({model:e}){var t;const{title:a,options:l,fieldConfig:u,_pluginLoadError:c,displayMode:d,hoverHeader:h,showMenuAlways:f,hoverHeaderOffset:m,menu:g,headerActions:v,titleItems:b,seriesLimit:y,seriesLimitShowAll:w,description:S,collapsible:E,collapsed:O,_renderCounter:x=0}=e.useState(),[R,{width:_,height:C}]=mc(),P=(0,n.useMemo)((()=>(0,i.getAppEvents)()),[]),I=(0,n.useCallback)((()=>{e.state.key&&P.publish(new r.SetPanelAttentionEvent({panelId:e.state.key}))}),[e.state.key,P]),T=(0,n.useMemo)((()=>(0,te.debounce)(I,100,{leading:!0,trailing:!1})),[I]),D=e.getPlugin(),{dragClass:A,dragClassCancel:k}=function(e){var t,r;const n=qu.getLayout(e),a=null==n?void 0:n.isDraggable();if(!n||!a||function(e,t){let r=e.parent;for(;r&&r!==t;){if("isDraggable"in r.state&&!1===r.state.isDraggable)return!0;r=r.parent}return!1}(e,n))return{dragClass:"",dragClassCancel:""};return{dragClass:null==(t=n.getDragClass)?void 0:t.call(n),dragClassCancel:null==(r=null==n?void 0:n.getDragClassCancel)?void 0:r.call(n)}}(e),j=function(e){var t,r;const n=qu.getLayout(e);return null!=(r=null==(t=null==n?void 0:n.getDragHooks)?void 0:t.call(n))?r:{}}(e),L=qu.getData(e),M=L.useState(),N=function(e,t,r){return(0,n.useMemo)((()=>{return(null==e?void 0:e.series)&&t&&!r?(n=Rc({},e),a={series:e.series.slice(0,t)},yc(n,wc(a))):e;var n,a}),[e,t,r])}(M.data,y,w),$=e.applyFieldConfig(N),V=qu.getTimeRange(e).getTimeZone(),F=e.getTimeRange($),B=e.interpolate(a,void 0,"text"),z=(0,s.useStyles2)(Ic);if(!D)return o().createElement("div",null,"Loading plugin panel...");if(!D.panel)return o().createElement("div",null,"Panel plugin has no panel component");const U=D.panel;L&&L.setContainerWidth&&L.setContainerWidth(Math.round(_));let W,H,G=[];b&&(Array.isArray(b)?G=G.concat(b.map((e=>o().createElement(e.Component,{model:e,key:`${e.state.key}`})))):Rt(b)?G.push(o().createElement(b.Component,{model:b})):G.push(b)),y&&G.push(o().createElement(gc,{key:"series-limit",data:M.data,seriesLimit:y,showAll:w,onShowAllSeries:()=>e.setState({seriesLimitShowAll:!w})})),e.state.$timeRange&&G.push(o().createElement(e.state.$timeRange.Component,{model:e.state.$timeRange,key:e.state.key})),$.alertState&&G.push(o().createElement(s.Tooltip,{content:null!=(t=$.alertState.state)?t:"unknown",key:`alert-states-icon-${e.state.key}`},o().createElement(s.PanelChrome.TitleItem,{className:(0,p.cx)({[z.ok]:$.alertState.state===r.AlertState.OK,[z.pending]:$.alertState.state===r.AlertState.Pending,[z.alerting]:$.alertState.state===r.AlertState.Alerting})},o().createElement(s.Icon,{name:"alerting"===$.alertState.state?"heart-break":"heart",className:"panel-alert-icon",size:"md"})))),g&&(W=o().createElement(g.Component,{model:g})),v&&(H=Array.isArray(v)?o().createElement(o().Fragment,null,v.map((e=>o().createElement(e.Component,{model:e,key:`${e.state.key}`})))):Rt(v)?o().createElement(v.Component,{model:v}):v);const q=$,Q=!L.isDataReadyToDisplay||L.isDataReadyToDisplay(),X=e.getPanelContext(),Y=e.getLegacyPanelId();return o().createElement("div",{className:Cc},o().createElement("div",{ref:R,className:Pc,"data-viz-panel-key":e.state.key},_>0&&C>0&&o().createElement(s.PanelChrome,Rc({title:B,description:(null==S?void 0:S.trim())?e.getDescription:void 0,loadingState:q.state,statusMessage:_c(q,c),statusMessageOnClick:e.onStatusMessageClick,width:_,height:C,selectionId:e.state.key,displayMode:d,titleItems:G,dragClass:A,actions:H,dragClassCancel:k,padding:D.noPadding?"none":"md",menu:W,onCancelQuery:e.onCancelQuery,onFocus:I,onMouseEnter:I,onMouseMove:T,onDragStart:t=>{var r;null==(r=j.onDragStart)||r.call(j,t,e)}},E?{collapsible:Boolean(E),collapsed:O,onToggleCollapse:e.onToggleCollapse,showMenuAlways:f}:{hoverHeader:h,hoverHeaderOffset:m}),((t,n)=>o().createElement(o().Fragment,null,o().createElement(s.ErrorBoundaryAlert,{dependencies:[D,q]},o().createElement(r.PluginContextProvider,{meta:D.meta},o().createElement(s.PanelContextProvider,{value:X},Q&&o().createElement(U,{id:Y,data:q,title:a,timeRange:F,timeZone:V,options:l,fieldConfig:u,transparent:!1,width:t,height:n,renderCounter:x,replaceVariables:e.interpolate,onOptionsChange:e.onOptionsChange,onFieldConfigChange:e.onFieldConfigChange,onChangeTimeRange:e.onTimeRangeChange,eventBus:X.eventBus})))))))))};const fd=class extends Z{constructor({enabled:e=!1}){super({enabled:e}),this.timerId=void 0,this._activationHandler=()=>(this.state.enabled&&this.enable(),()=>{window.clearInterval(this.timerId),this.timerId=void 0}),this.addActivationHandler(this._activationHandler)}enable(){window.clearInterval(this.timerId),this.timerId=void 0,this.timerId=window.setInterval((()=>{const e=qu.findAllObjects(this.getRoot(),(e=>e instanceof hd));for(const t of e)t.forceRender()}),fd.REFRESH_RATE),this.setState({enabled:!0})}disable(){window.clearInterval(this.timerId),this.timerId=void 0,this.setState({enabled:!1})}get isEnabled(){return this.state.enabled}};let md=fd;function gd(e){if("string"==typeof e)return e;if(e){if(e instanceof Error)return e.message;if((0,i.isFetchError)(e)){if(e.data&&e.data.message)return e.data.message;if(e.statusText)return e.statusText}else if(e.hasOwnProperty("message"))return e.message}return JSON.stringify(e)}md.REFRESH_RATE=100;var vd=Object.defineProperty,bd=Object.getOwnPropertySymbols,yd=Object.prototype.hasOwnProperty,wd=Object.prototype.propertyIsEnumerable,Sd=(e,t,r)=>t in e?vd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class Ed extends Z{constructor(e,t=[]){super(((e,t)=>{for(var r in t||(t={}))yd.call(t,r)&&Sd(e,r,t[r]);if(bd)for(var r of bd(t))wd.call(t,r)&&Sd(e,r,t[r]);return e})({isEnabled:!0},e)),this._results=new x.ReplaySubject(1),this.isDataLayer=!0,this._variableValueRecorder=new Dt,this._variableDependency=new uu(this,{onVariableUpdateCompleted:this.onVariableUpdateCompleted.bind(this)}),this._variableDependency.setPaths(t),this.addActivationHandler((()=>this.onActivate()))}onActivate(){return this.state.isEnabled&&this.onEnable(),this.shouldRunLayerOnActivate()&&this.runLayer(),this.subscribeToState(((e,t)=>{!e.isEnabled&&this.querySub&&(this.querySub.unsubscribe(),this.querySub=void 0,this.onDisable(),this._results.next({origin:this,data:Ee}),this.setStateHelper({data:Ee})),e.isEnabled&&!t.isEnabled&&(this.onEnable(),this.runLayer())})),()=>{this.onDeactivate()}}onDeactivate(){this.querySub&&(this.querySub.unsubscribe(),this.querySub=void 0),this.onDisable(),this._variableValueRecorder.recordCurrentDependencyValuesForSceneObject(this)}onVariableUpdateCompleted(){this.runLayer()}cancelQuery(){this.querySub&&(this.querySub.unsubscribe(),this.querySub=void 0,this.publishResults(Ee))}publishResults(e){this.state.isEnabled&&(this._results.next({origin:this,data:e}),this.setStateHelper({data:e}))}getResultsStream(){return this._results}shouldRunLayerOnActivate(){return!!this.state.isEnabled&&(this._variableValueRecorder.hasDependenciesChanged(this)?(pe(),!0):!this.state.data)}setStateHelper(e){st(this,e)}}function Od({layer:e}){var t,r;const n=`data-layer-${e.state.key}`,{data:a,isEnabled:i}=e.useState(),l=Boolean(a&&a.state===ge.Loading);return o().createElement("div",{className:xd},o().createElement(pn,{htmlFor:n,isLoading:l,onCancel:()=>{var t;return null==(t=e.cancelQuery)?void 0:t.call(e)},label:e.state.name,description:e.state.description,error:null==(r=null==(t=e.state.data)?void 0:t.errors)?void 0:r[0].message}),o().createElement(s.InlineSwitch,{id:n,value:i,onChange:()=>e.setState({isEnabled:!i})}))}(class extends Z{constructor(){super({})}}).Component=function({model:e}){const t=qu.getDataLayers(e,!0);if(0===t.length)return null;return o().createElement(o().Fragment,null,t.map((e=>o().createElement(e.Component,{model:e,key:e.state.key}))))};const xd=(0,p.css)({display:"flex"});function Rd(e){return"function"==typeof e}function _d(e){return function(t){if(function(e){return Rd(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}var Cd=function(e,t){return Cd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},Cd(e,t)};function Pd(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Cd(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var Id=function(){return Id=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Id.apply(this,arguments)};function Td(e,t,r,n){return new(r||(r=Promise))((function(a,o){function i(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))}function Dd(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&s[0]?n.return:s[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{r=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}Object.create;function Ad(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function kd(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,o=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return i}function jd(e,t,r){if(r||2===arguments.length)for(var n,a=0,o=t.length;a<o;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}function Ld(e){return this instanceof Ld?(this.v=e,this):new Ld(e)}function Md(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,a=r.apply(e,t||[]),o=[];return n=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),i("next"),i("throw"),i("return",(function(e){return function(t){return Promise.resolve(t).then(e,u)}})),n[Symbol.asyncIterator]=function(){return this},n;function i(e,t){a[e]&&(n[e]=function(t){return new Promise((function(r,n){o.push([e,t,r,n])>1||s(e,t)}))},t&&(n[e]=t(n[e])))}function s(e,t){try{(r=a[e](t)).value instanceof Ld?Promise.resolve(r.value.v).then(l,u):c(o[0][2],r)}catch(e){c(o[0][3],e)}var r}function l(e){s("next",e)}function u(e){s("throw",e)}function c(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function Nd(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=Ad(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,a){(function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)})(n,a,(t=e[r](t)).done,t.value)}))}}}Object.create;"function"==typeof SuppressedError&&SuppressedError;var $d,Vd=(($d=function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}((function(e){Error.call(e),e.stack=(new Error).stack}))).prototype=Object.create(Error.prototype),$d.prototype.constructor=$d,$d);function Fd(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var Bd=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,r,n,a;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var i=Ad(o),s=i.next();!s.done;s=i.next()){s.value.remove(this)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}else o.remove(this);var l=this.initialTeardown;if(Rd(l))try{l()}catch(e){a=e instanceof Vd?e.errors:[e]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var c=Ad(u),d=c.next();!d.done;d=c.next()){var p=d.value;try{Ud(p)}catch(e){a=null!=a?a:[],e instanceof Vd?a=jd(jd([],kd(a)),kd(e.errors)):a.push(e)}}}catch(e){r={error:e}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}}if(a)throw new Vd(a)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)Ud(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Fd(t,e)},e.prototype.remove=function(t){var r=this._finalizers;r&&Fd(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}();Bd.EMPTY;function zd(e){return e instanceof Bd||e&&"closed"in e&&Rd(e.remove)&&Rd(e.add)&&Rd(e.unsubscribe)}function Ud(e){Rd(e)?e():e.unsubscribe()}var Wd={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Hd={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var a=Hd.delegate;return(null==a?void 0:a.setTimeout)?a.setTimeout.apply(a,jd([e,t],kd(r))):setTimeout.apply(void 0,jd([e,t],kd(r)))},clearTimeout:function(e){var t=Hd.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function Gd(e){Hd.setTimeout((function(){var t=Wd.onUnhandledError;if(!t)throw e;t(e)}))}function qd(){}var Qd=Xd("C",void 0,void 0);function Xd(e,t,r){return{kind:e,value:t,error:r}}var Yd=null;var Kd=function(e){function t(t){var r=e.call(this)||this;return r.isStopped=!1,t?(r.destination=t,zd(t)&&t.add(r)):r.destination=ap,r}return Pd(t,e),t.create=function(e,t,r){return new tp(e,t,r)},t.prototype.next=function(e){this.isStopped?np(function(e){return Xd("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?np(Xd("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?np(Qd,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Bd),Zd=Function.prototype.bind;function Jd(e,t){return Zd.call(e,t)}var ep=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){rp(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){rp(e)}else rp(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){rp(e)}},e}(),tp=function(e){function t(t,r,n){var a,o,i=e.call(this)||this;Rd(t)||!t?a={next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=n?n:void 0}:i&&Wd.useDeprecatedNextContext?((o=Object.create(t)).unsubscribe=function(){return i.unsubscribe()},a={next:t.next&&Jd(t.next,o),error:t.error&&Jd(t.error,o),complete:t.complete&&Jd(t.complete,o)}):a=t;return i.destination=new ep(a),i}return Pd(t,e),t}(Kd);function rp(e){var t;Wd.useDeprecatedSynchronousErrorHandling?(t=e,Wd.useDeprecatedSynchronousErrorHandling&&Yd&&(Yd.errorThrown=!0,Yd.error=t)):Gd(e)}function np(e,t){var r=Wd.onStoppedNotification;r&&Hd.setTimeout((function(){return r(e,t)}))}var ap={closed:!0,next:qd,error:function(e){throw e},complete:qd};function op(e,t,r,n,a){return new ip(e,t,r,n,a)}var ip=function(e){function t(t,r,n,a,o,i){var s=e.call(this,t)||this;return s.onFinalize=o,s.shouldUnsubscribe=i,s._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=a?function(e){try{a(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=n?function(){try{n()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return Pd(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(Kd);function sp(e,t){return _d((function(r,n){var a=0;r.subscribe(op(n,(function(r){n.next(e.call(t,r,a++))})))}))}var lp="function"==typeof Symbol&&Symbol.observable||"@@observable";function up(e){return e}function cp(e){return 0===e.length?up:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var dp=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n,a=this,o=(n=e)&&n instanceof Kd||function(e){return e&&Rd(e.next)&&Rd(e.error)&&Rd(e.complete)}(n)&&zd(n)?e:new tp(e,t,r);return function(e){if(Wd.useDeprecatedSynchronousErrorHandling){var t=!Yd;if(t&&(Yd={errorThrown:!1,error:null}),e(),t){var r=Yd,n=r.errorThrown,a=r.error;if(Yd=null,n)throw a}}else e()}((function(){var e=a,t=e.operator,r=e.source;o.add(t?t.call(o,r):r?a._subscribe(o):a._trySubscribe(o))})),o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=pp(t))((function(t,n){var a=new tp({next:function(t){try{e(t)}catch(e){n(e),a.unsubscribe()}},error:n,complete:t});r.subscribe(a)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[lp]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return cp(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=pp(e))((function(e,r){var n;t.subscribe((function(e){return n=e}),(function(e){return r(e)}),(function(){return e(n)}))}))},e.create=function(t){return new e(t)},e}();function pp(e){var t;return null!==(t=null!=e?e:Wd.Promise)&&void 0!==t?t:Promise}var hp="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function fp(e){if(e instanceof dp)return e;if(null!=e){if(function(e){return Rd(e[lp])}(e))return i=e,new dp((function(e){var t=i[lp]();if(Rd(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if((o=e)&&"number"==typeof o.length&&"function"!=typeof o)return a=e,new dp((function(e){for(var t=0;t<a.length&&!e.closed;t++)e.next(a[t]);e.complete()}));if(Rd(null==(n=e)?void 0:n.then))return r=e,new dp((function(e){r.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,Gd)}));if(function(e){return Symbol.asyncIterator&&Rd(null==e?void 0:e[Symbol.asyncIterator])}(e))return mp(e);if(function(e){return Rd(null==e?void 0:e[hp])}(e))return t=e,new dp((function(e){var r,n;try{for(var a=Ad(t),o=a.next();!o.done;o=a.next()){var i=o.value;if(e.next(i),e.closed)return}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}e.complete()}));if(function(e){return Rd(null==e?void 0:e.getReader)}(e))return mp(function(e){return Md(this,arguments,(function(){var t,r,n;return Dd(this,(function(a){switch(a.label){case 0:t=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,Ld(t.read())];case 3:return r=a.sent(),n=r.value,r.done?[4,Ld(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,Ld(n)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}(e))}var t,r,n,a,o,i;throw function(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}(e)}function mp(e){return new dp((function(t){(function(e,t){var r,n,a,o;return Td(this,void 0,void 0,(function(){var i,s;return Dd(this,(function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),r=Nd(e),l.label=1;case 1:return[4,r.next()];case 2:if((n=l.sent()).done)return[3,4];if(i=n.value,t.next(i),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=l.sent(),a={error:s},[3,11];case 6:return l.trys.push([6,,9,10]),n&&!n.done&&(o=r.return)?[4,o.call(r)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(a)throw a.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function gp(e,t,r){return void 0===r&&(r=1/0),Rd(t)?gp((function(r,n){return sp((function(e,a){return t(r,e,n,a)}))(fp(e(r,n)))}),r):("number"==typeof t&&(r=t),_d((function(t,n){return function(e,t,r,n,a,o,i,s){var l=[],u=0,c=0,d=!1,p=function(){!d||l.length||u||t.complete()},h=function(e){return u<n?f(e):l.push(e)},f=function(e){o&&t.next(e),u++;var s=!1;fp(r(e,c++)).subscribe(op(t,(function(e){null==a||a(e),o?h(e):t.next(e)}),(function(){s=!0}),void 0,(function(){if(s)try{u--;for(var e=function(){var e=l.shift();i?function(e,t,r,n,a){void 0===n&&(n=0),void 0===a&&(a=!1);var o=t.schedule((function(){r(),a?e.add(this.schedule(null,n)):this.unsubscribe()}),n);e.add(o)}(t,i,(function(){return f(e)})):f(e)};l.length&&u<n;)e();p()}catch(e){t.error(e)}})))};return e.subscribe(op(t,h,(function(){d=!0,p()}))),function(){null==s||s()}}(t,n,e,r)})))}var vp=Object.defineProperty,bp=Object.defineProperties,yp=Object.getOwnPropertyDescriptors,wp=Object.getOwnPropertySymbols,Sp=Object.prototype.hasOwnProperty,Ep=Object.prototype.propertyIsEnumerable,Op=(e,t,r)=>t in e?vp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const xp={prepareAnnotation:e=>{if((0,te.isString)(null==e?void 0:e.query)){const r=e,{query:n}=r,a=((e,t)=>{var r={};for(var n in e)Sp.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&wp)for(var n of wp(e))t.indexOf(n)<0&&Ep.call(e,n)&&(r[n]=e[n]);return r})(r,["query"]);return t=((e,t)=>{for(var r in t||(t={}))Sp.call(t,r)&&Op(e,r,t[r]);if(wp)for(var r of wp(t))Ep.call(t,r)&&Op(e,r,t[r]);return e})({},a),bp(t,yp({target:{refId:"annotation_query",query:n},mappings:{}}))}var t;return e},prepareQuery:e=>e.target,processEvents:(e,t)=>function(e,t){return(0,x.of)(e).pipe((e=>e.pipe(gp((e=>{if(!(null==e?void 0:e.length))return(0,x.of)(void 0);if(1===e.length)return(0,x.of)(e[0]);const t={interpolate:e=>e};return(0,x.of)(e).pipe(r.standardTransformers.mergeTransformer.operator({},t),sp((e=>e[0])))})))),sp((e=>{if(!(null==e?void 0:e.length))return[];let n=!1,a=!1;const o={};for(const t of e.fields){o[(0,r.getFieldDisplayName)(t,e).toLowerCase()]=t}t||(t={});const i=[];for(const s of _p){const l=t[s.key]||{};if(l.source===r.AnnotationEventFieldSource.Skip)continue;const u={key:s.key,split:s.split};if(l.source===r.AnnotationEventFieldSource.Text)u.text=l.value;else{const t=(l.value||s.key).toLowerCase();u.field=o[t],!u.field&&s.field&&(u.field=s.field(e))}(u.field||u.text)&&(i.push(u),"time"===u.key?n=!0:"text"===u.key&&(a=!0))}if(!n||!a)return console.error("Cannot process annotation fields. No time or text present."),[];const s=[];for(let t=0;t<e.length;t++){const e={type:"default",color:"red"};for(const r of i){let n;if(r.text)n=r.text;else if(r.field&&(n=r.field.values.get(t),void 0!==n&&r.regex)){const e=r.regex.exec(n);e&&(n=e[1]?e[1]:e[0])}null!=n&&(r.split&&"string"==typeof n&&(n=n.split(",")),e[r.key]=n)}s.push(e)}return s})))}(t,e.mappings)};const Rp=[{key:"time",field:e=>e.fields.find((e=>e.type===r.FieldType.time)),placeholder:"time, or the first time field"},{key:"timeEnd",help:"When this field is defined, the annotation will be treated as a range"},{key:"title"},{key:"text",field:e=>e.fields.find((e=>e.type===r.FieldType.string)),placeholder:"text, or the first text field"},{key:"tags",split:",",help:"The results will be split on comma (,)"},{key:"id"}],_p=[...i.config.publicDashboardAccessToken?[{key:"color"},{key:"isRegion"},{key:"source"}]:[],...Rp,{key:"userId"},{key:"login"},{key:"email"},{key:"prevState"},{key:"newState"},{key:"data"},{key:"panelId"},{key:"alertId"},{key:"dashboardId"},{key:"dashboardUID"}];const Cp=["prometheus","loki","elasticsearch","grafana-opensearch-datasource"];var Pp=Object.defineProperty,Ip=Object.defineProperties,Tp=Object.getOwnPropertyDescriptors,Dp=Object.getOwnPropertySymbols,Ap=Object.prototype.hasOwnProperty,kp=Object.prototype.propertyIsEnumerable,jp=(e,t,r)=>t in e?Pp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Lp=(e,t)=>{for(var r in t||(t={}))Ap.call(t,r)&&jp(e,r,t[r]);if(Dp)for(var r of Dp(t))kp.call(t,r)&&jp(e,r,t[r]);return e},Mp=(e,t)=>Ip(e,Tp(t));let Np=100;function $p(e,t,n,a){var o;if(e.annotationQuery&&function(e){const{type:t}=e;return!e.annotations||Cp.includes(t)}(e))return console.warn("Using deprecated annotationQuery method, please upgrade your datasource"),(0,x.from)(e.annotationQuery({range:t.state.value,rangeRaw:t.state.value.raw,annotation:n,dashboard:{getVariables:(0,i.getTemplateSrv)().getVariables}})).pipe(sp((e=>({state:ge.Done,events:e}))));const s=Lp(Lp({},xp),e.annotations),l=Lp(Lp({},null==(o=s.getDefaultQuery)?void 0:o.call(s)),n),u=s.prepareAnnotation(l);if(!u)return(0,x.of)({state:ge.Done,events:[]});const c=s.prepareQuery(u);if(!c)return(0,x.of)({state:ge.Done,events:[]});const d=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,p=r.rangeUtil.calculateInterval(t.state.value,d,e.interval),h={__interval:{text:p.interval,value:p.interval},__interval_ms:{text:p.intervalMs.toString(),value:p.intervalMs},__annotation:{text:u.name,value:u},__sceneObject:Zr(a)},f=Lp(Mp(Lp({startTime:Date.now(),requestId:"AQ"+Np++,range:t.state.value,maxDataPoints:d,scopedVars:h},p),{app:r.CoreApp.Dashboard,timezone:t.getTimeZone(),targets:[Mp(Lp({},c),{refId:"Anno"})]}),Zt(a));return(0,i.getRunRequest)()(e,f).pipe(gp((e=>{const t=(null==e?void 0:e.series.length)?e.series:e.annotations;return(null==t?void 0:t.length)?(t.forEach((e=>{var t;(null==(t=e.meta)?void 0:t.dataTopic)||(e.meta=Mp(Lp({},e.meta||{}),{dataTopic:r.DataTopic.Annotations}))})),s.processEvents(u,t).pipe(sp((t=>({state:e.state,events:t||[]}))))):(0,x.of)({state:e.state,events:[]})})))}var Vp=Object.defineProperty,Fp=Object.getOwnPropertySymbols,Bp=Object.prototype.hasOwnProperty,zp=Object.prototype.propertyIsEnumerable,Up=(e,t,r)=>t in e?Vp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function Wp(e,t){e.snapshotData&&delete(e=(0,te.cloneDeep)(e)).snapshotData;return t.map((t=>{var r;const n=((e,t)=>{for(var r in t||(t={}))Bp.call(t,r)&&Up(e,r,t[r]);if(Fp)for(var r of Fp(t))zp.call(t,r)&&Up(e,r,t[r]);return e})({},t);switch(n.source=e,n.color=i.config.theme2.visualization.getColorByName(e.iconColor),n.type=e.name,n.isRegion=Boolean(n.timeEnd&&n.time!==n.timeEnd),null==(r=n.newState)?void 0:r.toLowerCase()){case"pending":n.color="yellow";break;case"alerting":n.color="red";break;case"ok":case"normal":n.color="green";break;case"no_data":case"nodata":n.color="gray"}return n}))}function Hp(e){return"panel-alert"===e.eventType}var Gp=Object.defineProperty,qp=Object.defineProperties,Qp=Object.getOwnPropertyDescriptors,Xp=Object.getOwnPropertySymbols,Yp=Object.prototype.hasOwnProperty,Kp=Object.prototype.propertyIsEnumerable,Zp=(e,t,r)=>t in e?Gp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Jp=(e,t)=>{for(var r in t||(t={}))Yp.call(t,r)&&Zp(e,r,t[r]);if(Xp)for(var r of Xp(t))Kp.call(t,r)&&Zp(e,r,t[r]);return e},eh=(e,t)=>qp(e,Qp(t));(class extends Ed{constructor(e){super(Jp({isEnabled:!0},e),["query"]),this._scopedVars={__sceneObject:Zr(this)}}onEnable(){this.publishEvent(new i.RefreshEvent,!0);const e=qu.getTimeRange(this);this._timeRangeSub=e.subscribeToState((()=>{this.runWithTimeRange(e)}))}onDisable(){var e;this.publishEvent(new i.RefreshEvent,!0),null==(e=this._timeRangeSub)||e.unsubscribe()}runLayer(){pe();const e=qu.getTimeRange(this);this.runWithTimeRange(e)}async runWithTimeRange(e){const{query:t}=this.state;if(this.querySub&&this.querySub.unsubscribe(),this._variableDependency.hasDependencyInLoadingState())pe();else try{let r=$p(await this.resolveDataSource(t),e,t,this).pipe(Pt({type:"annotations",origin:this,cancel:()=>this.cancelQuery()}),(0,x.map)((e=>this.processEvents(t,e))));this.querySub=r.subscribe((e=>{this.publishResults(e)}))}catch(e){this.publishResults(eh(Jp({},Ee),{state:ge.Error,errors:[{message:gd(e)}]})),console.error("AnnotationsDataLayer error",e)}}async resolveDataSource(e){return await Tt(e.datasource||void 0,this._scopedVars)}processEvents(e,t){let n=Wp(e,t.events||[]);n=function(e){let t=[];const r=(0,te.partition)(e,"id"),n=(0,te.groupBy)(r[0],"id");return t=(0,te.map)(n,(e=>e.length>1&&!(0,te.every)(e,Hp)?(0,te.find)(e,(e=>"panel-alert"!==e.eventType)):(0,te.head)(e))),t=(0,te.concat)(t,r[1]),t}(n);const a=eh(Jp({},Ee),{state:t.state}),o=(0,r.arrayToDataFrame)(n);return o.meta=eh(Jp({},o.meta),{dataTopic:r.DataTopic.Annotations}),a.series=[o],a}}).Component=function({model:e}){const{isHidden:t}=e.useState();if(t)return null;return o().createElement(Od,{layer:e})};Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var th=Object.defineProperty,rh=Object.defineProperties,nh=Object.getOwnPropertyDescriptors,ah=Object.getOwnPropertySymbols,oh=Object.prototype.hasOwnProperty,ih=Object.prototype.propertyIsEnumerable,sh=(e,t,r)=>t in e?th(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class lh extends Z{constructor(){super(...arguments),this.isDataLayer=!0,this._results=new x.ReplaySubject(1),this._dataLayersMerger=new Rl}subscribeToAllLayers(e){e.length>0?this.querySub=this._dataLayersMerger.getMergedStream(e).subscribe(this._onLayerUpdateReceived.bind(this)):(this._results.next({origin:this,data:Ee}),this.setStateHelper({data:Ee}))}_onLayerUpdateReceived(e){var t;let r=[];for(const n of e)(null==(t=n.data)?void 0:t.series)&&(r=r.concat(n.data.series));const n=(a=((e,t)=>{for(var r in t||(t={}))oh.call(t,r)&&sh(e,r,t[r]);if(ah)for(var r of ah(t))ih.call(t,r)&&sh(e,r,t[r]);return e})({},Ee),rh(a,nh({series:r})));var a;this._results.next({origin:this,data:n}),this.setStateHelper({data:n})}getResultsStream(){return this._results}cancelQuery(){var e;null==(e=this.querySub)||e.unsubscribe()}setStateHelper(e){st(this,e)}}class uh extends lh{constructor(e){var t,r;super({name:null!=(t=e.name)?t:"Data layers",layers:null!=(r=e.layers)?r:[]}),this.addActivationHandler((()=>this._onActivate()))}_onActivate(){return this._subs.add(this.subscribeToState(((e,t)=>{var r;e.layers!==t.layers&&(null==(r=this.querySub)||r.unsubscribe(),this.subscribeToAllLayers(e.layers))}))),this.subscribeToAllLayers(this.state.layers),()=>{var e;null==(e=this.querySub)||e.unsubscribe()}}}uh.Component=({model:e})=>{const{layers:t}=e.useState();return o().createElement(o().Fragment,null,t.map((e=>o().createElement(e.Component,{model:e,key:e.state.key}))))};Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;class ch extends Z{}function dh({variable:e,layout:t,showAlways:n,hideLabel:a}){return J(e,{shouldActivateOrKeepAlive:!0}).hide!==r.VariableHide.hideVariable||n?"vertical"===t?o().createElement("div",{className:fh,"data-testid":cr.pages.Dashboard.SubMenu.submenuItem},o().createElement(ph,{variable:e,layout:t,hideLabel:a}),o().createElement(e.Component,{model:e})):o().createElement("div",{className:hh,"data-testid":cr.pages.Dashboard.SubMenu.submenuItem},o().createElement(ph,{variable:e,hideLabel:a}),o().createElement(e.Component,{model:e})):null}function ph({variable:e,layout:t,hideLabel:n}){var a;const{state:i}=e;if(e.state.hide===r.VariableHide.hideLabel||n)return null;const s=`var-${i.key}`,l=i.label||i.name;return o().createElement(pn,{htmlFor:s,isLoading:i.loading,onCancel:()=>{var t;return null==(t=e.onCancel)?void 0:t.call(e)},label:l,error:i.error,layout:t,description:null!=(a=i.description)?a:void 0})}ch.Component=function({model:e}){const t=qu.getVariables(e).useState();return o().createElement(o().Fragment,null,t.variables.map((t=>o().createElement(dh,{key:t.state.key,variable:t,layout:e.state.layout}))))};const hh=(0,p.css)({display:"flex","> :nth-child(2)":(0,p.css)({borderTopLeftRadius:0,borderBottomLeftRadius:0})}),fh=(0,p.css)({display:"flex",flexDirection:"column"});(class extends Z{}).Component=function({model:e}){const t=qu.lookupVariable(e.state.variableName,e);if(!t)return null;return o().createElement(dh,{key:t.state.key,variable:t,layout:e.state.layout,showAlways:!0})};class mh extends Z{constructor(e){super(e),this._variablesThatHaveChanged=new Set,this._variablesToUpdate=new Set,this._updating=new Map,this._variableValueRecorder=new Dt,this._variableDependency=new vh(this._handleParentVariableUpdatesCompleted.bind(this)),this._onActivate=()=>{const e=qu.getTimeRange(this);this._subs.add(this.subscribeToEvent(Ve,(e=>this._handleVariableValueChanged(e.payload)))),this._subs.add(e.subscribeToState((()=>{this._refreshTimeRangeBasedVariables()}))),this._subs.add(this.subscribeToState(this._onStateChanged)),this._checkForVariablesThatChangedWhileInactive();for(const e of this.state.variables)this._variableNeedsUpdate(e)&&this._variablesToUpdate.add(e);return this._updateNextBatch(),this._onDeactivate},this._onDeactivate=()=>{var e;for(const t of this._updating.values())null==(e=t.subscription)||e.unsubscribe();for(const e of this.state.variables)this._variablesToUpdate.has(e)||this._updating.has(e)||this._variableValueRecorder.recordCurrentValue(e);this._variablesToUpdate.clear(),this._updating.clear()},this._onStateChanged=(e,t)=>{const r=this._variablesToUpdate.size;for(const r of t.variables)if(!e.variables.includes(r)){const e=this._updating.get(r);(null==e?void 0:e.subscription)&&e.subscription.unsubscribe(),this._updating.delete(r),this._variablesToUpdate.delete(r)}for(const r of e.variables)t.variables.includes(r)||this._variableNeedsUpdate(r)&&this._variablesToUpdate.add(r);0===r&&this._variablesToUpdate.size>0&&this._updateNextBatch()},this.addActivationHandler(this._onActivate)}getByName(e){return this.state.variables.find((t=>t.state.name===e))}_refreshTimeRangeBasedVariables(){for(const e of this.state.variables)"refresh"in e.state&&e.state.refresh===r.VariableRefresh.onTimeRangeChanged&&this._variablesToUpdate.add(e);this._updateNextBatch()}_checkForVariablesThatChangedWhileInactive(){if(this._variableValueRecorder.hasValues())for(const e of this.state.variables)this._variableValueRecorder.hasValueChanged(e)&&(gh(e,"Changed while in-active"),this._addDependentVariablesToUpdateQueue(e))}_variableNeedsUpdate(e){return!e.isLazy&&(!!e.validateAndUpdate&&(!this._variableValueRecorder.hasRecordedValue(e)||(gh(e,"Skipping updateAndValidate current value valid"),!1)))}_updateNextBatch(){for(const e of this._variablesToUpdate){if(!e.validateAndUpdate)throw new Error("Variable added to variablesToUpdate but does not have validateAndUpdate");if(this._updating.has(e))continue;if(qu.hasVariableDependencyInLoadingState(e))continue;const t={variable:e};this._updating.set(e,t),gh(e,"updateAndValidate started"),t.subscription=e.validateAndUpdate().subscribe({next:()=>this._validateAndUpdateCompleted(e),complete:()=>this._validateAndUpdateCompleted(e),error:t=>this._handleVariableError(e,t)})}}_validateAndUpdateCompleted(e){var t;if(!this._updating.has(e))return;const r=this._updating.get(e);null==(t=null==r?void 0:r.subscription)||t.unsubscribe(),this._updating.delete(e),this._variablesToUpdate.delete(e),gh(e,"updateAndValidate completed"),this._notifyDependentSceneObjects(e),this._updateNextBatch()}cancel(e){var t;const r=this._updating.get(e);null==(t=null==r?void 0:r.subscription)||t.unsubscribe(),this._updating.delete(e),this._variablesToUpdate.delete(e)}_handleVariableError(e,t){var r;const n=this._updating.get(e);null==(r=null==n?void 0:n.subscription)||r.unsubscribe(),this._updating.delete(e),this._variablesToUpdate.delete(e),e.setState({loading:!1,error:t.message}),console.error("SceneVariableSet updateAndValidate error",t),gh(e,"updateAndValidate error",t),this._notifyDependentSceneObjects(e),this._updateNextBatch()}_handleVariableValueChanged(e){this._variablesThatHaveChanged.add(e),this._addDependentVariablesToUpdateQueue(e),this._updating.has(e)||(this._updateNextBatch(),this._notifyDependentSceneObjects(e))}_handleParentVariableUpdatesCompleted(e,t){t&&this._addDependentVariablesToUpdateQueue(e),this._variablesToUpdate.size>0&&0===this._updating.size&&this._updateNextBatch()}_addDependentVariablesToUpdateQueue(e){for(const t of this.state.variables)t.variableDependency&&t.variableDependency.hasDependencyOn(e.state.name)&&(gh(t,"Added to update queue, dependant variable value changed"),this._updating.has(t)&&t.onCancel&&t.onCancel(),this._variablesToUpdate.add(t))}_notifyDependentSceneObjects(e){this.parent&&(this._traverseSceneAndNotify(this.parent,e,this._variablesThatHaveChanged.has(e)),this._variablesThatHaveChanged.delete(e))}_traverseSceneAndNotify(e,t,r){if(this!==e&&e.isActive){if(e.state.$variables&&e.state.$variables!==this){const r=e.state.$variables.getByName(t.state.name);if(null==r?void 0:r.isAncestorLoading)t=r;else if(r)return}e.variableDependency&&e.variableDependency.variableUpdateCompleted(t,r),e.forEachChild((e=>this._traverseSceneAndNotify(e,t,r)))}}isVariableLoadingOrWaitingToUpdate(e){return!(!e.isAncestorLoading||!e.isAncestorLoading())||(!(!this._variablesToUpdate.has(e)&&!this._updating.has(e))||qu.hasVariableDependencyInLoadingState(e))}}function gh(e,t,r){pe(0,e.state.name)}class vh{constructor(e){this._variableUpdatesCompleted=e,this._emptySet=new Set}getNames(){return this._emptySet}hasDependencyOn(e){return!1}variableUpdateCompleted(e,t){this._variableUpdatesCompleted(e,t)}}var bh=Object.defineProperty,yh=Object.getOwnPropertySymbols,wh=Object.prototype.hasOwnProperty,Sh=Object.prototype.propertyIsEnumerable,Eh=(e,t,r)=>t in e?bh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class Oh extends ut{constructor(e){super(((e,t)=>{for(var r in t||(t={}))wh.call(t,r)&&Eh(e,r,t[r]);if(yh)for(var r of yh(t))Sh.call(t,r)&&Eh(e,r,t[r]);return e})({type:"custom",query:"",value:"",text:"",options:[],name:""},e)),this._variableDependency=new uu(this,{statePaths:["query"]})}getValueOptions(e){var t;const r=(null!=(t=qu.interpolate(this,this.state.query).match(/(?:\\,|[^,])+/g))?t:[]).map((e=>{var t;e=e.replace(/\\,/g,",");const r=null!=(t=/^(.+)\s:\s(.+)$/g.exec(e))?t:[];if(3===r.length){const[,e,t]=r;return{label:e.trim(),value:t.trim()}}return{label:e.trim(),value:e.trim()}}));return r.length||(this.skipNextValidation=!0),(0,x.of)(r)}}Oh.Component=({model:e})=>Hr(e);var xh=Object.defineProperty,Rh=Object.getOwnPropertySymbols,_h=Object.prototype.hasOwnProperty,Ch=Object.prototype.propertyIsEnumerable,Ph=(e,t,r)=>t in e?xh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function Ih(e,t){return!t||t.exec(e.name)}function Th(e,t){return!!e.isDefault&&(!t||t.exec("default"))}function Dh(e,t){const r=["A","B","C","D","E","F","G","H"],n=[];if(t>5)return[];for(const a of r){const r=`${e}${a}`;n.push({name:r,children:Dh(r,t+1)})}return n}function Ah(e,t,r){if(r>=t.length)return e;if("*"===t[r])return e;const n=t[r];let a=[],o=[n];n.startsWith("{")&&(o=n.replace(/\{|\}/g,"").split(","));for(const n of e)for(const e of o)if(-1!==e.indexOf("*")){const o=e.replace("*","");new RegExp(`^${o}.*`,"gi").test(n.name)&&(a=a.concat(Ah([n],t,r+1)))}else n.name===e&&(a=a.concat(Ah(n.children,t,r+1)));return a}function kh(e){if(0===e.indexOf("value"))return[{name:e,children:[]}];return Ah(Dh("",0),e.split("."),0)}(class extends ut{constructor(e){super(((e,t)=>{for(var r in t||(t={}))_h.call(t,r)&&Ph(e,r,t[r]);if(Rh)for(var r of Rh(t))Ch.call(t,r)&&Ph(e,r,t[r]);return e})({type:"datasource",value:"",text:"",options:[],name:"",regex:"",pluginId:""},e)),this._variableDependency=new uu(this,{statePaths:["regex"]})}getValueOptions(e){if(!this.state.pluginId)return(0,x.of)([]);const t=(0,i.getDataSourceSrv)().getList({metrics:!0,variables:!1,pluginId:this.state.pluginId});let n;if(this.state.regex){const e=qu.interpolate(this,this.state.regex,void 0,"regex");n=(0,r.stringToJsRegex)(e)}const a=[];for(let e=0;e<t.length;e++){const r=t[e];Ih(r,n)&&a.push({label:r.name,value:r.uid}),this.state.defaultOptionEnabled&&Th(r,n)&&a.push({label:"default",value:"default"})}return 0===a.length?this.setState({error:"No data sources found"}):this.state.error&&this.setState({error:null}),(0,x.of)(a)}}).Component=({model:e})=>Hr(e);var jh=Object.defineProperty,Lh=Object.getOwnPropertySymbols,Mh=Object.prototype.hasOwnProperty,Nh=Object.prototype.propertyIsEnumerable,$h=(e,t,r)=>t in e?jh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function Vh({model:e}){const{value:t,key:r,loading:a}=e.useState(),i=(0,n.useCallback)((t=>{e.setValue(t.currentTarget.value)}),[e]),l=(0,n.useCallback)((t=>{"Enter"===t.key&&e.setValue(t.currentTarget.value)}),[e]);return o().createElement(s.AutoSizeInput,{id:r,placeholder:"Enter value",minWidth:15,maxWidth:30,value:t,loading:a,onBlur:i,onKeyDown:l})}(class extends ut{constructor(e,t=!1){super(((e,t)=>{for(var r in t||(t={}))Mh.call(t,r)&&$h(e,r,t[r]);if(Lh)for(var r of Lh(t))Nh.call(t,r)&&$h(e,r,t[r]);return e})({type:"custom",name:"Test",value:"Value",text:"Text",query:"Query",options:[],refresh:r.VariableRefresh.onDashboardLoad,updateOptions:!0},e)),this.completeUpdate=new x.Subject,this.isGettingValues=!0,this.getValueOptionsCount=0,this.isLazy=!1,this._variableDependency=new uu(this,{statePaths:["query"]}),this.isLazy=t}getValueOptions(e){const{delayMs:t}=this.state;this.getValueOptionsCount+=1;const r=qu.getQueryController(this);return new x.Observable((e=>{const n={type:"variable",origin:this,cancel:()=>e.complete()};if(r&&r.queryStarted(n),this.setState({loading:!0}),this.state.throwError)throw new Error(this.state.throwError);const a=qu.interpolate(this,this.state.query),o=this.getOptions(a),i=this.completeUpdate.subscribe({next:()=>{const t={issuedQuery:a,loading:!1};this.state.updateOptions&&(t.options=o),this.setState(t),e.next(o),e.complete()}});let s;return t?s=window.setTimeout((()=>this.signalUpdateCompleted()),t):0===t&&this.signalUpdateCompleted(),this.isGettingValues=!0,()=>{i.unsubscribe(),window.clearTimeout(s),this.isGettingValues=!1,this.state.loading&&this.setState({loading:!1}),r&&r.queryCompleted(n)}}))}cancel(){const e=ue(this,(e=>e instanceof mh?e:void 0));null==e||e.cancel(this)}getOptions(e){return this.state.optionsToReturn?this.state.optionsToReturn:kh(e).map((e=>({label:e.name,value:e.name})))}signalUpdateCompleted(){this.completeUpdate.next(1)}}).Component=({model:e})=>Hr(e);var Fh=Object.defineProperty,Bh=Object.getOwnPropertySymbols,zh=Object.prototype.hasOwnProperty,Uh=Object.prototype.propertyIsEnumerable,Wh=(e,t,r)=>t in e?Fh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;(class extends Z{constructor(e){super(((e,t)=>{for(var r in t||(t={}))zh.call(t,r)&&Wh(e,r,t[r]);if(Bh)for(var r of Bh(t))Uh.call(t,r)&&Wh(e,r,t[r]);return e})({type:"textbox",value:"",name:""},e)),this._urlSync=new Oe(this,{keys:()=>[this.getKey()]})}getValue(){return this.state.value}setValue(e){e!==this.state.value&&(this.setState({value:e}),this.publishEvent(new Ve(this),!0))}getKey(){return`var-${this.state.name}`}getUrlState(){return{[this.getKey()]:this.state.value}}updateFromUrl(e){const t=e[this.getKey()];"string"==typeof t&&this.setValue(t)}}).Component=({model:e})=>o().createElement(Vh,{model:e});Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var Hh=Object.defineProperty,Gh=Object.getOwnPropertySymbols,qh=Object.prototype.hasOwnProperty,Qh=Object.prototype.propertyIsEnumerable,Xh=(e,t,r)=>t in e?Hh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;(class extends Z{constructor(e){super(((e,t)=>{for(var r in t||(t={}))qh.call(t,r)&&Xh(e,r,t[r]);if(Gh)for(var r of Gh(t))Qh.call(t,r)&&Xh(e,r,t[r]);return e})({type:"interval",value:"",intervals:["1m","10m","30m","1h","6h","12h","1d","7d","14d","30d"],name:"",autoStepCount:30,autoMinInterval:"10s",autoEnabled:!1,refresh:ec.onTimeRangeChanged},e)),this._onChange=e=>{this.setState({value:e.value}),this.publishEvent(new Ve(this),!0)},this._urlSync=new Oe(this,{keys:()=>[this.getKey()]})}getKey(){return`var-${this.state.name}`}getUrlState(){return{[this.getKey()]:this.state.value}}updateFromUrl(e){const t={},r=e[this.getKey()];"string"==typeof r&&(r.startsWith("$__auto_interval_")?t.value=tt:t.value=r),this.setState(t)}getOptionsForSelect(){const{value:e,intervals:t,autoEnabled:r}=this.state;let n=t.map((e=>({value:e,label:e})));return r&&(n=[{value:tt,label:"Auto"},...n]),e&&!n.some((t=>t.value===e))&&n.push({value:e,label:e}),n}getValue(){const{value:e,autoStepCount:t,autoMinInterval:r}=this.state;return e===tt?this.getAutoRefreshInteval(t,r):e}getAutoRefreshInteval(e,t){const n=qu.getTimeRange(this).state.value;return r.rangeUtil.calculateInterval(n,e,t).interval}validateAndUpdate(){const{value:e,intervals:t}=this.state;let r=!1;if(e===tt)r=!0;else if(!e&&t.length>0){const e=t[0];this.setState({value:e}),r=!0}return r&&this.publishEvent(new Ve(this),!0),(0,x.of)({})}}).Component=({model:e})=>{const{key:t,value:r}=e.useState();return o().createElement(s.Select,{id:t,placeholder:"Select value",width:"auto",value:r,tabSelectsValue:!1,options:e.getOptionsForSelect(),onChange:e._onChange})};var Yh,Kh,Zh=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},Jh=(e,t,r)=>(Zh(e,t,"read from private field"),r?r.call(e):t.get(e)),ef=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},tf=(e,t,r,n)=>(Zh(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);class rf extends r.BusEventWithPayload{}rf.type="new-scene-object-added";class nf{constructor(e={},t=i.locationService){this._urlKeyMapper=new Qu,this._options=e,this._locationService=t,this._paramsCache=new af(t)}initSync(e){var t;if(this._subs&&(pe(0,0,null==(t=this._sceneRoot)||t.state.key),this._subs.unsubscribe()),pe(0,0,e.state.key),this._sceneRoot=e,this._subs=new x.Subscription,this._subs.add(e.subscribeToEvent(B,(e=>{this.handleSceneObjectStateChanged(e.payload.changedObject)}))),this._subs.add(e.subscribeToEvent(rf,(e=>{this.handleNewObject(e.payload)}))),this._urlKeyMapper.clear(),this._lastLocation=this._locationService.getLocation(),this.handleNewObject(this._sceneRoot),this._options.updateUrlOnInit){const t=Yu(e);(function(e,t){for(let r in e)if(!Ju(t.getAll(r),e[r]))return!0;return!1})(t,this._paramsCache.getParams())&&this._locationService.partial(t,!0)}}cleanUp(e){this._sceneRoot===e&&(pe(),this._subs&&(this._subs.unsubscribe(),this._subs=void 0,pe(0,0,(this._sceneRoot.state.key,e.state.key))),this._sceneRoot=void 0,this._lastLocation=void 0)}handleNewLocation(e){this._sceneRoot&&this._lastLocation!==e&&(pe(),this._lastLocation=e,Ku(this._sceneRoot,this._paramsCache.getParams(),this._urlKeyMapper))}handleNewObject(e){this._sceneRoot&&Ku(e,this._paramsCache.getParams(),this._urlKeyMapper)}handleSceneObjectStateChanged(e){var t,r;if(!e.urlSync)return;const n=e.urlSync.getUrlState(),a=this._locationService.getSearch(),o={};for(const[t,r]of Object.entries(n)){const n=this._urlKeyMapper.getUniqueKey(t,e);Ju(a.getAll(n),r)||(o[n]=r)}if(Object.keys(o).length>0){const a=!0!==(null==(r=(t=e.urlSync).shouldCreateHistoryStep)?void 0:r.call(t,n));pe(),this._locationService.partial(o,a),this._lastLocation=this._locationService.getLocation()}}getUrlState(e){return Yu(e)}}class af{constructor(e){this.locationService=e,ef(this,Yh,void 0),ef(this,Kh,void 0)}getParams(){const e=this.locationService.getLocation();return Jh(this,Kh)===e||(tf(this,Kh,e),tf(this,Yh,new URLSearchParams(e.search))),Jh(this,Yh)}}function of(e,t={}){const r=(0,h.useLocation)(),a=lt(),[o,i]=(0,n.useState)(!1),s=function(e,t){return(0,n.useMemo)((()=>new nf({updateUrlOnInit:e.updateUrlOnInit,createBrowserHistorySteps:e.createBrowserHistorySteps},t)),[e.updateUrlOnInit,e.createBrowserHistorySteps,t])}(t,a);return(0,n.useEffect)((()=>(s.initSync(e),i(!0),()=>s.cleanUp(e))),[e,s]),(0,n.useEffect)((()=>{const e=a.getLocation(),t=e!==r?e:r;e!==r&&pe(),s.handleNewLocation(t)}),[e,s,r,a]),o}Yh=new WeakMap,Kh=new WeakMap;class sf extends Z{constructor(e){super(e),this.addActivationHandler((()=>{const e=function(e){const t=window.__grafanaSceneContext;return pe(),window.__grafanaSceneContext=e,()=>{window.__grafanaSceneContext===e&&(pe(),window.__grafanaSceneContext=t)}}(this);return()=>{e()}}))}}sf.Component=function({model:e}){const{body:t,controls:r}=e.useState(),n=(0,s.useStyles2)(lf);return o().createElement("div",{className:n.container},r&&o().createElement("div",{className:n.controls},r.map((e=>o().createElement(e.Component,{key:e.state.key,model:e})))),o().createElement("div",{className:n.body},o().createElement(t.Component,{model:t})))};const lf=e=>({container:(0,p.css)({flexGrow:1,display:"flex",gap:e.spacing(2),minHeight:"100%",flexDirection:"column"}),body:(0,p.css)({flexGrow:1,display:"flex",gap:e.spacing(1)}),controls:(0,p.css)({display:"flex",gap:e.spacing(2),alignItems:"flex-end",flexWrap:"wrap"})});function uf(e,t,r){void 0===t&&(t=[]),void 0===r&&(r={loading:!1});var a,o,i=(0,n.useRef)(0),s=(a=(0,n.useRef)(!1),o=(0,n.useCallback)((function(){return a.current}),[]),(0,n.useEffect)((function(){return a.current=!0,function(){a.current=!1}}),[]),o),l=(0,n.useState)(r),u=l[0],c=l[1],d=(0,n.useCallback)((function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=++i.current;return u.loading||c((function(e){return Id(Id({},e),{loading:!0})})),e.apply(void 0,t).then((function(e){return s()&&n===i.current&&c({value:e,loading:!1}),e}),(function(e){return s()&&n===i.current&&c({error:e,loading:!1}),e}))}),t);return[u,d]}(class extends Z{addItem(e){this.setState({items:this.state.items?[...this.state.items,e]:[e]})}setItems(e){this.setState({items:e})}}).Component=function({model:e}){const{items:t=[]}=e.useState(),r=o().useRef(null);(0,n.useEffect)((()=>{r.current&&r.current.focus()}),[]);const a=e=>e.map((e=>{switch(e.type){case"divider":return o().createElement(s.Menu.Divider,{key:e.text});case"group":return o().createElement(s.Menu.Group,{key:e.text,label:e.text},e.subMenu?a(e.subMenu):void 0);default:return o().createElement(s.Menu.Item,{key:e.text,label:e.text,icon:e.iconClassName,childItems:e.subMenu?a(e.subMenu):void 0,url:e.href,onClick:e.onClick,shortcut:e.shortcut,testId:cr.components.Panels.Panel.menuItems(e.text)})}}));return o().createElement(s.Menu,{ref:r},a(t))};(class extends Z{constructor(e={}){super({options:e})}}).Component=function({model:e}){const{options:t}=e.useState(),{data:r}=qu.getData(e).useState(),{from:a,to:l}=qu.getTimeRange(e).useState(),{value:u}=function(e,t){void 0===t&&(t=[]);var r=uf(e,t,{loading:!0}),a=r[0],o=r[1];return(0,n.useEffect)((function(){o()}),[o]),a}((async()=>r?async function(e,t,r,n){var a,o,s,l;const u=null==(a=e.request)?void 0:a.targets;if(!u)return"";const{from:c,to:d}=r,p=null==(o=e.request)?void 0:o.filters,h={__sceneObject:Zr(t)},f=(await Promise.allSettled(u.map((async e=>{var t;const r=await(0,i.getDataSourceSrv)().get(e.datasource);return(null==(t=r.interpolateVariablesInQueries)?void 0:t.call(r,[e],null!=h?h:{},p)[0])||e})))).filter((e=>"fulfilled"===e.status)).map((e=>e.value)).map((e=>{var t;return null!=(t=null==n?void 0:n(e))?t:e})),m=null!=f?f:[];let g=new Set(m.map((e=>{var t;return null==(t=e.datasource)?void 0:t.uid}))).size>1?"-- Mixed --":null==(l=null==(s=m.find((e=>{var t;return!!(null==(t=e.datasource)?void 0:t.uid)})))?void 0:s.datasource)?void 0:l.uid;if((null==m?void 0:m.length)&&g&&c&&d)return`/explore?left=${encodeURIComponent(JSON.stringify({datasource:g,queries:m,range:{from:c,to:d}}))}`;return""}(r,e,{from:a,to:l},t.transform):""),[r,e,a,l]),c=(0,i.useReturnToPrevious)();if(u)return o().createElement(s.LinkButton,{key:"explore",icon:"compass",size:"sm",variant:"secondary",href:u,onClick:()=>{var e;t.returnToPrevious&&c(t.returnToPrevious.title,t.returnToPrevious.href),null==(e=t.onClick)||e.call(t)}},"Explore");return null};function cf(e){return e instanceof dm}(class extends Z{}).Component=function({model:e}){const{body:t}=e.useState(),r=e.parent;if(r&&(n=r,!(n instanceof tm))&&!cf(r))throw new Error("SceneGridItem must be a child of SceneGridLayout or SceneGridRow");var n;if(!t)return null;return o().createElement(t.Component,{model:t})};var df=f(2548),pf=f.n(df);const hf=function(e){(0,n.useEffect)(e,[])};var ff=Object.defineProperty,mf=Object.getOwnPropertySymbols,gf=Object.prototype.hasOwnProperty,vf=Object.prototype.propertyIsEnumerable,bf=(e,t,r)=>t in e?ff(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function yf(){const e=(0,n.useRef)(void 0);return null!=e.current||(e.current=(0,te.uniqueId)()),e.current}const wf=o().forwardRef(((e,t)=>{var r=e,{children:a,onLoad:i,onChange:l,className:u}=r,c=((e,t)=>{var r={};for(var n in e)gf.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&mf)for(var n of mf(e))t.indexOf(n)<0&&vf.call(e,n)&&(r[n]=e[n]);return r})(r,["children","onLoad","onChange","className"]);const d=yf(),{hideEmpty:p}=(0,s.useStyles2)(Sf),[h,f]=(0,n.useState)(!1),[m,g]=(0,n.useState)(!1),v=(0,n.useRef)(null);return(0,n.useImperativeHandle)(t,(()=>v.current)),hf((()=>{wf.addCallback(d,(e=>{!h&&e.isIntersecting&&(f(!0),null==i||i()),g(e.isIntersecting),null==l||l(e.isIntersecting)}));const e=v.current;return e&&wf.observer.observe(e),()=>{e&&wf.observer.unobserve(e),delete wf.callbacks[d],0===Object.keys(wf.callbacks).length&&wf.observer.disconnect()}})),o().createElement("div",((e,t)=>{for(var r in t||(t={}))gf.call(t,r)&&bf(e,r,t[r]);if(mf)for(var r of mf(t))vf.call(t,r)&&bf(e,r,t[r]);return e})({id:d,ref:v,className:`${p} ${u}`},c),!h&&"",h&&("function"==typeof a?a({isInView:m}):a))}));function Sf(){return{hideEmpty:(0,p.css)({"&:empty":{display:"none"}})}}wf.displayName="LazyLoader",wf.callbacks={},wf.addCallback=(e,t)=>wf.callbacks[e]=t,wf.observer=new IntersectionObserver((e=>{for(const t of e)"function"==typeof wf.callbacks[t.target.id]&&wf.callbacks[t.target.id](t)}),{rootMargin:"100px"});var Ef=Object.defineProperty,Of=Object.defineProperties,xf=Object.getOwnPropertyDescriptors,Rf=Object.getOwnPropertySymbols,_f=Object.prototype.hasOwnProperty,Cf=Object.prototype.propertyIsEnumerable,Pf=(e,t,r)=>t in e?Ef(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,If=(e,t)=>{for(var r in t||(t={}))_f.call(t,r)&&Pf(e,r,t[r]);if(Rf)for(var r of Rf(t))Cf.call(t,r)&&Pf(e,r,t[r]);return e},Tf=(e,t)=>Of(e,xf(t)),Df=(e,t)=>{var r={};for(var n in e)_f.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Rf)for(var n of Rf(e))t.indexOf(n)<0&&Cf.call(e,n)&&(r[n]=e[n]);return r};const Af=o().forwardRef(((e,t)=>{var r;const n=e,{grid:a,layoutItem:i,index:s,totalCount:l,isLazy:u,style:c,onLoad:d,onChange:h,children:f}=n,m=Df(n,["grid","layoutItem","index","totalCount","isLazy","style","onLoad","onChange","children"]),g=a.getSceneLayoutChild(i.i),v=null==(r=g.getClassName)?void 0:r.call(g),b=o().createElement(g.Component,{model:g,key:g.state.key});return u?o().createElement(wf,Tf(If({},m),{key:g.state.key,"data-griditem-key":g.state.key,className:(0,p.cx)(v,e.className),style:c,ref:t}),b,f):o().createElement("div",Tf(If({},m),{ref:t,key:g.state.key,"data-griditem-key":g.state.key,className:(0,p.cx)(v,e.className),style:c}),b,f)}));function kf(e,t,r){e.current?t?e.current.classList.add("react-grid-layout--enable-move-animations"):e.current.classList.remove("react-grid-layout--enable-move-animations"):r||setTimeout((()=>kf(e,t,!0)),50)}Af.displayName="GridItemWrapper";const jf=o().forwardRef(((e,t)=>{var r=Df(e,["handleAxis"]);const n=(0,s.useStyles2)(Lf);return o().createElement("div",Tf(If({ref:t},r),{className:`${n} scene-resize-handle`}),o().createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o().createElement("path",{d:"M21 15L15 21M21 8L8 21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))}));function Lf(e){return(0,p.css)({position:"absolute",bottom:0,right:0,zIndex:999,padding:e.spacing(1.5,0,0,1.5),color:e.colors.border.strong,cursor:"se-resize","&:hover":{color:e.colors.text.link},svg:{display:"block"},".react-resizable-hide &":{display:"none"}})}jf.displayName="ResizeHandle";class Mf extends r.BusEventWithPayload{}Mf.type="scene-grid-layout-drag-start";var Nf=Object.defineProperty,$f=Object.defineProperties,Vf=Object.getOwnPropertyDescriptors,Ff=Object.getOwnPropertySymbols,Bf=Object.prototype.hasOwnProperty,zf=Object.prototype.propertyIsEnumerable,Uf=(e,t,r)=>t in e?Nf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function Wf(e,t){const r=t-32,n=Math.max(...e.map((e=>e.h+e.y)))/Math.floor(r/38);return e.map((e=>{return t=((e,t)=>{for(var r in t||(t={}))Bf.call(t,r)&&Uf(e,r,t[r]);if(Ff)for(var r of Ff(t))zf.call(t,r)&&Uf(e,r,t[r]);return e})({},e),r={y:Math.round(e.y/n)||0,h:Math.round(e.h/n)||1},$f(t,Vf(r));var t,r}))}var Hf=Object.defineProperty,Gf=Object.defineProperties,qf=Object.getOwnPropertyDescriptors,Qf=Object.getOwnPropertySymbols,Xf=Object.prototype.hasOwnProperty,Yf=Object.prototype.propertyIsEnumerable,Kf=(e,t,r)=>t in e?Hf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Zf=(e,t)=>{for(var r in t||(t={}))Xf.call(t,r)&&Kf(e,r,t[r]);if(Qf)for(var r of Qf(t))Yf.call(t,r)&&Kf(e,r,t[r]);return e},Jf=(e,t)=>Gf(e,qf(t));const em=class extends Z{constructor(e){super(Jf(Zf({},e),{children:rm(e.children)})),this._skipOnLayoutChange=!1,this._oldLayout=[],this._loadOldLayout=!1,this.onLayoutChange=e=>{if(this._skipOnLayoutChange)this._skipOnLayoutChange=!1;else{this._loadOldLayout&&(e=[...this._oldLayout],this._loadOldLayout=!1);for(const n of e){const e=this.getSceneLayoutChild(n.i),a={x:n.x,y:n.y,width:n.w,height:n.h};t=e.state,r=a,(t.x!==r.x||t.y!==r.y||t.width!==r.width||t.height!==r.height)&&e.setState(Zf({},a))}var t,r;this.setState({children:rm(this.state.children)})}},this.onResizeStop=(e,t,r)=>{this.getSceneLayoutChild(r.i).setState({width:r.w,height:r.h})},this.onDragStart=e=>{this._oldLayout=[...e]},this.onDragStop=(e,t,r)=>{const n=this.getSceneLayoutChild(r.i);e=nm(e);for(let t=0;t<e.length;t++){const r=e[t],n=this.getSceneLayoutChild(r.i),a=n.state;(null==a?void 0:a.x)===r.x&&(null==a?void 0:a.y)===r.y||n.setState({x:r.x,y:r.y})}const a=e.findIndex((e=>e.i===r.i));let o=this.findGridItemSceneParent(e,a-1),i=this.state.children;n instanceof dm&&o instanceof dm&&(this.isRowDropValid(e,r,a)||(this._loadOldLayout=!0),o=this),o!==n.parent&&(i=this.moveChildTo(n,o)),this.setState({children:rm(i)}),this._skipOnLayoutChange=!0}}isDraggable(){var e;return null!=(e=this.state.isDraggable)&&e}getDragClass(){return`grid-drag-handle-${this.state.key}`}getDragClassCancel(){return"grid-drag-cancel"}getDragHooks(){return{onDragStart:(e,t)=>{this.publishEvent(new Mf({evt:e,panel:t}),!0)}}}toggleRow(e){var t,r;if(!e.state.isCollapsed)return e.setState({isCollapsed:!0}),void this.setState({});const n=e.state.children;if(0===n.length)return e.setState({isCollapsed:!1}),void this.setState({});const a=e.state.y,o=(null!=(t=n[0].state.y)?t:a)-(a+1);let i=a;for(const e of n){const t=Zf({},e.state);t.y=null!=(r=t.y)?r:a,t.y-=o,t.y!==e.state.y&&e.setState(t),i=Math.max(i,Number(t.y)+Number(t.height))}const s=i-a-1;for(const t of this.state.children)if(t.state.y>a&&this.pushChildDown(t,s),cf(t)&&t!==e)for(const e of t.state.children)e.state.y>a&&this.pushChildDown(e,s);e.setState({isCollapsed:!1}),this.setState({})}ignoreLayoutChange(e){this._skipOnLayoutChange=e}getSceneLayoutChild(e){for(const t of this.state.children){if(t.state.key===e)return t;if(t instanceof dm)for(const r of t.state.children)if(r.state.key===e)return r}throw new Error("Scene layout child not found for GridItem")}pushChildDown(e,t){e.setState({y:e.state.y+t})}findGridItemSceneParent(e,t){for(let r=t;r>=0;r--){const t=e[r],n=this.getSceneLayoutChild(t.i);if(n instanceof dm)return n.state.isCollapsed?this:n}return this}isRowDropValid(e,t,r){if(e[e.length-1].i===t.i)return!0;const n=this.getSceneLayoutChild(e[r+1].i);return n instanceof dm||n.parent instanceof em}moveChildTo(e,t){const r=e.parent;let n=this.state.children;const a=e.clone({key:e.state.key});if(r instanceof dm){const o=r.clone();if(o.setState({children:o.state.children.filter((t=>t.state.key!==e.state.key))}),n=n.map((e=>e===r?o:e)),t instanceof dm){const e=t.clone();e.setState({children:[...e.state.children,a]}),n=n.map((r=>r===t?e:r))}else n=[...n,a]}else if(!(t instanceof em)){n=n.filter((t=>t.state.key!==e.state.key));const r=t.clone();r.setState({children:[...r.state.children,a]}),n=n.map((e=>e===t?r:e))}return n}toGridCell(e){var t,r;const n=e.state;let a=null!=(t=n.x)?t:0,o=null!=(r=n.y)?r:0;const i=Number.isInteger(Number(n.width))?Number(n.width):4,s=Number.isInteger(Number(n.height))?Number(n.height):4;let l=e.state.isDraggable,u=e.state.isResizable;return e instanceof dm&&(l=!!e.state.isCollapsed,u=!1),{i:e.state.key,x:a,y:o,h:s,w:i,isResizable:u,isDraggable:l}}buildGridLayout(e,t){let r=[];for(const e of this.state.children)if(r.push(this.toGridCell(e)),e instanceof dm&&!e.state.isCollapsed)for(const t of e.state.children)r.push(this.toGridCell(t));return r=nm(r),this.state.UNSAFE_fitPanels&&(r=Wf(r,t)),e<768?(this._skipOnLayoutChange=!0,r.map((e=>Jf(Zf({},e),{w:24})))):(this._skipOnLayoutChange=!1,r)}};let tm=em;function rm(e){return e.forEach((e=>{e instanceof dm&&e.setState({children:rm(e.state.children)})})),[...e].sort(((e,t)=>e.state.y-t.state.y||e.state.x-t.state.x))}function nm(e){return[...e].sort(((e,t)=>e.y-t.y||e.x-t.x))}tm.Component=function({model:e}){const{children:t,isLazy:r,isDraggable:a,isResizable:i}=e.useState(),[s,{width:l,height:u}]=mc(),c=(0,n.useRef)(null);return(0,n.useEffect)((()=>{kf(c,!!a)}),[a]),function(e){if(e.some((e=>void 0===e.state.height||void 0===e.state.width||void 0===e.state.x||void 0===e.state.y)))throw new Error("All children must have a size specified")}(t),o().createElement("div",{ref:s,style:{flex:"1 1 auto",position:"relative",zIndex:1,width:"100%"}},((t,n)=>{if(!t||!n)return null;const s=e.buildGridLayout(t,n);return o().createElement("div",{ref:c,style:{width:`${t}px`,height:"100%"},className:"react-grid-layout"},o().createElement(pf(),{width:t,isDraggable:a&&t>768,isResizable:null!=i&&i,containerPadding:[0,0],useCSSTransforms:!0,margin:[8,8],cols:24,rowHeight:30,draggableHandle:`.grid-drag-handle-${e.state.key}`,draggableCancel:".grid-drag-cancel",layout:s,onDragStart:e.onDragStart,onDragStop:e.onDragStop,onResizeStop:e.onResizeStop,onLayoutChange:e.onLayoutChange,isBounded:!1,resizeHandle:o().createElement(jf,null)},s.map(((t,n)=>o().createElement(Af,{key:t.i,grid:e,layoutItem:t,index:n,isLazy:r,totalCount:s.length})))))})(l,u))};var am=Object.defineProperty,om=Object.defineProperties,im=Object.getOwnPropertyDescriptors,sm=Object.getOwnPropertySymbols,lm=Object.prototype.hasOwnProperty,um=Object.prototype.propertyIsEnumerable,cm=(e,t,r)=>t in e?am(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class dm extends Z{constructor(e){var t;super((t=((e,t)=>{for(var r in t||(t={}))lm.call(t,r)&&cm(e,r,t[r]);if(sm)for(var r of sm(t))um.call(t,r)&&cm(e,r,t[r]);return e})({children:e.children||[],isCollapsible:e.isCollapsible||!0,title:e.title||""},e),om(t,im({x:0,height:1,width:24})))),this._variableDependency=new uu(this,{statePaths:["title"],handleTimeMacros:!0}),this.onCollapseToggle=()=>{this.state.isCollapsible&&this.getGridLayout().toggleRow(this)}}getGridLayout(){const e=this.parent;if(!(e&&e instanceof tm))throw new Error("SceneGridRow must be a child of SceneGridLayout");return e}getUrlState(){return{rowc:this.state.isCollapsed?"1":"0"}}updateFromUrl(e){null!=e.rowc&&e.rowc!==this.getUrlState().rowc&&this.onCollapseToggle()}}dm.Component=function({model:e}){const t=(0,s.useStyles2)(pm),{isCollapsible:r,isCollapsed:n,title:a,actions:i,children:l}=e.useState(),u=e.getGridLayout(),c=u.getDragClass(),d=u.isDraggable(),h=l?l.length:0,f=1===h?"panel":"panels";return o().createElement("div",{className:(0,p.cx)(t.row,n&&t.rowCollapsed)},o().createElement("div",{className:t.rowTitleAndActionsGroup},o().createElement("button",{onClick:e.onCollapseToggle,className:t.rowTitleButton,"aria-label":n?"Expand row":"Collapse row","data-testid":cr.components.DashboardRow.title(qu.interpolate(e,a,void 0,"text"))},r&&o().createElement(s.Icon,{name:n?"angle-right":"angle-down"}),o().createElement("span",{className:t.rowTitle,role:"heading"},qu.interpolate(e,a,void 0,"text"))),o().createElement("span",{className:(0,p.cx)(t.panelCount,n&&t.panelCountCollapsed)},"(",h," ",f,")"),i&&o().createElement("div",{className:t.rowActions},o().createElement(i.Component,{model:i}))),d&&n&&o().createElement("div",{className:(0,p.cx)(t.dragHandle,c)},o().createElement(s.Icon,{name:"draggabledots"})))};const pm=e=>({row:(0,p.css)({width:"100%",height:"30px",display:"flex",justifyContent:"space-between",gap:e.spacing(1)}),rowTitleButton:(0,p.css)({display:"flex",alignItems:"center",cursor:"pointer",background:"transparent",border:"none",minWidth:0,gap:e.spacing(1)}),rowCollapsed:(0,p.css)({borderBottom:`1px solid ${e.colors.border.weak}`}),rowTitle:(0,p.css)({fontSize:e.typography.h5.fontSize,fontWeight:e.typography.fontWeightMedium,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",flexGrow:1,minWidth:0}),collapsedInfo:(0,p.css)({fontSize:e.typography.bodySmall.fontSize,color:e.colors.text.secondary,display:"flex",alignItems:"center",flexGrow:1}),rowTitleAndActionsGroup:(0,p.css)({display:"flex",minWidth:0,"&:hover, &:focus-within":{"& > div":{opacity:1}}}),rowActions:(0,p.css)({display:"flex",whiteSpace:"nowrap",opacity:0,transition:"200ms opacity ease-in 200ms","&:hover, &:focus-within":{opacity:1}}),dragHandle:(0,p.css)({display:"flex",padding:e.spacing(0,1),alignItems:"center",justifyContent:"flex-end",cursor:"move",color:e.colors.text.secondary,"&:hover":{color:e.colors.text.primary}}),panelCount:(0,p.css)({whiteSpace:"nowrap",paddingLeft:e.spacing(2),color:e.colors.text.secondary,fontStyle:"italic",fontSize:e.typography.size.sm,fontWeight:"normal",display:"none",lineHeight:"30px"}),panelCountCollapsed:(0,p.css)({display:"inline-block"})});(class extends Z{constructor(){super(...arguments),this.onToggle=()=>{this.setState({isCollapsed:!this.state.isCollapsed})},this.onRemove=()=>{const e=this.parent;"body"in e.state&&e.setState({body:void 0})}}}).Component=function({model:e}){const{title:t,isCollapsed:r,canCollapse:n,canRemove:a,body:i,controls:l}=e.useState(),u=(0,s.useStyles2)(pm),c=(0,s.useStyles2)(hm),d=(null!=l?l:[]).map((e=>o().createElement(e.Component,{key:e.state.key,model:e})));a&&d.push(o().createElement(s.ToolbarButton,{icon:"times",variant:"default",onClick:e.onRemove,key:"remove-button","aria-label":"Remove scene"}));return o().createElement("div",{className:c.wrapper},o().createElement("div",{className:(0,p.cx)(c.row,r&&c.rowCollapsed)},o().createElement("button",{onClick:e.onToggle,className:u.rowTitleButton,"aria-label":r?"Expand scene":"Collapse scene"},n&&o().createElement(s.Icon,{name:r?"angle-right":"angle-down"}),o().createElement("span",{className:u.rowTitle,role:"heading"},qu.interpolate(e,t,void 0,"text"))),o().createElement("div",{className:c.actions},d)),!r&&o().createElement(i.Component,{model:i}))};const hm=e=>({wrapper:(0,p.css)({display:"flex",flexDirection:"column",flexGrow:1,gap:e.spacing(1)}),row:(0,p.css)({width:"100%",display:"flex",justifyContent:"space-between",gap:e.spacing(1)}),rowCollapsed:(0,p.css)({borderBottom:`1px solid ${e.colors.border.weak}`,paddingBottom:e.spacing(1)}),actions:(0,p.css)({display:"flex",alignItems:"center",gap:e.spacing(1),justifyContent:"flex-end",flexGrow:1})});(class extends Z{constructor(){super(...arguments),this._variableDependency=new uu(this,{statePaths:["text"]})}}).Component=({model:e})=>{const{text:t,fontSize:r=20,align:n="left",key:a,spacing:i}=e.useState(),l=(0,s.useTheme2)(),u=(0,p.css)({fontSize:r,display:"flex",flexGrow:1,alignItems:"center",padding:i?l.spacing(i,0):void 0,justifyContent:n});return o().createElement("div",{className:u,"data-testid":a},qu.interpolate(e,t))};(class extends Z{}).Component=({model:e})=>{const t=e.useState();return o().createElement(s.ToolbarButton,{onClick:t.onClick,icon:t.icon})};(class extends Z{}).Component=({model:e})=>{const t=e.useState();return o().createElement("div",{style:{display:"flex"}},t.label&&o().createElement(pn,{label:t.label}),o().createElement(s.Input,{defaultValue:t.value,width:8,onBlur:t=>{e.state.onChange(parseInt(t.currentTarget.value,10))}}))};const fm=function(e,t,r){if(!pc)return[t,dc,dc];if(!e)throw new Error("useLocalStorage key may not be falsy");var a=r?r.raw?function(e){return e}:r.deserializer:JSON.parse,o=(0,n.useRef)((function(e){try{var n=r?r.raw?String:r.serializer:JSON.stringify,o=localStorage.getItem(e);return null!==o?a(o):(t&&localStorage.setItem(e,n(t)),t)}catch(e){return t}})),i=(0,n.useState)((function(){return o.current(e)})),s=i[0],l=i[1];(0,n.useLayoutEffect)((function(){return l(o.current(e))}),[e]);var u=(0,n.useCallback)((function(t){try{var n="function"==typeof t?t(s):t;if(void 0===n)return;var o=void 0;o=r?r.raw?"string"==typeof n?n:JSON.stringify(n):r.serializer?r.serializer(n):JSON.stringify(n):JSON.stringify(n),localStorage.setItem(e,o),l(a(o))}catch(e){}}),[e,l]),c=(0,n.useCallback)((function(){try{localStorage.removeItem(e),l(void 0)}catch(e){}}),[e,l]);return[s,u,c]};(class extends Z{constructor(){super(...arguments),this.onZoom=()=>{const e=qu.getTimeRange(this),t=function(e,t){const n=e.to.valueOf()-e.from.valueOf(),a=e.to.valueOf()-n/2,o=0===n?3e4:n*t,i=a+o/2,s=a-o/2;return{from:(0,r.toUtc)(s),to:(0,r.toUtc)(i),raw:{from:(0,r.toUtc)(s),to:(0,r.toUtc)(i)}}}(e.state.value,2);e.onTimeRangeChange(t)},this.onChangeFiscalYearStartMonth=e=>{qu.getTimeRange(this).setState({fiscalYearStartMonth:e})},this.toAbsolute=()=>{const e=qu.getTimeRange(this),t=e.state.value,n=(0,r.toUtc)(t.from),a=(0,r.toUtc)(t.to);e.onTimeRangeChange({from:n,to:a,raw:{from:n,to:a}})},this.onMoveBackward=()=>{const e=qu.getTimeRange(this),{state:{value:t}}=e;e.onTimeRangeChange(gm(mm.Backward,t,Date.now()))},this.onMoveForward=()=>{const e=qu.getTimeRange(this),{state:{value:t}}=e;e.onTimeRangeChange(gm(mm.Forward,t,Date.now()))}}}).Component=function({model:e}){const{hidePicker:t,isOnCanvas:n,quickRanges:a}=e.useState(),i=qu.getTimeRange(e),l=i.getTimeZone(),u=i.useState(),[c,d]=fm(vm,[],{raw:!1,serializer:ym,deserializer:bm});if(t)return null;return o().createElement(s.TimeRangePicker,{isOnCanvas:null==n||n,value:u.value,onChange:e=>{var t;t=e,((0,r.isDateTime)(t.raw.from)||(0,r.isDateTime)(t.raw.to))&&d([e,...null!=c?c:[]]),i.onTimeRangeChange(e)},timeZone:l,fiscalYearStartMonth:u.fiscalYearStartMonth,onMoveBackward:e.onMoveBackward,onMoveForward:e.onMoveForward,onZoom:e.onZoom,onChangeTimeZone:i.onTimeZoneChange,onChangeFiscalYearStartMonth:e.onChangeFiscalYearStartMonth,weekStart:u.weekStart,history:c,quickRanges:a})};var mm=(e=>(e[e.Backward=0]="Backward",e[e.Forward=1]="Forward",e))(mm||{});function gm(e,t,n){const a=t.to.valueOf(),o=t.from.valueOf(),i=(a-o)/2;let s,l;0===e?(s=o-i,l=a-i):(s=o+i,l=a+i,l>n&&a<n&&(l=n,s=o));const u=(0,r.toUtc)(s),c=(0,r.toUtc)(l);return{from:u,to:c,raw:{from:u,to:c}}}const vm="grafana.dashboard.timepicker.history";function bm(e){return JSON.parse(e).map((e=>r.rangeUtil.convertRawToRange(e,"utc",void 0,"YYYY-MM-DD HH:mm:ss")))}function ym(e){return JSON.stringify((t=e.map((e=>({from:"string"==typeof e.raw.from?e.raw.from:e.raw.from.toISOString(),to:"string"==typeof e.raw.to?e.raw.to:e.raw.to.toISOString()}))),(0,te.uniqBy)(t,(e=>e.from+e.to)).slice(0,4)));var t}var wm=Object.defineProperty,Sm=Object.defineProperties,Em=Object.getOwnPropertyDescriptors,Om=Object.getOwnPropertySymbols,xm=Object.prototype.hasOwnProperty,Rm=Object.prototype.propertyIsEnumerable,_m=(e,t,r)=>t in e?wm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Cm=["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"];(class extends Z{constructor(e){var t,n,a;var o,l;super((o=((e,t)=>{for(var r in t||(t={}))xm.call(t,r)&&_m(e,r,t[r]);if(Om)for(var r of Om(t))Rm.call(t,r)&&_m(e,r,t[r]);return e})({refresh:""},e),l={autoValue:void 0,autoEnabled:null==(t=e.autoEnabled)||t,autoMinInterval:null!=(n=e.autoMinInterval)?n:i.config.minRefreshInterval,intervals:(null!=(a=e.intervals)?a:Cm).filter((t=>{var n;const a=null!=(n=e.minRefreshInterval)?n:i.config.minRefreshInterval;try{return!a||r.rangeUtil.intervalToMs(t)>=r.rangeUtil.intervalToMs(a)}catch(e){return!1}}))},Sm(o,Em(l)))),this._urlSync=new Oe(this,{keys:["refresh"]}),this._autoRefreshBlocked=!1,this.onRefresh=()=>{const e=qu.getQueryController(this);if(null==e||e.startProfile("SceneRefreshPicker"),null==e?void 0:e.state.isRunning)return void e.cancelAll();const t=qu.getTimeRange(this);this._intervalTimer&&clearInterval(this._intervalTimer),t.onRefresh(),this.setupIntervalTimer()},this.onIntervalChanged=e=>{this.setState({refresh:e}),this.setupIntervalTimer()},this.setupAutoTimeRangeListener=()=>qu.getTimeRange(this).subscribeToState(((e,t)=>{e.from===t.from&&e.to===t.to||this.setupIntervalTimer()})),this.calculateAutoRefreshInterval=()=>{var e;const t=qu.getTimeRange(this),n=null!=(e=null==window?void 0:window.innerWidth)?e:2e3;return r.rangeUtil.calculateInterval(t.state.value,n,this.state.autoMinInterval)},this.setupIntervalTimer=()=>{var e;const t=qu.getTimeRange(this),{refresh:n,intervals:a}=this.state;if((this._intervalTimer||""===n)&&clearInterval(this._intervalTimer),""===n)return;if(n!==s.RefreshPicker.autoOption.value&&a&&!a.includes(n))return;let o;if(null==(e=this._autoTimeRangeListener)||e.unsubscribe(),n===s.RefreshPicker.autoOption.value){const e=this.calculateAutoRefreshInterval();o=e.intervalMs,this._autoTimeRangeListener=this.setupAutoTimeRangeListener(),e.interval!==this.state.autoValue&&this.setState({autoValue:e.interval})}else o=r.rangeUtil.intervalToMs(n);this._intervalTimer=setInterval((()=>{if(this.isTabVisible()){const e=qu.getQueryController(this);null==e||e.startProfile("SceneRefreshPicker"),t.onRefresh()}else this._autoRefreshBlocked=!0}),o)},this.addActivationHandler((()=>{this.setupIntervalTimer();const e=()=>{this._autoRefreshBlocked&&"visible"===document.visibilityState&&(this._autoRefreshBlocked=!1,this.onRefresh())};return document.addEventListener("visibilitychange",e),()=>{var t;this._intervalTimer&&clearInterval(this._intervalTimer),document.removeEventListener("visibilitychange",e),null==(t=this._autoTimeRangeListener)||t.unsubscribe()}}))}getUrlState(){let e=this.state.refresh;return"string"==typeof e&&0!==e.length||(e=void 0),{refresh:e}}updateFromUrl(e){const{intervals:t}=this.state;let n=e.refresh;"string"==typeof n&&function(e){try{return r.rangeUtil.describeInterval(e).count>0}catch(e){return!1}}(n)&&((null==t?void 0:t.includes(n))?this.setState({refresh:n}):this.setState({refresh:t?t[0]:void 0}))}isTabVisible(){return void 0===document.visibilityState||"visible"===document.visibilityState}}).Component=function({model:e}){var t;const{refresh:r,intervals:n,autoEnabled:a,autoValue:i,isOnCanvas:l,primary:u,withText:c}=e.useState(),d=function(e){const t=qu.getQueryController(e);if(!t)return!1;return t.useState().isRunning}(e);let p,h,f=r===(null==(t=s.RefreshPicker.autoOption)?void 0:t.value)?i:c?"Refresh":void 0;d&&(p="Cancel all queries",c&&(f="Cancel"));c&&(h="96px");return o().createElement(s.RefreshPicker,{showAutoInterval:a,value:r,intervals:n,tooltip:p,width:h,text:f,onRefresh:()=>{e.onRefresh()},primary:u,onIntervalChanged:e.onIntervalChanged,isLoading:d,isOnCanvas:null==l||l})};const Pm=e=>`${e}-compare`;var Im=Object.defineProperty,Tm=Object.defineProperties,Dm=Object.getOwnPropertyDescriptors,Am=Object.getOwnPropertySymbols,km=Object.prototype.hasOwnProperty,jm=Object.prototype.propertyIsEnumerable,Lm=(e,t,r)=>t in e?Im(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Mm=(e,t)=>{for(var r in t||(t={}))km.call(t,r)&&Lm(e,r,t[r]);if(Am)for(var r of Am(t))jm.call(t,r)&&Lm(e,r,t[r]);return e},Nm=(e,t)=>Tm(e,Dm(t));const $m="__previousPeriod",Vm="__noPeriod",Fm={label:"Previous period",value:$m},Bm={label:"No comparison",value:Vm},zm=[{label:"Day before",value:"24h"},{label:"Week before",value:"1w"},{label:"Month before",value:"1M"}];(class extends Z{constructor(e){super(Mm({compareOptions:zm},e)),this._urlSync=new Oe(this,{keys:["compareWith"]}),this._onActivate=()=>{const e=qu.getTimeRange(this);this.setState({compareOptions:this.getCompareOptions(e.state.value)}),this._subs.add(e.subscribeToState((e=>{const t=this.getCompareOptions(e.value),r={compareOptions:t};Boolean(this.state.compareWith)&&!t.find((({value:e})=>e===this.state.compareWith))&&(r.compareWith=$m),this.setState(r)})))},this.getCompareOptions=e=>{const t=Math.ceil(e.to.diff(e.from)),n=zm.findIndex((({value:e})=>r.rangeUtil.intervalToMs(e)>=t));return[Bm,Fm,...zm.slice(n).map((({label:e,value:t})=>({label:e,value:t})))]},this.onCompareWithChanged=e=>{e===Vm?this.onClearCompare():this.setState({compareWith:e})},this.onClearCompare=()=>{this.setState({compareWith:void 0})},this.addActivationHandler(this._onActivate)}getExtraQueries(e){const t=[],r=this.getCompareTimeRange(e.range);if(!r)return t;const n=e.targets.filter((e=>!1!==e.timeRangeCompare));return n.length&&t.push({req:Nm(Mm({},e),{targets:n,range:r}),processor:Um}),t}shouldRerun(e,t,r){return e.compareWith!==t.compareWith&&void 0!==r.find((e=>!1!==e.timeRangeCompare))}getCompareTimeRange(e){let t,n;if(this.state.compareWith){if(this.state.compareWith===$m){const a=e.to.diff(e.from);t=(0,r.dateTime)(e.from).subtract(a),n=(0,r.dateTime)(e.to).subtract(a)}else t=(0,r.dateTime)(e.from).subtract(r.rangeUtil.intervalToMs(this.state.compareWith)),n=(0,r.dateTime)(e.to).subtract(r.rangeUtil.intervalToMs(this.state.compareWith));return{from:t,to:n,raw:{from:t,to:n}}}}getUrlState(){return{compareWith:this.state.compareWith}}updateFromUrl(e){if(!e.compareWith)return;const t=Re(e.compareWith);if(t){this.getCompareOptions(qu.getTimeRange(this).state.value).find((({value:e})=>e===t))?this.setState({compareWith:t}):this.setState({compareWith:"__previousPeriod"})}}}).Component=function({model:e}){var t;const r=(0,s.useStyles2)(Wm),{compareWith:n,compareOptions:a}=e.useState(),[i,l]=o().useState(n),u=null!=(t=a.find((({value:e})=>e===i)))?t:Fm,c=a.find((({value:e})=>e===n)),d=Boolean(c),p=()=>{d?(l(n),e.onClearCompare()):d||e.onCompareWithChanged(u.value)};return o().createElement(s.ButtonGroup,null,o().createElement(s.ToolbarButton,{variant:"canvas",tooltip:"Enable time frame comparison",onClick:e=>{e.stopPropagation(),e.preventDefault(),p()}},o().createElement(s.Checkbox,{label:" ",value:d,onClick:p}),"Comparison"),d?o().createElement(s.ButtonSelect,{variant:"canvas",value:c,options:a,onChange:t=>{e.onCompareWithChanged(t.value)}}):o().createElement(s.ToolbarButton,{className:r.previewButton,disabled:!0,variant:"canvas",isOpen:!1},u.label))};const Um=(e,t)=>{const n=t.timeRange.from.diff(e.timeRange.from);return t.series.forEach((e=>{e.refId=Pm(e.refId||""),e.meta=Nm(Mm({},e.meta),{timeCompare:{diffMs:n,isTimeShiftQuery:!0}}),e.fields.forEach((e=>(e.type===r.FieldType.time&&(e.values=e.values.map((e=>n<0?e-n:e+n))),e.config=Nm(Mm({},e.config),{color:{mode:"fixed",fixedColor:i.config.theme.palette.gray60}}),e)))})),(0,x.of)(t)};function Wm(e){return{previewButton:(0,p.css)({"&:disabled":{border:`1px solid ${e.colors.secondary.border}`,color:e.colors.text.disabled,opacity:1}})}}(class extends Z{constructor(e){super(e),this.addActivationHandler((()=>{const e=qu.getData(this);this._subs.add(e.subscribeToState((e=>{var t;(null==(t=e.data)?void 0:t.state)===r.LoadingState.Done&&this.performRepeat(e.data)}))),e.state.data&&this.performRepeat(e.state.data)}))}performRepeat(e){const t=[];for(let r=0;r<e.series.length;r++){const n=this.state.getLayoutChild(e,e.series[r],r);t.push(n)}this.state.body.setState({children:t})}}).Component=({model:e})=>{const{body:t}=e.useState();return o().createElement(t.Component,{model:t})};(class extends Z{constructor(e){super(e),this._variableDependency=new uu(this,{variableNames:[this.state.variableName],onVariableUpdateCompleted:()=>this.performRepeat()}),this.addActivationHandler((()=>this.performRepeat()))}performRepeat(){if(this._variableDependency.hasDependencyInLoadingState())return;const e=qu.lookupVariable(this.state.variableName,this);if(!(e instanceof ut))return void console.error("SceneByVariableRepeater: variable is not a MultiValueVariable");const t=function(e){const{value:t,text:r,options:n}=e.state;if(e.hasAllValue())return n;if(Array.isArray(t)&&Array.isArray(r))return t.map(((e,t)=>({value:e,label:r[t]})));return[{value:t,label:r}]}(e),r=[];for(const e of t){const t=this.state.getLayoutChild(e);r.push(t)}this.state.body.setState({children:r})}}).Component=({model:e})=>{const{body:t}=e.useState();return o().createElement(t.Component,{model:t})};(class extends Z{constructor(){super({}),this._renderBeforeActivation=!0}}).Component=e=>o().createElement("div",{style:{flexGrow:1}});class Hm extends Z{toggleDirection(){this.setState({direction:"row"===this.state.direction?"column":"row"})}isDraggable(){return!1}}Hm.Component=function({model:e,parentState:t}){const{children:r,isHidden:a}=e.useState(),s=function(e,t){return(0,n.useMemo)((()=>{var r,n,a,o,s,l,u,c,d,h;const{direction:f="row",wrap:m}=e,g=i.config.theme2,v={};return t?qm(v,e,t):(v.display="flex",v.flexGrow=1,v.minWidth=e.minWidth,v.minHeight=e.minHeight),v.flexDirection=f,v.gap="8px",v.flexWrap=m||"nowrap",v.alignContent="baseline",v.minWidth=v.minWidth||0,v.minHeight=v.minHeight||0,v[g.breakpoints.down("md")]={flexDirection:null!=(n=null==(r=e.md)?void 0:r.direction)?n:"column",maxWidth:null!=(o=null==(a=e.md)?void 0:a.maxWidth)?o:"unset",maxHeight:null!=(l=null==(s=e.md)?void 0:s.maxHeight)?l:"unset",height:null!=(c=null==(u=e.md)?void 0:u.height)?c:"unset",width:null!=(h=null==(d=e.md)?void 0:d.width)?h:"unset"},(0,p.css)(v)}),[t,e])}(e.state,t);if(a)return null;return o().createElement("div",{className:s},r.map((t=>{const r=t.Component;return o().createElement(r,{key:t.state.key,model:t,parentState:e.state})})))};class Gm extends Z{}function qm(e,t,r){var n,a,o;const i=null!=(n=r.direction)?n:"row",{xSizing:s="fill",ySizing:l="fill"}=t;return e.display="flex",e.position="relative",e.flexDirection=i,"column"===i?(t.height?e.height=t.height:e.flexGrow="fill"===l?1:0,t.width?e.width=t.width:e.alignSelf="fill"===s?"stretch":"flex-start"):(t.height?e.height=t.height:e.alignSelf="fill"===l?"stretch":"flex-start",t.width?e.width=t.width:e.flexGrow="fill"===s?1:0),e.minWidth=t.minWidth,e.maxWidth=t.maxWidth,e.maxHeight=t.maxHeight,e.minHeight=null!=(a=t.minHeight)?a:r.minHeight,e.height=null!=(o=t.height)?o:r.height,e}Gm.Component=function({model:e,parentState:t}){if(!t)throw new Error("SceneFlexItem must be a child of SceneFlexLayout");const{body:r,isHidden:a}=e.useState(),s=function(e,t){return(0,n.useMemo)((()=>{var r,n,a,o,s,l,u,c,d,h;const f=i.config.theme2,m=qm({},e,t);return m[f.breakpoints.down("md")]={maxWidth:null!=(n=null==(r=e.md)?void 0:r.maxWidth)?n:"unset",maxHeight:null!=(o=null==(a=e.md)?void 0:a.maxHeight)?o:"unset",height:null!=(u=null==(s=e.md)?void 0:s.height)?u:null==(l=t.md)?void 0:l.height,width:null!=(h=null==(c=e.md)?void 0:c.width)?h:null==(d=t.md)?void 0:d.width},(0,p.css)(m)}),[e,t])}(e.state,t);if(!r||a)return null;return o().createElement("div",{className:s},o().createElement(r.Component,{model:r}))};var Qm=Object.defineProperty,Xm=Object.getOwnPropertySymbols,Ym=Object.prototype.hasOwnProperty,Km=Object.prototype.propertyIsEnumerable,Zm=(e,t,r)=>t in e?Qm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;(class extends Z{constructor(e){var t,r;super(((e,t)=>{for(var r in t||(t={}))Ym.call(t,r)&&Zm(e,r,t[r]);if(Xm)for(var r of Xm(t))Km.call(t,r)&&Zm(e,r,t[r]);return e})({rowGap:1,columnGap:1,templateColumns:"repeat(auto-fit, minmax(400px, 1fr))",autoRows:null!=(t=e.autoRows)?t:"320px",children:null!=(r=e.children)?r:[]},e))}isDraggable(){return!1}}).Component=function({model:e}){const{children:t,isHidden:r,isLazy:a}=e.useState(),s=(l=e.state,(0,n.useMemo)((()=>{var e,t,r,n,a,o,s,u,c,d,h;const f={},m=i.config.theme2;return f.display="grid",f.gridTemplateColumns=l.templateColumns,f.gridTemplateRows=l.templateRows||"unset",f.gridAutoRows=l.autoRows||"unset",f.rowGap=m.spacing(null!=(e=l.rowGap)?e:1),f.columnGap=m.spacing(null!=(t=l.columnGap)?t:1),f.justifyItems=l.justifyItems||"unset",f.alignItems=l.alignItems||"unset",f.justifyContent=l.justifyContent||"unset",f.flexGrow=1,l.md&&(f[m.breakpoints.down("md")]={gridTemplateRows:null==(r=l.md)?void 0:r.templateRows,gridTemplateColumns:null==(n=l.md)?void 0:n.templateColumns,rowGap:l.md.rowGap?m.spacing(null!=(o=null==(a=l.md)?void 0:a.rowGap)?o:1):void 0,columnGap:l.md.columnGap?m.spacing(null!=(u=null==(s=l.md)?void 0:s.rowGap)?u:1):void 0,justifyItems:null==(c=l.md)?void 0:c.justifyItems,alignItems:null==(d=l.md)?void 0:d.alignItems,justifyContent:null==(h=l.md)?void 0:h.justifyContent}),(0,p.css)(f)}),[l]));var l;if(r)return null;return o().createElement("div",{className:s},t.map((t=>{const r=t.Component;return a?o().createElement(wf,{key:t.state.key,className:s},o().createElement(r,{key:t.state.key,model:t,parentState:e.state})):o().createElement(r,{key:t.state.key,model:t,parentState:e.state})})))};(class extends Z{}).Component=function({model:e,parentState:t}){if(!t)throw new Error("SceneCSSGridItem must be a child of SceneCSSGridLayout");const{body:r,isHidden:a}=e.useState(),i=(s=e.state,(0,n.useMemo)((()=>{const e={};return e.gridColumn=s.gridColumn||"unset",e.gridRow=s.gridRow||"unset",e.position="relative",(0,p.css)(e)}),[s]));var s;if(!r||a)return null;return o().createElement("div",{className:i},o().createElement(r.Component,{model:r}))};var Jm=Object.defineProperty,eg=Object.getOwnPropertySymbols,tg=Object.prototype.hasOwnProperty,rg=Object.prototype.propertyIsEnumerable,ng=(e,t,r)=>t in e?Jm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ag=(e,t)=>{for(var r in t||(t={}))tg.call(t,r)&&ng(e,r,t[r]);if(eg)for(var r of eg(t))rg.call(t,r)&&ng(e,r,t[r]);return e};const og=new Set(["ArrowUp","ArrowDown"]),ig=new Set(["ArrowLeft","ArrowRight"]),sg={row:{dim:"width",axis:"clientX",min:"minWidth",max:"maxWidth"},column:{dim:"height",axis:"clientY",min:"minHeight",max:"maxHeight"}};function lg({direction:e="row",handleSize:t=32,initialSize:r="auto",primaryPaneStyles:a,secondaryPaneStyles:i,onDragFinished:l,children:u}){const c=o().Children.toArray(u),d=(0,n.useRef)(null),h=(0,n.useRef)(null),f=(0,n.useRef)(null),m=(0,n.useRef)(null),g=(0,n.useRef)(null),v=(0,n.useRef)("1fr"),b=(0,n.useRef)(void 0),y=(0,n.useRef)(void 0),w=sg[e].dim,S=sg[e].axis,E=sg[e].min,O=sg[e].max;!function(e,t,r=0,a){const o=(0,te.throttle)(t,r);(0,n.useLayoutEffect)((()=>{if(!e)return;const t=new ResizeObserver(o);return t.observe(e,{box:"device-pixel-content-box"}),()=>t.disconnect()}),a)}(m.current,(e=>{for(const t of e){if(!t.target.isSameNode(m.current))return;const e=h.current.getBoundingClientRect()[w],r=cg(h.current);d.current.ariaValueNow=`${(0,te.clamp)((e-r[E])/(r[O]-r[E])*100,0,100)}`}}),500,[O,E,e,w]);const x=(0,n.useRef)(null),R=(0,n.useCallback)((e=>{v.current=h.current.getBoundingClientRect()[w],g.current=m.current.getBoundingClientRect()[w],x.current=e[S],d.current.setPointerCapture(e.pointerId),b.current=cg(h.current),y.current=void 0}),[w,S]),_=(0,n.useCallback)((e=>{if(null!==x.current&&"1fr"!==v.current){const r=e[S]-x.current,n=b.current,a=(0,te.clamp)(v.current+r,n[E],n[O]),o=a/(g.current-t);h.current.style.flexGrow=`${o}`,f.current.style.flexGrow=""+(1-o);const i=(0,te.clamp)((a-n[E])/(n[O]-n[E])*100,0,100);d.current.ariaValueNow=`${i}`}}),[t,S,E,O]),C=(0,n.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),d.current.releasePointerCapture(e.pointerId),x.current=null,null==l||l(parseFloat(h.current.style.flexGrow))}),[l]),P=(0,n.useRef)(new Set),I=(0,n.useRef)(null),T=(0,n.useCallback)((r=>{var n;if(0===P.current.size)return void(I.current=null);if("1fr"===v.current)return;const a=.3*(r-(null!=(n=I.current)?n:r));let o=0;"row"===e?(P.current.has("ArrowLeft")&&(o-=a),P.current.has("ArrowRight")&&(o+=a)):(P.current.has("ArrowUp")&&(o-=a),P.current.has("ArrowDown")&&(o+=a));const i=b.current,s=h.current.getBoundingClientRect()[w],l=(0,te.clamp)(s+o,i[E],i[O]),u=l/(g.current-t);h.current.style.flexGrow=`${u}`,f.current.style.flexGrow=""+(1-u);const c=(l-i[E])/(i[O]-i[E])*100;d.current.ariaValueNow=`${(0,te.clamp)(c,0,100)}`,I.current=r,window.requestAnimationFrame(T)}),[e,t,E,O,w]),D=(0,n.useCallback)((r=>{if("Enter"===r.key)return void(void 0===y.current?(y.current=h.current.style.flexGrow,h.current.style.flexGrow="0",f.current.style.flexGrow="1"):(h.current.style.flexGrow=y.current,f.current.style.flexGrow=""+(1-parseFloat(y.current)),y.current=void 0));if("Home"===r.key){b.current=cg(h.current),g.current=m.current.getBoundingClientRect()[w];const e=b.current[E]/(g.current-t);return h.current.style.flexGrow=`${e}`,f.current.style.flexGrow=""+(1-e),void(d.current.ariaValueNow="0")}if("End"===r.key){b.current=cg(h.current),g.current=m.current.getBoundingClientRect()[w];const e=b.current[O]/(g.current-t);return h.current.style.flexGrow=`${e}`,f.current.style.flexGrow=""+(1-e),void(d.current.ariaValueNow="100")}if(!("column"===e&&og.has(r.key)||"row"===e&&ig.has(r.key))||P.current.has(r.key))return;y.current=void 0,r.preventDefault(),r.stopPropagation(),v.current=h.current.getBoundingClientRect()[w],g.current=m.current.getBoundingClientRect()[w],b.current=cg(h.current);if(!P.current.has(r.key)){const e=0===P.current.size;P.current.add(r.key),e&&window.requestAnimationFrame(T)}}),[e,T,t,O,w,E]),A=(0,n.useCallback)((t=>{"row"===e&&!ig.has(t.key)||"column"===e&&!og.has(t.key)||(P.current.delete(t.key),null==l||l(parseFloat(h.current.style.flexGrow)))}),[e,l]),k=(0,n.useCallback)((()=>{h.current.style.flexGrow="0.5",f.current.style.flexGrow="0.5";const e=cg(h.current);b.current=e,v.current=h.current.getBoundingClientRect()[w],d.current.ariaValueNow=""+(v.current-e[E])/(e[O]-e[E])*100}),[O,w,E]),j=(0,n.useCallback)((()=>{P.current.size>0&&(P.current.clear(),x.current=null,null==l||l(parseFloat(h.current.style.flexGrow)))}),[l]),L=(0,s.useStyles2)(ug),M=yf(),N=2===c.length?"visible":"hidden";return o().createElement("div",{ref:m,className:L.container,style:{flexDirection:e}},o().createElement("div",{ref:h,className:L.panel,style:ag({flexGrow:"auto"===r?.5:(0,te.clamp)(r,0,1),[E]:"min-content"},a),id:`start-panel-${M}`},c[0]),c[1]&&o().createElement(o().Fragment,null,o().createElement("div",{ref:d,style:{[w]:`${t}px`},className:(0,p.cx)(L.handle,{[L.handleHorizontal]:"column"===e}),onPointerUp:C,onPointerDown:R,onPointerMove:_,onKeyDown:D,onKeyUp:A,onDoubleClick:k,onBlur:j,role:"separator","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":50,"aria-controls":`start-panel-${M}`,"aria-label":"Pane resize widget",tabIndex:0}),o().createElement("div",{ref:f,className:L.panel,style:ag({flexGrow:"auto"===r?.5:(0,te.clamp)(1-r,0,1),[E]:"min-content",visibility:`${N}`},i),id:`end-panel-${M}`},c[1])))}function ug(e){return{handle:(0,p.css)({cursor:"col-resize",position:"relative",flexShrink:0,userSelect:"none","&::before":{content:'""',position:"absolute",backgroundColor:e.colors.primary.main,left:"50%",transform:"translate(-50%)",top:0,height:"100%",width:"1px",opacity:0,transition:"opacity ease-in-out 0.2s"},"&::after":{content:'""',width:"4px",borderRadius:"4px",backgroundColor:e.colors.border.weak,transition:"background-color ease-in-out 0.2s",height:"50%",top:"calc(50% - (50%) / 2)",transform:"translateX(-50%)",position:"absolute",left:"50%"},"&:hover, &:focus-visible":{outline:"none","&::before":{opacity:1},"&::after":{backgroundColor:e.colors.primary.main}}}),handleHorizontal:(0,p.css)({cursor:"row-resize","&::before":{left:"inherit",transform:"translateY(-50%)",top:"50%",height:"1px",width:"100%"},"&::after":{width:"50%",height:"4px",top:"50%",transform:"translateY(-50%)",left:"calc(50% - (50%) / 2)"}}),container:(0,p.css)({display:"flex",width:"100%",flexGrow:1,overflow:"hidden"}),panel:(0,p.css)({display:"flex",position:"relative",flexBasis:0})}}function cg(e){if(null===e)return;const t=document.body.style.overflow,r=e.style.width,n=e.style.height,a=e.style.flexGrow;document.body.style.overflow="hidden",e.style.flexGrow="0";const{width:o,height:i}=e.getBoundingClientRect();e.style.flexGrow="100";const{width:s,height:l}=e.getBoundingClientRect();return document.body.style.overflow=t,e.style.width=r,e.style.height=n,e.style.flexGrow=a,{minWidth:o,maxWidth:s,minHeight:i,maxHeight:l}}(class extends Z{toggleDirection(){this.setState({direction:"row"===this.state.direction?"column":"row"})}isDraggable(){return!1}}).Component=function({model:e}){const{primary:t,secondary:r,direction:n,isHidden:a,initialSize:i,primaryPaneStyles:s,secondaryPaneStyles:l}=e.useState();if(a)return null;const u=t.Component,c=null==r?void 0:r.Component;let d=r?i:1;return o().createElement(lg,{direction:n,initialSize:null!=d?d:.5,primaryPaneStyles:s,secondaryPaneStyles:l},o().createElement(u,{key:t.state.key,model:t,parentState:e.state}),c&&r&&o().createElement(c,{key:r.state.key,model:r,parentState:e.state}))};(class extends Z{constructor(){super(...arguments),this._renderBeforeActivation=!0}enrichDataRequest(){return{app:this.state.name||"app"}}}).Component=({model:e})=>{const{pages:t,scopesBridge:r}=e.useState();return o().createElement(o().Fragment,null,r&&o().createElement(r.Component,{model:r}),o().createElement(dg.Provider,{value:e},o().createElement(h.Routes,null,t.map((e=>o().createElement(h.Route,{key:e.state.url,path:e.state.routePath,element:o().createElement(e.Component,{model:e})}))))))};const dg=(0,n.createContext)(null);var pg=Object.defineProperty,hg=Object.getOwnPropertySymbols,fg=Object.prototype.hasOwnProperty,mg=Object.prototype.propertyIsEnumerable,gg=(e,t,r)=>t in e?pg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class vg extends Z{}function bg({node:e}){const t=e.useState(),r=(0,s.useStyles2)(yg);return o().createElement("div",{className:r.container},Object.keys(t).map((n=>o().createElement("div",{className:r.row,key:n},o().createElement("div",{className:r.keyName},n),o().createElement("div",{className:r.value},function(e,t,r){if(null===t)return"null";switch(typeof t){case"number":return o().createElement(s.Input,{type:"number",defaultValue:t,onBlur:t=>r.setState({[e]:t.currentTarget.valueAsNumber})});case"string":return o().createElement(s.Input,{type:"text",defaultValue:t,onBlur:t=>r.setState({[e]:t.currentTarget.value})});case"object":return Rt(t)?t.constructor.name:(0,te.isPlainObject)(t)||(0,te.isArray)(t)?o().createElement(s.JSONFormatter,{json:t,open:0}):String(t);default:return typeof t}}(n,t[n],e))))))}function yg(e){return{container:(0,p.css)({flexGrow:1,display:"flex",gap:e.spacing(.5),flexDirection:"column"}),row:(0,p.css)({display:"flex",gap:e.spacing(2)}),keyName:(0,p.css)({display:"flex",flexGrow:"0",width:120,alignItems:"center",height:e.spacing(e.components.height.md)}),value:(0,p.css)({flexGrow:1,minHeight:e.spacing(e.components.height.md),display:"flex",alignItems:"center"})}}function wg({node:e,selectedObject:t,onSelect:r}){const n=(0,s.useStyles2)(Sg),a=[],i=e===t;return e.forEachChild((e=>{a.push(o().createElement(wg,{node:e,key:e.state.key,selectedObject:t,onSelect:r}))})),o().createElement("div",{className:n.container},o().createElement("div",{className:(0,p.cx)(n.name,i&&n.selected),onClick:()=>r(e)},e.constructor.name),o().createElement("div",{className:n.children},a))}function Sg(e){return{container:(0,p.css)({flexGrow:1,display:"flex",gap:e.spacing(.5),flexDirection:"column"}),name:(0,p.css)({flexGrow:1,display:"flex",gap:e.spacing(1),fontSize:e.typography.bodySmall.fontSize,cursor:"pointer",padding:e.spacing(0,1),borderRadius:e.shape.borderRadius(2),position:"relative","&:hover":{background:e.colors.background.secondary}}),selected:(0,p.css)({"&::before":{display:"block",content:"' '",position:"absolute",left:0,width:4,bottom:2,top:2,borderRadius:e.shape.radius.default,backgroundImage:e.colors.gradients.brandVertical}}),children:(0,p.css)({flexGrow:1,display:"flex",flexDirection:"column",paddingLeft:e.spacing(1)})}}function Eg({scene:e}){const t=(0,s.useStyles2)(Og),[r,a]=(0,n.useState)(!1),[i,l]=(0,n.useState)();return o().createElement(o().Fragment,null,o().createElement(s.ToolbarButton,{variant:"canvas",icon:"bug",onClick:()=>a(!0)}),r&&o().createElement(s.Drawer,{title:"Scene debugger",onClose:()=>a(!1),size:"lg"},o().createElement("div",{className:t.panes},o().createElement("div",{className:t.pane1},o().createElement("div",{className:t.paneHeading},"Scene graph"),o().createElement(s.CustomScrollbar,{autoHeightMin:"100%"},o().createElement("div",{className:t.treeWrapper},o().createElement(wg,{node:e,selectedObject:i,onSelect:l})))),o().createElement("div",{className:t.pane2},o().createElement("div",{className:t.paneHeading},"Object details"),i&&o().createElement(bg,{node:i})))))}function Og(e){return{panes:(0,p.css)({flexGrow:1,display:"flex",height:"100%",flexDirection:"row",marginTop:e.spacing(-2)}),pane1:(0,p.css)({flexGrow:0,display:"flex",height:"100%",flexDirection:"column",borderRight:`1px solid ${e.colors.border.weak}`}),pane2:(0,p.css)({flexGrow:1,display:"flex",minHeight:"100%",flexDirection:"column",paddingLeft:e.spacing(2)}),treeWrapper:(0,p.css)({paddingRight:e.spacing(2),height:"100%",marginLeft:e.spacing(-1)}),paneHeading:(0,p.css)({padding:e.spacing(1,0),fontWeight:e.typography.fontWeightMedium})}}function xg({page:e}){const t=E(e.state.url),r=function(e){if(e.parent instanceof Cg)return e.parent;return e}(e),a=r.useState(),s=function(){const e=(0,h.useLocation)();return(0,i.locationSearchToObject)(e.search||"")}(),l=e.getScene(t),u=(0,n.useContext)(dg),c=a.initializedScene===l,{layout:d}=e.state,p=lt();(0,n.useLayoutEffect)((()=>{c||r.initializeScene(l)}),[l,r,c]),(0,n.useEffect)((()=>()=>r.setState({initializedScene:void 0})),[r]);const f=of(r,null==u?void 0:u.state.urlSyncOptions);if(!c&&!f)return null;const m={text:a.title,img:a.titleImg,icon:a.titleIcon,url:S(a.url,p.getSearchObject(),a.preserveUrlKeys),hideFromBreadcrumbs:a.hideFromBreadcrumbs,parentItem:Rg(a.getParentPage?a.getParentPage():r.parent,s,p.getSearchObject())};a.tabs&&(m.children=a.tabs.map((t=>({text:t.state.title,icon:t.state.titleIcon,tabSuffix:t.state.tabSuffix,active:e===t,url:S(t.state.url,p.getSearchObject(),t.state.preserveUrlKeys),parentItem:m}))));let g=[];return a.controls&&(g=a.controls.map((e=>o().createElement(e.Component,{model:e,key:e.state.key})))),s["scene-debugger"]&&g.push(o().createElement(Eg,{scene:r,key:"scene-debugger"})),o().createElement(i.PluginPage,{layout:d,pageNav:m,actions:g,renderTitle:a.renderTitle,subTitle:a.subTitle},o().createElement(l.Component,{model:l}))}function Rg(e,t,r){if(e instanceof Cg)return{text:e.state.title,url:S(e.state.url,r,e.state.preserveUrlKeys),hideFromBreadcrumbs:e.state.hideFromBreadcrumbs,parentItem:Rg(e.state.getParentPage?e.state.getParentPage():e.parent,t,r)}}function _g({drilldown:e,parent:t}){const r=E(e.routePath),n=t.getDrilldownPage(e,r);return o().createElement(n.Component,{model:n})}vg.Component=({model:e})=>{const{component:t,props:r,reactNode:n}=e.useState();return t?o().createElement(t,((e,t)=>{for(var r in t||(t={}))fg.call(t,r)&&gg(e,r,t[r]);if(hg)for(var r of hg(t))mg.call(t,r)&&gg(e,r,t[r]);return e})({},r)):n||null};class Cg extends Z{constructor(e){super(e),this._sceneCache=new Map,this._drilldownCache=new Map,this._activationHandler=()=>{if(this.state.useScopes){if(this._scopesBridge=qu.getScopesBridge(this),!this._scopesBridge)throw new Error("Use of scopes is enabled but no scopes bridge found");return this._scopesBridge.setEnabled(!0),()=>{var e;null==(e=this._scopesBridge)||e.setEnabled(!1)}}},this.addActivationHandler(this._activationHandler)}initializeScene(e){this.setState({initializedScene:e})}getScene(e){let t=this._sceneCache.get(e.url);if(t)return t;if(!this.state.getScene)throw new Error("Missing getScene on SceneAppPage "+this.state.title);return t=this.state.getScene(e),this._sceneCache.set(e.url,t),t}getDrilldownPage(e,t){let r=this._drilldownCache.get(t.url);return r||(r=e.getPage(t,this),this._drilldownCache.set(t.url,r),r)}enrichDataRequest(e){if(this.state.getParentPage)return this.state.getParentPage().enrichDataRequest(e);if(!this.parent)return null;const t=this.getRoot();return _t(t)?t.enrichDataRequest(e):null}}Cg.Component=function({model:e}){const{tabs:t,drilldowns:r}=e.useState(),n=[];if(n.push(function(e){var t,r,n;return o().createElement(h.Route,{key:"fallback route",path:"*",element:o().createElement(xg,{page:null!=(n=null==(r=(t=e.state).getFallbackPage)?void 0:r.call(t))?n:new Cg({url:"",title:"Not found",subTitle:"The url did not match any page",routePath:"*",getScene:()=>new sf({body:new Hm({direction:"column",children:[new Gm({body:new vg({component:()=>o().createElement("div",{"data-testid":"default-fallback-content"},"If you found your way here using a link then there might be a bug in this application.")})})]})})})})})}(e)),t&&t.length>0)for(let r=0;r<t.length;r++){const a=t[r];if(0===r&&n.push(o().createElement(h.Route,{key:e.state.routePath,path:"",element:o().createElement(a.Component,{model:a})})),n.push(o().createElement(h.Route,{key:a.state.url,path:a.state.routePath,element:o().createElement(a.Component,{model:a})})),a.state.drilldowns)for(const e of a.state.drilldowns)n.push(o().createElement(h.Route,{key:e.routePath,path:e.routePath,element:o().createElement(_g,{drilldown:e,parent:a})}))}if(r)for(const t of r)n.push(o().createElement(h.Route,{key:t.routePath,path:t.routePath,Component:()=>o().createElement(_g,{drilldown:t,parent:e})}));t||n.push(o().createElement(h.Route,{key:"home route",path:"/",element:o().createElement(xg,{page:e})}));return o().createElement(h.Routes,null,n)};var Pg=(e=>(e.Always="always",e.Auto="auto",e.Never="never",e))(Pg||{}),Ig=(e=>(e.Hue="hue",e.None="none",e.Opacity="opacity",e.Scheme="scheme",e))(Ig||{}),Tg=(e=>(e.None="none",e.Normal="normal",e.Percent="percent",e))(Tg||{}),Dg=(e=>(e.Auto="auto",e.Horizontal="horizontal",e.Vertical="vertical",e))(Dg||{}),Ag=(e=>(e.Background="background",e.BackgroundSolid="background_solid",e.None="none",e.Value="value",e))(Ag||{}),kg=(e=>(e.Area="area",e.Line="line",e.None="none",e))(kg||{}),jg=(e=>(e.Auto="auto",e.Center="center",e))(jg||{}),Lg=(e=>(e.Auto="auto",e.Name="name",e.None="none",e.Value="value",e.ValueAndName="value_and_name",e))(Lg||{}),Mg=(e=>(e.Inverted="inverted",e.SameAsValue="same_as_value",e.Standard="standard",e))(Mg||{}),Ng=(e=>(e.Multi="multi",e.None="none",e.Single="single",e))(Ng||{}),$g=(e=>(e.Basic="basic",e.Gradient="gradient",e.Lcd="lcd",e))($g||{}),Vg=(e=>(e.Color="color",e.Hidden="hidden",e.Text="text",e))(Vg||{}),Fg=(e=>(e.Auto="auto",e.Hidden="hidden",e.Left="left",e.Top="top",e))(Fg||{}),Bg=(e=>(e.Auto="auto",e.Manual="manual",e))(Bg||{}),zg=(e=>(e.Auto="auto",e.Lg="lg",e.Md="md",e.Sm="sm",e))(zg||{});const Ug={barRadius:0,barWidth:.97,fullHighlight:!1,groupWidth:.7,orientation:Dg.Auto,showValue:Pg.Auto,stacking:Tg.None,xTickLabelRotation:0,xTickLabelSpacing:0},Wg={fillOpacity:80,gradientMode:Ig.None,lineWidth:1},Hg={displayMode:$g.Gradient,maxVizHeight:300,minVizHeight:16,minVizWidth:8,namePlacement:Fg.Auto,showUnfilled:!0,sizing:Bg.Auto,valueMode:Vg.Color},Gg={selectedSeries:0},qg={minVizHeight:75,minVizWidth:75,showThresholdLabels:!1,showThresholdMarkers:!0,sizing:Bg.Auto},Qg={layers:[]};const Xg={calculate:!1,cellGap:1,cellValues:{},color:{scheme:"Oranges",fill:"dark-orange",reverse:!1,exponent:.5,steps:64},exemplars:{color:"rgba(255,0,255,0.7)"},filterValues:{le:1e-9},legend:{show:!0},selectionMode:"x",showValue:Pg.Auto,tooltip:{mode:Ng.Single,yHistogram:!1,showColorScale:!1}},Yg={bucketCount:30,bucketOffset:0},Kg={fillOpacity:80,gradientMode:Ig.None,lineWidth:1},Zg={showImage:!0};const Jg={displayLabels:[]},ev={colorMode:Ag.Value,graphMode:kg.Area,justifyMode:jg.Auto,percentChangeColorMode:Mg.Standard,showPercentChange:!1,textMode:Lg.Auto,wideLayout:!0},tv={alignValue:"left",mergeValues:!0,perPage:20,rowHeight:.9,showValue:Pg.Auto},rv={fillOpacity:70,lineWidth:0},nv={colWidth:.9,rowHeight:.9,showValue:Pg.Auto},av={fillOpacity:70,lineWidth:1},ov={cellHeight:zg.Sm,footer:{show:!1,countRows:!1,reducer:[]},frameIndex:0,showHeader:!0,showTypeIcons:!1,sortBy:[]};const iv={content:"# Title\n\nFor markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)",mode:"markdown"};const sv={fillOpacity:50,show:"points"},lv={series:[]};class uv{constructor(){this._overrides=[]}overrideColor(e){return this._overrides[this._overrides.length-1].properties.push({id:"color",value:e}),this}overrideDecimals(e){return this._overrides[this._overrides.length-1].properties.push({id:"decimals",value:e}),this}overrideDisplayName(e){return this._overrides[this._overrides.length-1].properties.push({id:"displayName",value:e}),this}overrideFilterable(e){return this._overrides[this._overrides.length-1].properties.push({id:"filterable",value:e}),this}overrideLinks(e){return this._overrides[this._overrides.length-1].properties.push({id:"links",value:e}),this}overrideMappings(e){return this._overrides[this._overrides.length-1].properties.push({id:"mappings",value:e}),this}overrideMax(e){return this._overrides[this._overrides.length-1].properties.push({id:"max",value:e}),this}overrideMin(e){return this._overrides[this._overrides.length-1].properties.push({id:"min",value:e}),this}overrideNoValue(e){return this._overrides[this._overrides.length-1].properties.push({id:"noValue",value:e}),this}overrideThresholds(e){return this._overrides[this._overrides.length-1].properties.push({id:"thresholds",value:e}),this}overrideUnit(e){return this._overrides[this._overrides.length-1].properties.push({id:"unit",value:e}),this}}class cv extends uv{match(e){return this._overrides.push({matcher:e,properties:[]}),this}matchFieldsWithName(e){return this._overrides.push({matcher:{id:r.FieldMatcherID.byName,options:e},properties:[]}),this}matchFieldsWithNameByRegex(e){return this._overrides.push({matcher:{id:r.FieldMatcherID.byRegexp,options:e},properties:[]}),this}matchFieldsByType(e){return this._overrides.push({matcher:{id:r.FieldMatcherID.byType,options:e},properties:[]}),this}matchFieldsByQuery(e){return this._overrides.push({matcher:{id:r.FieldMatcherID.byFrameRefID,options:e},properties:[]}),this}matchFieldsByValue(e){return this._overrides.push({matcher:{id:r.FieldMatcherID.byValue,options:e},properties:[]}),this}matchComparisonQuery(e){return this.matchFieldsByQuery(Pm(e))}overrideCustomFieldConfig(e,t){const r=`custom.${String(e)}`;return this._overrides[this._overrides.length-1].properties.push({id:r,value:t}),this}build(){return this._overrides}}var dv=Object.defineProperty,pv=Object.defineProperties,hv=Object.getOwnPropertyDescriptors,fv=Object.getOwnPropertySymbols,mv=Object.prototype.hasOwnProperty,gv=Object.prototype.propertyIsEnumerable,vv=(e,t,r)=>t in e?dv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,bv=(e,t)=>{for(var r in t||(t={}))mv.call(t,r)&&vv(e,r,t[r]);if(fv)for(var r of fv(t))gv.call(t,r)&&vv(e,r,t[r]);return e},yv=(e,t)=>pv(e,hv(t));class wv{constructor(e){this.defaultFieldConfig=e,this._fieldConfig={defaults:{},overrides:[]},this._overridesBuilder=new cv,this.setDefaults()}setDefaults(){const e={defaults:{custom:this.defaultFieldConfig?(0,te.cloneDeep)(this.defaultFieldConfig()):{}},overrides:[]};this._fieldConfig=e}setColor(e){return this.setFieldConfigDefaults("color",e)}setDecimals(e){return this.setFieldConfigDefaults("decimals",e)}setDisplayName(e){return this.setFieldConfigDefaults("displayName",e)}setFilterable(e){return this.setFieldConfigDefaults("filterable",e)}setLinks(e){return this.setFieldConfigDefaults("links",e)}setMappings(e){return this.setFieldConfigDefaults("mappings",e)}setMax(e){return this.setFieldConfigDefaults("max",e)}setMin(e){return this.setFieldConfigDefaults("min",e)}setNoValue(e){return this.setFieldConfigDefaults("noValue",e)}setThresholds(e){return this.setFieldConfigDefaults("thresholds",e)}setUnit(e){return this.setFieldConfigDefaults("unit",e)}setCustomFieldConfig(e,t){return this._fieldConfig.defaults=yv(bv({},this._fieldConfig.defaults),{custom:(0,te.merge)(this._fieldConfig.defaults.custom,{[e]:t})}),this}setOverrides(e){return e(this._overridesBuilder),this}setFieldConfigDefaults(e,t){return this._fieldConfig.defaults=yv(bv({},this._fieldConfig.defaults),{[e]:t}),this}build(){return{defaults:this._fieldConfig.defaults,overrides:this._overridesBuilder.build()}}}class Sv{constructor(e){this.defaultOptions=e,this._options={},this.setDefaults()}setDefaults(){this._options=this.defaultOptions?(0,te.cloneDeep)(this.defaultOptions()):{}}setOption(e,t){return this._options=(0,te.merge)(this._options,{[e]:t}),this}build(){return this._options}}var Ev=Object.defineProperty,Ov=Object.defineProperties,xv=Object.getOwnPropertyDescriptors,Rv=Object.getOwnPropertySymbols,_v=Object.prototype.hasOwnProperty,Cv=Object.prototype.propertyIsEnumerable,Pv=(e,t,r)=>t in e?Ev(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class Iv{constructor(e,t,r,n){this._state={},this._state.title="",this._state.description="",this._state.displayMode="default",this._state.hoverHeader=!1,this._state.pluginId=e,this._state.pluginVersion=t,this._fieldConfigBuilder=new wv(n),this._panelOptionsBuilder=new Sv(r)}setTitle(e){return this._state.title=e,this}setDescription(e){return this._state.description=e,this}setDisplayMode(e){return this._state.displayMode=e,this}setHoverHeader(e){return this._state.hoverHeader=e,this}setShowMenuAlways(e){return this._state.showMenuAlways=e,this}setMenu(e){return this._state.menu=e,this}setHeaderActions(e){return this._state.headerActions=e,this}setCollapsible(e){return this._state.collapsible=e,this}setCollapsed(e){return this._state.collapsed=e,this}setColor(e){return this._fieldConfigBuilder.setColor(e),this}setDecimals(e){return this._fieldConfigBuilder.setDecimals(e),this}setDisplayName(e){return this._fieldConfigBuilder.setDisplayName(e),this}setFilterable(e){return this._fieldConfigBuilder.setFilterable(e),this}setLinks(e){return this._fieldConfigBuilder.setLinks(e),this}setMappings(e){return this._fieldConfigBuilder.setMappings(e),this}setMax(e){return this._fieldConfigBuilder.setMax(e),this}setMin(e){return this._fieldConfigBuilder.setMin(e),this}setNoValue(e){return this._fieldConfigBuilder.setNoValue(e),this}setThresholds(e){return this._fieldConfigBuilder.setThresholds(e),this}setUnit(e){return this._fieldConfigBuilder.setUnit(e),this}setCustomFieldConfig(e,t){return this._fieldConfigBuilder.setCustomFieldConfig(e,t),this}setOverrides(e){return this._fieldConfigBuilder.setOverrides(e),this}setOption(e,t){return this._panelOptionsBuilder.setOption(e,t),this}setData(e){return this._state.$data=e,this}setTimeRange(e){return this._state.$timeRange=e,this}setVariables(e){return this._state.$variables=e,this}setBehaviors(e){return this._state.$behaviors=e,this}setSeriesLimit(e){return this._state.seriesLimit=e,this}applyMixin(e){return e(this),this}build(){const e=new hd((t=((e,t)=>{for(var r in t||(t={}))_v.call(t,r)&&Pv(e,r,t[r]);if(Rv)for(var r of Rv(t))Cv.call(t,r)&&Pv(e,r,t[r]);return e})({},this._state),r={options:this._panelOptionsBuilder.build(),fieldConfig:this._fieldConfigBuilder.build()},Ov(t,xv(r))));var t,r;return e}}const Tv={barchart:()=>new Iv("barchart","10.0.0",(()=>Ug),(()=>Wg)),bargauge:()=>new Iv("bargauge","10.0.0",(()=>Hg)),datagrid:()=>new Iv("datagrid","10.0.0",(()=>Gg)),flamegraph:()=>new Iv("flamegraph","10.0.0"),gauge:()=>new Iv("gauge","10.0.0",(()=>qg)),geomap:()=>new Iv("geomap","10.0.0",(()=>Qg)),heatmap:()=>new Iv("heatmap","10.0.0",(()=>Xg)),histogram:()=>new Iv("histogram","10.0.0",(()=>Yg),(()=>Kg)),logs:()=>new Iv("logs","10.0.0"),news:()=>new Iv("news","10.0.0",(()=>Zg)),nodegraph:()=>new Iv("nodeGraph","10.0.0"),piechart:()=>new Iv("piechart","10.0.0",(()=>Jg)),stat:()=>new Iv("stat","10.0.0",(()=>ev)),statetimeline:()=>new Iv("state-timeline","10.0.0",(()=>tv),(()=>rv)),statushistory:()=>new Iv("status-history","10.0.0",(()=>nv),(()=>av)),table:()=>new Iv("table","10.0.0",(()=>ov)),text:()=>new Iv("text","10.0.0",(()=>iv)),timeseries:()=>new Iv("timeseries","10.0.0"),trend:()=>new Iv("trend","10.0.0"),traces:()=>new Iv("traces","10.0.0"),xychart:()=>new Iv("xychart","10.0.0",(()=>lv),(()=>sv))};const Dv={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Av;const kv=new Uint8Array(16);const jv=[];for(let e=0;e<256;++e)jv.push((e+256).toString(16).slice(1));function Lv(e,t=0){return(jv[e[t+0]]+jv[e[t+1]]+jv[e[t+2]]+jv[e[t+3]]+"-"+jv[e[t+4]]+jv[e[t+5]]+"-"+jv[e[t+6]]+jv[e[t+7]]+"-"+jv[e[t+8]]+jv[e[t+9]]+"-"+jv[e[t+10]]+jv[e[t+11]]+jv[e[t+12]]+jv[e[t+13]]+jv[e[t+14]]+jv[e[t+15]]).toLowerCase()}const Mv=function(e,t,r){if(Dv.randomUUID&&!t&&!e)return Dv.randomUUID();const n=(e=e||{}).random??e.rng?.()??function(){if(!Av){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Av=crypto.getRandomValues.bind(crypto)}return Av(kv)}();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){if((r=r||0)<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=n[e];return t}return Lv(n)};var Nv=f(8449);const $v="grafana-llm-app";new Nv.SemVer("0.2.0");const Vv="llm/v1/chat/completions";var Fv=(e=>(e.BASE="base",e.LARGE="large",e))(Fv||{});function Bv(e){return"error"in e}function zv(e){const t={scope:r.LiveChannelScope.Plugin,namespace:$v,path:Vv+"/"+Mv(),data:e};var n,a,o,s,l,u;return(0,i.getGrafanaLiveSrv)().getStream(t).pipe((n=e=>(0,r.isLiveChannelMessageEvent)(e),_d((function(e,t){var r=0;e.subscribe(op(t,(function(e){return n.call(a,e,r++)&&t.next(e)})))})))).pipe((u=Rd(o=e=>{if(Bv(e.message))throw new Error(e.message.error)})||s||l?{next:o,error:s,complete:l}:o)?_d((function(e,t){var r;null===(r=u.subscribe)||void 0===r||r.call(u);var n=!0;e.subscribe(op(t,(function(e){var r;null===(r=u.next)||void 0===r||r.call(u,e),t.next(e)}),(function(){var e;n=!1,null===(e=u.complete)||void 0===e||e.call(u),t.complete()}),(function(e){var r;n=!1,null===(r=u.error)||void 0===r||r.call(u,e),t.error(e)}),(function(){var e,t;n&&(null===(e=u.unsubscribe)||void 0===e||e.call(u)),null===(t=u.finalize)||void 0===t||t.call(u)})))})):up,function(e,t){return void 0===t&&(t=!1),_d((function(r,n){var a=0;r.subscribe(op(n,(function(r){var o=e(r,a++);(o||t)&&n.next(r),!o&&n.complete()})))}))}((e=>{return Bv(e.message)||!("done"in(t=e.message.choices[0].delta)&&null!=t.done);var t})),sp((e=>e.message)))}function Uv(e,t){return _d(function(e,t,r,n,a){return function(o,i){var s=r,l=t,u=0;o.subscribe(op(i,(function(t){var r=u++;l=s?e(l,t,r):(s=!0,t),n&&i.next(l)}),a&&function(){s&&i.next(l),i.complete()}))}}(e,t,arguments.length>=2,!0))}function Wv(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}const Hv=({isOpen:e,onClose:t,metric:r,datasource:a})=>{const[l,u]=(0,n.useState)(null),[c,d]=(0,n.useState)(""),[p,h]=(0,n.useState)(""),[f,m]=(0,n.useState)(!1),[g,v]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{if(!e)return;const t="scoady-dev",n=`${r}{cluster="${t}"}`,o=new je({from:"now-1h",to:"now"}),s=new Oh({name:"groupBy",label:"groupBy",value:"job",query:"instance : instance, cluster : cluster, job : job, pod : pod, namespace : namespace"}),l=new yl({name:"Filters",datasource:{type:"prometheus",uid:a.uid},filters:[]}),c=new mh({variables:[s,l]}),p=new Nl({datasource:{type:"prometheus",uid:a.uid},queries:[{refId:"A",expr:`sum by($groupBy) (${n})`}],$variables:c}),f=new Nl({datasource:{type:"prometheus",uid:a.uid},queries:[{refId:"B",expr:`avg by($groupBy) (count_over_time(${n}[60m]) / 60)`}],$variables:c}),g=new Nl({datasource:{type:"prometheus",uid:a.uid},queries:[{refId:"C",expr:`sum by($groupBy)(count_over_time(${n}[5m]))/5`}],$variables:c}),v=Tv.timeseries().setTitle("Datapoint count grouped by ${groupBy}").setData(p).build(),b=Tv.timeseries().setTitle("Average value grouped by ${groupBy}").setData(f).build(),y=Tv.timeseries().setTitle("Approx. DPM (datapoints/min) grouped by ${groupBy}").setData(g).build(),w=new sf({$timeRange:o,$variables:c,body:new Hm({direction:"column",children:[new Gm({body:new ch({})}),new Gm({height:300,body:v}),new Gm({height:300,body:b}),new Gm({height:300,body:y})]})});function S(){var e;return e=function*(){d(""),h(""),m(!0);try{var e,n,a;const o=null===(n=(yield(0,i.getBackendSrv)().fetch({method:"POST",url:"/api/plugins/dpm-finder/resources/fleet-management-api/ListCollectors",headers:{"Content-Type":"application/json"},data:"{}"}).toPromise()).data)||void 0===n||null===(e=n.collectors)||void 0===e?void 0:e.find((e=>{var r;return(null===(r=e.attributes)||void 0===r?void 0:r.cluster)===t}));if(!o)return d(`No collector found for cluster: ${t}`),h("Unable to analyze config: no collector found."),void m(!1);const s=(null===(a=(yield(0,i.getBackendSrv)().fetch({method:"POST",url:"/api/plugins/dpm-finder/resources/fleet-management-api/GetConfig",headers:{"Content-Type":"application/json"},data:JSON.stringify({id:o.id})}).toPromise()).data)||void 0===a?void 0:a.content)||"No config returned.";d(s);const l=`Explain the Prometheus metric "${r}".\n\nThis metric is being collected by a Grafana Alloy collector with the following configuration:\n\n\n`+s+"\n\n\nPlease analyze the configuration provided and highlight any potential contributors to datapoints per minute that you can observe.";zv({model:Fv.LARGE,messages:[{role:"user",content:l}]}).pipe(Uv(((e,t)=>{var r,n,a;return e+((null===(a=t.choices)||void 0===a||null===(n=a[0])||void 0===n||null===(r=n.delta)||void 0===r?void 0:r.content)||"")}),"")).subscribe({next:e=>h(e),error:e=>{console.error(e),h("Error communicating with LLM."),m(!1)},complete:()=>m(!1)})}catch(e){console.error("Collector fetch or LLM failed:",e),d("Error fetching config."),h("Failed to run analysis."),m(!1)}},S=function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Wv(o,n,a,i,s,"next",e)}function s(e){Wv(o,n,a,i,s,"throw",e)}i(void 0)}))},S.apply(this,arguments)}u(w),function(){S.apply(this,arguments)}()}),[e,r,a]),l?o().createElement(s.Drawer,{title:`Datapoints for ${r}`,isOpen:e,onClose:t,placement:"right",width:"50%"},o().createElement("div",{style:{marginBottom:"1rem"}},o().createElement("h4",null,"LLM Explanation"),f?o().createElement(s.Spinner,null):o().createElement(s.TextArea,{rows:10,value:p,readOnly:!0,style:{width:"100%",backgroundColor:"#111",color:"white"}})),o().createElement("div",{style:{marginBottom:"1rem"}},o().createElement(l.Component,{model:l})),c&&o().createElement("div",{style:{marginTop:"1rem"}},o().createElement(s.Collapse,{label:"Collector Configuration",isOpen:g,onToggle:()=>v(!g)},o().createElement(s.TextArea,{rows:15,value:c,readOnly:!0,style:{width:"100%",backgroundColor:"#111",color:"white"}})))):null};function Gv(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function qv(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Gv(o,n,a,i,s,"next",e)}function s(e){Gv(o,n,a,i,s,"throw",e)}i(void 0)}))}}const Qv=()=>({wrapper:p.css`display: flex; flex-direction: column; height: 100%; overflow: hidden; font-family: Open Sans;`,content:p.css`display: flex; flex: 1; overflow: hidden;`,leftPanel:p.css`width: 50%; padding: 20px; overflow: auto;`,footerPanel:p.css`height: 200px; border-top: 1px solid #444; background: #111; padding: 10px;`,metricRow:p.css`
    margin-bottom: 10px; padding: 10px; border: 1px solid #ccc; border-radius: 4px; cursor: pointer;
    background-color: #1f1f1f; &:hover { background-color: #2a2a2a; }
  `});const Xv=(new r.AppPlugin).setRootPage((function(){const e=(0,s.useStyles2)(Qv),[t,r]=(0,n.useState)([]),[a,l]=(0,n.useState)([]),[u,c]=(0,n.useState)([]),[d,p]=(0,n.useState)(!1),[h,f]=(0,n.useState)(null),[m,g]=(0,n.useState)(null),[v,b]=(0,n.useState)(!1),[y,w]=(0,n.useState)(null);(0,n.useEffect)((()=>{function e(){return(e=qv((function*(){const e=yield(0,i.getDataSourceSrv)().getList({type:"prometheus"});r(e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),(0,n.useEffect)((()=>{function e(){return e=qv((function*(){if(!a.length)return void c([]);p(!0);const e=[];for(const r of a){const n=t.find((e=>e.uid===r.value));if(!n)continue;const a=(yield(0,i.getBackendSrv)().datasourceRequest({method:"GET",url:`/api/datasources/proxy/${n.id}/api/v1/series`,params:{"match[]":'{cluster=~".+"}',start:(Date.now()/1e3-300|0).toString(),end:(Date.now()/1e3|0).toString()}})).data.data,o=Array.from(new Set(a.map((e=>e.__name__)))).slice(0,10);if(yield Promise.all(o.map(function(){var t=qv((function*(t){const r=`count_over_time(${t}{cluster=~".+"}[5m])/5`,a=(yield(0,i.getBackendSrv)().datasourceRequest({method:"GET",url:`/api/datasources/proxy/${n.id}/api/v1/query`,params:{query:r}})).data.data.result;if(a.length&&a[0].value.length>1){const r=parseFloat(a[0].value[1]);r>0&&e.push({metric:t,dpm:r,datasource:n})}}));return function(e){return t.apply(this,arguments)}}())),e.length&&!y){const e=new Nl({datasource:{type:"prometheus",uid:n.uid},queries:[{refId:"A",expr:"sum by (cluster) (count_over_time(scrape_samples_scraped[5m]))/5"}]}),t=new sf({$data:e,$timeRange:new je({from:"now-1h",to:"now"}),body:new Hm({direction:"row",children:[new Gm({height:180,body:Tv.timeseries().setTitle("Rolling DPM Computation (5m)").setData(e).build()})]})});w(t)}}e.sort(((e,t)=>t.dpm-e.dpm)),c(e),p(!1)})),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[a,t]);const S=function(){var e=qv((function*(e,t){f(e),g(t),b(!0)}));return function(t,r){return e.apply(this,arguments)}}();return o().createElement("div",{className:e.wrapper},o().createElement("div",{className:e.content},o().createElement("div",{className:e.leftPanel},o().createElement(s.MultiSelect,{placeholder:"Select datasources...",options:t.map((e=>({label:e.name,value:e.uid}))),value:a,onChange:l}),d?o().createElement(s.Spinner,null):u.map((t=>o().createElement("div",{key:t.metric,className:e.metricRow,onClick:()=>S(t.metric,t.datasource)},o().createElement("strong",null,t.metric)," (",t.dpm.toFixed(2)," DPM)"))))),y&&o().createElement("div",{className:e.footerPanel},o().createElement(y.Component,{model:y})),v&&h&&m&&o().createElement(Hv,{isOpen:v,onClose:()=>b(!1),metric:h,datasource:m}))})).addConfigPage({title:"Configuration",icon:"cog",body:({plugin:e,query:t,onChange:r})=>{const{jsonData:a={},secureJsonFields:u={}}=e,p=a.datasourceUid?{uid:a.datasourceUid}:void 0,[h,f]=(0,n.useState)(a.fleetBaseURL||""),[m,g]=(0,n.useState)(""),[v,b]=(0,n.useState)(Boolean(u.fleetAuthToken)),y=function(){var t,r=(t=function*(){const t={enabled:e.enabled,pinned:e.pinned,jsonData:d(c({},a),{fleetBaseURL:h})};m&&(t.secureJsonData={fleetAuthToken:m});try{yield(0,i.getBackendSrv)().fetch({url:`/api/plugins/${e.id}/settings`,method:"POST",data:t}),m&&(b(!0),g("")),window.location.reload()}catch(e){console.error("Failed to save settings",e)}},function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(e){l(o,n,a,i,s,"next",e)}function s(e){l(o,n,a,i,s,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return o().createElement("div",{style:{padding:"20px"}},o().createElement(s.FieldSet,{label:"Data Source"},o().createElement(s.Field,{label:"Prometheus Data Source"},o().createElement(i.DataSourcePicker,{current:p,onChange:e=>{r(d(c({},t),{datasourceUid:e.uid}))},filter:e=>"prometheus"===e.type}))),o().createElement(s.FieldSet,{label:"Fleet Management"},o().createElement(s.Field,{label:"Fleet Management URL"},o().createElement(s.Input,{value:h,placeholder:"https://fleet-management-prod-014.grafana.net/collector.v1.CollectorService",onChange:e=>f(e.target.value),width:60}))),o().createElement(s.FieldSet,{label:"Authentication"},o().createElement(s.Field,{label:"Auth Token",description:"Authentication token for Fleet Management"},o().createElement(s.Input,{type:"password",value:m,placeholder:v?"configured":"",onChange:e=>g(e.target.value),onPaste:e=>{const t=e.clipboardData.getData("text");g(t)},width:60})),v&&o().createElement(s.Button,{variant:"secondary",onClick:()=>{g(""),b(!1);const t={secureJsonFields:d(c({},u),{fleetAuthToken:!1})};(0,i.getBackendSrv)().fetch({url:`/api/plugins/${e.id}/settings`,method:"POST",data:t})}},"Reset Token")),o().createElement(s.Button,{variant:"primary",onClick:y,style:{marginTop:"20px"}},"Save"))},id:"config"})})(),m})()));
//# sourceMappingURL=module.js.map